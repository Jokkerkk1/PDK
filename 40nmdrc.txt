[question] AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
[answer]   
AA_1 {
@ AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
 X= INT AA_all < 0.06 ABUT<90 SINGULAR REGION
 X OUTSIDE INST
}

[question] AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
[answer]     
AA_1a {
@ AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
 X= INT (Real_MOS12 IN EDGE GT) < 0.12 ABUT<90 REGION
 X OUTSIDE INST
}

[question] AA inner vertex to inner vertex distance is 0.046
[answer]
SRAA_1sa {
@ AA inner vertex to inner vertex distance is 0.046
  X= EXT AA  < 0.046 ABUT<90 OPPOSITE REGION NOTCH 
  X NOT OUT INST
}

[question] AA minimum width of NMOS/PMOS for 1.2V transistor is 0.12
[answer]
AA_1R {
@ AA minimum width of NMOS/PMOS for 1.2V transistor is 0.12
INT MOS12 < 0.12 ABUT<90 SINGULAR REGION
}

[question] AA (enclosure by TG or DG) minimum width of NMOS/PMOS for 1.8/2.5v transistor is 0.32
[answer]
AA_2 {
@ AA (enclosure by TG or DG) minimum width of NMOS/PMOS for 1.8/2.5v transistor is 0.32
INT ((Real_MOS AND (DG OR TG)) IN EDGE GT) < 0.32 ABUT<90 REGION
}

[question] AA minimum width for interconnect is 0.08
[answer]
AA_3 {
@ AA minimum width for interconnect is 0.08
INT AA < 0.08 ABUT<90 SINGULAR REGION
}


[question] AA minimum space is 0.08
[answer]
AA_4a {
@ AA minimum space is 0.08
X= EXT AA_all < 0.08 SINGULAR REGION
X OUTSIDE INST
}

[question] AA min space is 0.065
[answer]
SRAA_4a {
@ AA min space is 0.065
X=EXT AA < 0.065 ABUT<90 SINGULAR REGION
X NOT OUTSIDE INST
}

[question] AA with gate minimum space along gate poly direction is 0.085, if one of AA width (W3) >= 0.14um, and AA to AA overlap (run length) Y2 >= 0.14um
[answer]
SRAA_4c {
@ AA with gate minimum space along gate poly direction is 0.085, if one of AA width (W3) >= 0.14um, and AA to AA overlap (run length) Y2 >= 0.14um
AA_INGT=AA INTERACT GATE
AA12 = AA_INGT WITH WIDTH >= 0.14
AA_TCHGTX1 =AA_INGT TOUCH EDGE GATE
AA_TCHGTX2 =AA12 TOUCH EDGE GATE
AAspace = EXT AA_TCHGTX1 AA_TCHGTX2 <0.085 OPPOSITE REGION
(AAspace NOT OUTSIDE INST) WITH EDGE (LENGTH (AAspace NOT OUTSIDE INST) >= 0.14)
}

[question] AA minimum area except floating AA is 0.02
[answer]
AA_9 {
@ AA minimum area except floating AA is 0.02
X=AREA (AA NOT FTAA) < 0.02
X OUT INST
}

[question] AA minimum area is 0.015
[answer]
SRAA_9 {
@ AA minimum area is 0.015
X= AREA AA < 0.015
X NOT OUTSIDE INST
}

[question] AA minimum area at floating AA is 0.015
[answer]
AA_9a {
@ AA minimum area at floating AA is 0.015
X = AREA (AA_all NOT INTERACT CTi) < 0.015
X OUTSIDE INST
}

[question] DG, TG, or core transistors mixed in the same AA are prohibited
[answer]
AA_10_R_ON {
@ DG, TG, or core transistors mixed in the same AA are prohibited
MOS CUT DG
MOS CUT TG
(MOS INTERACT DG) INTERACT TG
}

[question] It is not allowed to draw AA straddle on NW, excluding LDMOS area. Waive the AA interact with RESNW.
[answer]
AA_11 {
@ It is not allowed to draw AA straddle on NW, excluding LDMOS area. Waive the AA interact with RESNW
((AA_all CUT NW) NOT LDBK) NOT (AA_all INTERACT RESNW)
}

[question] AA channel width of NMOS/PMOS for 0.9/1.1/1.2V transistor is <=50. Waive transistor inside VARMOS.
[answer]
AA_12_R_ON {
@ AA channel width of NMOS/PMOS for 0.9/1.1/1.2V transistor is <=50. Waive transistor inside VARMOS
X = LENGTH (GT IN EDGE ((MOS NOT (DG OR TG)) NOT VARMOS)) > 50
EXPAND EDGE X INSIDE BY 0.01
}

[question] AA minimum enclosed area (um2) is 0.0395um2.
[answer]
AA_13 {
@ AA minimum enclosed area (um2) is 0.0395um2.
AAHOLE = HOLES AA_all INNER
AREA (AAHOLE NOT AA_all) < 0.0395
}

[question] AA density overlap by DUMBA min. is 20%. Density check window size: 200um200um, step size: 100um
[answer]
AA_15a_R_density_OFF {
@ AA density overlap by DUMBA min. is 20%. Density check window size: 200um200um, step size: 100um
DENSITY_MARK = DUMBA NOT MARKS
CHECK_LAYER = (AAi OR AADUM) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.20 WINDOW 200 STEP 100 BACKUP INSIDE OF LAYER DENSITY_MARK PRINT density_report_AA_15a.log RDB density_report_AA15a.db
}

[question] AA density overlap by DUMBA max. is 80%. Density check window size: 200um200um, step size: 100um
[answer]
AA_15b_R_density_OFF {
@ AA density overlap by DUMBA max. is 80%. Density check window size: 200um200um, step size: 100um
DENSITY_MARK = DUMBA NOT MARKS
CHECK_LAYER = (AAi OR AADUM) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.80 WINDOW 200 STEP 100 BACKUP INSIDE OF LAYER DENSITY_MARK PRINT density_report_AA_15b.log RDB density_report_AA15b.db
}

[question] Bent 45 degree AA width is >= 0.16
[answer]
AA_16 {
@ Bent 45 degree AA width is >= 0.16
X = ANGLE AA_all == 45
INT X < 0.16 ABUT < 90 REGION
}

[question] 45 degree AA space to parallel AA is >=0.16
[answer]
AA_17 {
@ 45 degree AA space to parallel AA is >=0.16
X = ANGLE AA_all == 45
EXT X AA_all < 0.16 REGION PARA ONLY
}

[question] AA space for U shape (notch) is >=0.15. Waive for extrusion E <= 0.03 or U shape bottom AA width W0 > 0.08um
[answer]
AA_18{
@ AA space for U shape (notch) is >=0.15. Waive for extrusion E <= 0.03 or U shape bottom AA width W0 > 0.08um
X =CONVEX EDGE AA ANGLE1>269.9<271.1 ANGLE2>269.9<271.1 WITH LENGTH<0.15
Y= CONVEX EDGE AA ANGLE1>89.9<90.1 ANGLE2>269.9<271.1 WITH LENGTH>0.03
Z= EXT X Y <0.001 ABUT == 90 INTERSECTING ONLY REGION
M = INT X AA <=0.08 OPPOSITE REGION
(((EXPAND EDGE X OUTSIDE BY 0.001) INTERACT Z == 2) INTERACT M) OUTSIDE INST
}

[question] AA min width with space on both side <0.15um is 0.046
[answer]
SRAA_101 {
@ AA min width with space on both side <0.15um is 0.046
  AAspace = EXT (AA AND INST) < 0.150 ABUT <90 OPPOSITE REGION
  AAspace_edge1 = AA COIN EDGE AAspace
  AAspace_edge2 = AA NOT COIN EDGE AAspace_edge1
  INT AAspace_edge2 < 0.046 ABUT <90 REGION
}

[question] Maximum length of (AA NOT pickup AA) when AA width < 0.12um and butted with pickup AA is 0.4um.
[answer]
AA_20 {
@ Maximum length of (AA NOT pickup AA) when AA width < 0.12um and butted with pickup AA is 0.4um.
  X = (MOS TOUCH TAP) WITH WIDTH < 0.12
  LENGTH (X TOUCH TAP) > 0.4
}

[question] Maximum AA length between two contacts, or between one contact and AA line end when AA width < 0.12 m is <= 60um.
[answer]
AA_21 {
@ Maximum AA length between two contacts, or between one contact and AA line end when AA width < 0.12 m is <= 60um.
  AA_CHECK = (WITH WIDTH AA < 0.12) ENCLOSE CT > 0
  X = SIZE CT BY 30 INSIDE OF AA_CHECK STEP 0.02
  AA_CHECK INTERACT X > 1

  Y = SIZE X BY 30 INSIDE OF AA_CHECK STEP 0.02
  AA_CHECK NOT Y
}

[question] AA density over the whole chip is >= 25%.
[answer]
AA_22_a_density {
@ AA density over the whole chip is >= 25%.
  DENSITY_MARK = BORDER NOT MARKS
  CHECK_LAYER = (AAi OR AADUM) NOT MARKS
  CHECK_REGION = COPY DENSITY_MARK
  X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.25 PRINT density_report_AA_22_a.log RDB density_report_AA_22_a.db
  X NOT MARKS
}

[question] AA density over the whole chip is <= 75%.
[answer]
AA_22_b_density {
@ AA density over the whole chip is <= 75%.
  DENSITY_MARK = BORDER NOT MARKS
  CHECK_LAYER = (AAi OR AADUM) NOT MARKS
  CHECK_REGION = COPY DENSITY_MARK
  X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.75 PRINT density_report_AA_22_b.log RDB density_report_AA_22_b.db
  X NOT MARKS
}

[question] For any geometry on AA, NW, GT, M1, or Mn (n=2~8), an edge of length < 1.0xWmin cannot have any adjacent edge with length < 1.0xWmin.
[answer]
AA_23_R_OFF {
@ For any geometry on AA, NW, GT, M1, or Mn (n=2~8), an edge of length < 1.0xWmin cannot have any adjacent edge with length < 1.0xWmin.
  CONVEX EDGE AA ANGLE1 > 0 LENGTH1 < 0.06 ANGLE2 > 0 WITH LENGTH < 0.06
  CONVEX EDGE GT ANGLE1 > 0 LENGTH1 < 0.04 ANGLE2 > 0 WITH LENGTH < 0.04
  CONVEX EDGE NW ANGLE1 > 0 LENGTH1 < 0.33 ANGLE2 > 0 WITH LENGTH < 0.33
  CONVEX EDGE M1 ANGLE1 > 0 LENGTH1 < 0.07 ANGLE2 > 0 WITH LENGTH < 0.07
  CONVEX EDGE M2 ANGLE1 > 0 LENGTH1 < 0.07 ANGLE2 > 0 WITH LENGTH < 0.07
  CONVEX EDGE M3 ANGLE1 > 0 LENGTH1 < 0.07 ANGLE2 > 0 WITH LENGTH < 0.07
  CONVEX EDGE M4 ANGLE1 > 0 LENGTH1 < 0.07 ANGLE2 > 0 WITH LENGTH < 0.07
  CONVEX EDGE M5 ANGLE1 > 0 LENGTH1 < 0.07 ANGLE2 > 0 WITH LENGTH < 0.07
  CONVEX EDGE M6 ANGLE1 > 0 LENGTH1 < 0.07 ANGLE2 > 0 WITH LENGTH < 0.07
  CONVEX EDGE M7 ANGLE1 > 0 LENGTH1 < 0.07 ANGLE2 > 0 WITH LENGTH < 0.07
  CONVEX EDGE M8 ANGLE1 > 0 LENGTH1 < 0.07 ANGLE2 > 0 WITH LENGTH < 0.07
}


[question] AA resistor minimum width is 0.40; AA resistor mean AA with RESAA overlap SAB.
[answer]
RESAA_2 {
@ AA resistor minimum width is 0.40; AA resistor mean AA with RESAA overlap SAB.
  INT (AAR INSIDE EDGE SAB) < 0.40 ABUT<90 REGION
}

[question] AA resistor minimum width is 0.40
[answer]
RESAA_2R {
@ AA resistor minimum width is 0.40
  INT (AAR IN EDGE SAB) < 0.40 ABUT<90 REGION
}

[question] AA resistor minimum length is 0.40
[answer]
RESAA_3 {
@ AA resistor minimum length is 0.40
  INT (SAB COIN EDGE AAR) < 0.40 ABUT<90 REGION
}

[question] AA resistor minimum length is 0.80
[answer]
RESAA_3R {
@ AA resistor minimum length is 0.80
  INT (SAB IN EDGE AAR) < 0.80 ABUT<90 REGION
}

[question] AA resistor must be orthogonal
[answer]
RESAA_4 {
@ AA resistor must be orthogonal
  ANGLE AAR >0 <90
}

[question] CT to SAB minimum space is 0.180
[answer]
RESAA_5 {
@ CT to SAB minimum space is 0.180
  EXT (CT INSIDE (AA INTERACT AAR)) SAB < 0.180 ABUT<90 SINGULAR REGION
}

[question] Extension of RESAA outside of AA minimum distance is 0.15
[answer]
RESAA_6 {
@ Extension of RESAA outside of AA minimum distance is 0.15
  ENC AA RESAA < 0.15 ABUT<90 SINGULAR REGION
}
[question] Dog-bone design at the end of AA resistor for contact pick-up is not suggested.
[answer] RESAA_8 {
@ Dog-bone design at the end of AA resistor for contact pick-up is not suggested.
X = CONVEX EDGE AAR == 1
EXPAND EDGE X INSIDE BY 0.01
}

[question] For AA resistor, make sure the AA be covered by SAB and implanted by either SN or SP
[answer] RESAA_9 {
@ For AA resistor, make sure the AA be covered by SAB and implanted by either SN or SP
(AA AND RESAA) NOT SAB
(AAR NOT IN SP) NOT IN SN
}

[question] AA SAB resistor with SP must lay on NW
[answer] RESAA_10 {
@ AA SAB resistor with SP must lay on NW
(AAR AND SP) NOT NW
}

[question] Minimum AA extension of SAB is 0.40
[answer] RESAA_11 {
@ Minimum AA extension of SAB is 0.40
ENC SAB AAR < 0.40 ABUT<90 SINGULAR REGION
}

[question] Minimum Space RESAA to non-related AA is 0.08
[answer] RESAA_12 {
@ Minimum Space RESAA to non-related AA is 0.08
EXT RESAA AA < 0.08 ABUT>0<90 SINGULAR REGION
}

[question] Minimum Space RESAA to non-related Poly is 0.08
[answer] RESAA_13 {
@ Minimum Space RESAA to non-related Poly is 0.08
EXT RESAA GT < 0.08 ABUT>0<90 SINGULAR REGION
}

[question] RESAA and SAB on AA should have coincident edge
[answer] RESAA_14{
@ RESAA and SAB on AA should have coincident edge
X =SAB INSIDE EDGE AA
Y = RESAA INSIDE EDGE AA
Y NOT COIN EDGE X
RESAA ENCLOSE AA
}

[question] Maximum containing rectangle of HDA is 250250
[answer] AA_C_1 {
@ Maximum containing rectangle of HDA is 250250
(HDA WITH WIDTH > 250) NOT MARKS
}

[question] Minimum space between HDAs is 80
[answer] AAC_2 {
@ Minimum space between HDAs is 80
EXT HDA < 80 ABUT<90 SINGULAR REGION
}

[question] Maximum containing rectangle of LDA is 5050
[answer] AA_C_3 {
@ Maximum containing rectangle of LDA is 5050
(LDA WITH WIDTH > 50) NOT MARKS
}

[question] Maximum containing rectangle of MDA is 125125
[answer] AA_C_4 {
@ Maximum containing rectangle of MDA is 125125
(MDA WITH WIDTH > 125) NOT MARKS
}

[question] AA Silicide resistor minimum width is 0.2
[answer] DIFRES_1{
@ AA Silicide resistor minimum width is 0.2
INT AAD <0.2 ABUT<90 REGION
}

[question] DIFRES can not overlap with RESAA
[answer] DIFRES_2{
@ DIFRES can not overlap with RESAA
DIFRES AND RESAA
}

[question] AA Silicide resistor minimum square number is 1
[answer] DIFRES_3{
@ AA Silicide resistor minimum square number is 1
X = DIFRES INTERACT AA
Y = AA AND DIFRES
L = LENGTH Y >0
L1 = EXPAND EDGE L OUTSIDE BY 0.001
W = INSIDE EDGE X AA
W1 = EXPAND EDGE W OUTSIDE BY 0.001
L_RE =L1 NOT W1
L_EDGE = L_RE COIN EDGE Y
DFM PROPERTY Y L_EDGE W OVERLAP ABUT ALSO MULTI [WIDTH = LENGTH(W)] >0 [SQUARES = LENGTH(L_EDGE)/LENGTH(W)] < 1
}

[question] AA Silicide resistor must be orthogonal
[answer] DIFRES_4{
@ AA Silicide resistor must be orthogonal
ANGLE AAD >0 <90
}

[question] CT to DIFRES space fix is 0.01
[answer] DIFRES_5{
@ CT to DIFRES space fix is 0.01
X1 = EXT CT DIFRES <= 0.07 ABUT<90 REGION OPPOSITE
X2 = EXT CT DIFRES == 0.01 ABUT<90 REGION OPPOSITE
(X1 NOT (X2 NOT (X2 ENCLOSE CT))) OR (CT INTERACT DIFRES)
}

[question] Extension of DIFRES outside of AA minimum distance is 0
[answer] DIFRES_6{
@ Extension of DIFRES outside of AA minimum distance is 0
X =AAD TOUCH (DIFRES NOT AAD) >1
Y = DIFRES COIN EDGE AA
Z =EXPAND EDGE Y INSIDE BY 0.001
DIFRES NOT INTERACT (X OR (DIFRES INTERACT Z))
}

[question] For AA Silicide resistor, make sure the AA be implanted by either SN or SP. Minimum enclosure by SN or SP is 0.18
[answer] DIFRES_8{
@ For AA Silicide resistor, make sure the AA be implanted by either SN or SP. Minimum enclosure by SN or SP is 0.18
((AA ENCLOSE AAD) NOT IN SP) NOT IN SN
ENC (AA ENCLOSE AAD) SN <0.18 ABUT<90 SINGULAR REGION
ENC (AA ENCLOSE AAD) SP <0.18 ABUT<90 SINGULAR REGION
}

[question] AA Silicide resistor with SP must lay on NW
[answer] DIFRES_9{
@ AA Silicide resistor with SP must lay on NW
(AAD AND SP) NOT NW
}

[question] AA Silicide resistor with SN must lay on PW
[answer] DIFRES_10{
@ AA Silicide resistor with SN must lay on PW
(AAD AND SN) NOT PW
}

[question] Minimum Space between DIFRES and non-related AA is 0.08
[answer] DIFRES_11{
@ Minimum Space between DIFRES and non-related AA is 0.08
EXT DIFRES AA < 0.08 ABUT>0<90 SINGULAR REGION
}

[question] Minimum Space between DIFRES and non-related Poly is 0.08
[answer] DIFRES_12{
@ Minimum Space between DIFRES and non-related Poly is 0.08
EXT DIFRES GT < 0.08 ABUT>0<90 SINGULAR REGION
}

[question] DNW minimum width is 0.52
[answer] DNW_1 {
@ DNW minimum width is 0.52
INT DNW < 0.52 ABUT<90 SINGULAR REGION
}

[question] Minimum space between two DNW regions is 0.80
[answer] DNW_2 {
@ Minimum space between two DNW regions is 0.80
EXT DNW < 0.80 ABUT<90 SINGULAR REGION
}

[question] Space between two DNW regions at different nets is 1.8um.
[answer] DNW_2a {
@ Space between two DNW regions at different nets is 1.8um.
EXT DNW < 1.8 ABUT<90 REGION NOT CONNECTED
}

[question] Minimum overlap of NW and DNW region is 0
[answer] DNW_3 {
@ Minimum overlap of NW and DNW region is 0
DNW OUT EDGE NW
}

[question] Minimum space between a DNW and a NW is 0.565
[answer] DNW_4 {
@ Minimum space between a DNW and a NW is 0.565
X = NW NOT COIN EDGE DNW
EXT X DNW < 0.565 ABUT<90 REGION
}

[question] Minimum space between a DNW region and a NW region of different net is 1.5um
[answer] DNW_4a {
@ Minimum space between a DNW region and a NW region of different net is 1.5um
X = NW NOT COIN EDGE DNW
EXT DNW X < 1.5 ABUT<90 REGION NOT CONNECTED
}

[question] Minimum space between P+AA to DNW is 0.21
[answer] DNW_5 {
@ Minimum space between P+AA to DNW is 0.21
EXT DNW PACT < 0.21 ABUT<90 SINGULAR REGION
}

[question] Minimum space between N+AA enclosed by DNW to NW is 0.21
[answer] DNW_6 {
@ Minimum space between N+AA enclosed by DNW to NW is 0.21
EXT (NACT AND DNW) NW < 0.21 ABUT<90 SINGULAR REGION
}

[question] Space between DNW and N+AA outside of DNW is >= 1.4um.
[answer] DNW_7 {
@ Space between DNW and N+AA outside of DNW is >= 1.4um.
EXT ((NACT NOT NW) OUTSIDE DNW) DNW < 1.4 ABUT<90 SINGULAR REGION
}

[question] Space between (NW hole INSIDE DNW) and ((NW hole INSIDE DNW) or (PW NOT DNW)) at different nets is >= 0.6um.
[answer] DNW_8 {
@ Space between (NW hole INSIDE DNW) and ((NW hole INSIDE DNW) or (PW NOT DNW)) at different nets is >= 0.6um.
X = (HOLES NW) INSIDE DNW
Z = PW AND X
H = PW AND (PW NOT DNW)

OUT1 = EXT Z < 0.6 ABUT < 90 REGION NOT CONNECTED
OUT1 NOT MARKS

OUT2 = EXT Z H < 0.6 ABUT < 90 REGION NOT CONNECTED
OUT2 NOT MARKS
}
[question] It is not allowed that N+AA CUT DNW.
[answer] DNW_9 {
@ It is not allowed that N+AA CUT DNW.
(NACT NOT NW) CUT DNW
}

[question] NW minimum width(parallel side to side width, The INST connected area apply SRAM design rule) is 0.33
[answer] NW_1 {
@ NW minimum width(parallel side to side width, The INST connected area apply SRAM design rule) is 0.33
X= INT NW < 0.33 REGION PARA ONLY
X OUT INST
}

[question] NW minimum width is 0.27
[answer] SRNW_1 {
@ NW minimum width is 0.27
X = INT NW < 0.27 ABUT<90 SINGULAR REGION
X NOT OUTSIDE INST
}

[question] NW width for (((DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) connected area is >= 0.27.
[answer] NW_1a {
@ NW width for (((DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) connected area is >= 0.27.
X= INT NW < 0.27 ABUT<90 SINGULAR REGION
X NOT OUTSIDE SRAM
}

[question] NW width for NW resistor is 1.2
[answer] NW_2 {
@ NW width for NW resistor is 1.2
INT NWR < 1.20 ABUT<90 OPPOSITE REGION
}

[question] Minimum space between two NW regions at the same net (with run length > 0 and skip to check jog <= 0.005um) is 0.33um.
[answer] NW_3 {
@ Minimum space between two NW regions at the same net (with run length > 0 and skip to check jog <= 0.005um) is 0.33um.
JOG_EDGE = CONVEX EDGE NW == 1 WITH LENGTH <= 0.005
X = NW NOT COIN EDGE JOG_EDGE
EXT X < 0.33 ABUT<90 OPPOSITE REGION CONNECTED
}

[question] Minimum space between two 0.9/1.1/1.2v NW regions at the same potential is 0.324
[answer] SRNW_3 {
@ Minimum space between two 0.9/1.1/1.2v NW regions at the same potential is 0.324
X = EXT NW < 0.324 ABUT<90 SINGULAR REGION CONNECTED
X NOT OUTSIDE INST
}

[question] Minimum space between two NW regions at different net is 0.60
[answer] NW_4 {
@ Minimum space between two NW regions at different net is 0.60
EXT NW < 0.60 ABUT<90 SINGULAR REGION NOT CONNECTED
}

[question] NW minimum area is 0.64um.
[answer] NW_7 {
@ NW minimum area is 0.64um.
AREA NW < 0.64
}

[question] NW minimum enclosed area is 0.70
[answer] NW_8 {
@ NW minimum enclosed area is 0.70
NWHOLE = HOLES NW INNER
AREA (NWHOLE NOT NW) < 0.70
}

[question] NW minimum space to N+AA (enclosure by TG or DG) is 0.22
[answer] NW_9 {
@ NW minimum space to N+AA (enclosure by TG or DG) is 0.22
EXT NW (NACT INSIDE (TG OR DG)) < 0.22 ABUT<90 SINGULAR REGION
}

[question] NW enclosure of P+AA (enclosed by TG or DG)is 0.22
[answer] NW_10 {
@ NW enclosure of P+AA (enclosed by TG or DG)is 0.22
ENC (PACT INSIDE (TG OR DG)) NW < 0.22 ABUT<90 SINGULAR REGION
}

[question] N+AA adjacent both two edges space opposite to NW is >=0.16. Both of two adjacent edges space to NW smaller than rule value is not permitted.
[answer] NW_11{
@ N+AA adjacent both two edges space opposite to NW is >=0.16. Both of two adjacent edges space to NW smaller than rule value is not permitted.
X = EXT [NACT] NW <0.16 ABUT<90 OPPOSITE
Y=NACT TOUCH EDGE X
Z =INT Y <0.002 ABUT REGION
Z NOT SRAM
}
[question] P+AA enclosure by NW is 0.037
[answer] SRNW_15 {
@ P+AA enclosure by NW is 0.037
X= ENC PACT NW < 0.037 ABUT<90 SINGULAR REGION INSIDE ALSO
X NOT OUTSIDE INST
}

[question] N+ AA Minimum enclosure by NW is 0.08, excluding LDMOS area.Waive ((AA interact RESNW) and SN)
[answer] NW_13 {
@ N+ AA Minimum enclosure by NW is 0.08, excluding LDMOS area.Waive ((AA interact RESNW) and SN)
ENC ((NACT OUTSIDE (INST OR LDBK)) NOT ((AA INTERACT RESNW) AND SN)) NW < 0.08 ABUT<90 SINGULAR REGION
}

[question] Minimum Space between NW and N+AA is 0.08um.
[answer] NW_14 {
@ Minimum Space between NW and N+AA is 0.08um.
X = EXT NACT NW < 0.08 ABUT<90 SINGULAR REGION
X OUTSIDE INST
}

[question] P+AA minimum enclosure by NW is 0.08, excluding LDMOS area.
[answer] NW_15 {
@ P+AA minimum enclosure by NW is 0.08, excluding LDMOS area.
ENC (PACT OUTSIDE (INST OR LDBK)) NW < 0.08 ABUT<90 SINGULAR REGION
}

[question] Minimum Space between NW and P+ AA inside PW is 0.08um, excluding LDMOS area.
[answer] NW_16 {
@ Minimum Space between NW and P+ AA inside PW is 0.08um, excluding LDMOS area.
EXT (PTAP NOT (LDBK OR PSUB)) NW < 0.08 ABUT<90 SINGULAR REGION
}
[question] SN enclosure of AA is >= 0.4um.
[answer] RESNWST_7{
@ SN enclosure of AA is >= 0.4um.
ENC (AA TOUCH NWRSTI) SN <0.4 ABUT<90 REGION
}

[question] AA enclosure of NW(the NW interacted with RESNW) EN2 >= 0.3
[answer] RESNWST_8{
@ AA enclosure of NW(the NW interacted with RESNW) EN2 >= 0.3
ENC (NW INTERACT RESNW) AA <0.3 ABUT<90 REGION
}

[question] CT should be in (NW AND ( pick up AA))
[answer] RESNWST_9{
@ CT should be in (NW AND ( pick up AA))
CT AND ((AA TOUCH RESNW) NOT NW)
}

[question] NW resistor under STI must not overlap with AADUM
[answer] RESNWST_10{
@ NW resistor under STI must not overlap with AADUM
NWRSTI AND AADUM
}

[question] (RESNW AND NW) must be an orthogonal rectangle shape to have good simulation accuracy
[answer] RESNWST_11{
@ (RESNW AND NW) must be an orthogonal rectangle shape to have good simulation accuracy R3
NOT RECTANGLE (RESNW AND NW) ORTHOGONAL ONLY
}

[question] RESNW must be an orthogonal rectangle
[answer] RESNWAA_1{
@ RESNW must be an orthogonal rectangle
NOT RECTANGLE (RESNW INTERACT RESNWAA) ORTHOGONAL ONLY
}
[question] AA enclosure of RESNWAA (SMIC 2R no rule, 65nm rule number) >= 0.3
[answer] RESNWAA_4{
@ AA enclosure of RESNWAA (SMIC 2R no rule, 65nm rule number) >= 0.3
ENC RESNWAA AA < 0.3 ABUT<90 REGION
}

[question] NW enclosure of CT (65nm rule, included in SMIC 2R) >= 0.20
[answer] RESNWAA_5{
@ NW enclosure of CT (65nm rule, included in SMIC 2R) >= 0.20
ENC CT (NW ENCLOSE RESNWAA) <0.2 ABUT<90 REGION
}

[question] Enclosure of SAB beyond related NW (65nm rule) >= 0.20
[answer] RESNWAA_6 {
@ Enclosure of SAB beyond related NW (65nm rule) >= 0.20
X1 = HOLES SAB
X2 = SAB TOUCH X1
ENC (NW INTERACT RESNWAA) X1 < 0.2 ABUT<90 SINGULAR REGION
ENC (NW INTERACT RESNWAA) X2 < 0.2 ABUT<90 SINGULAR REGION
(((NW INTERACT RESNWAA) INTERACT X1) NOT X1) NOT SAB
}
[question] Space between RESNW and CT inside (AA interact RESNW) = 0.70
[answer] RESNWAA_8{
@ Space between RESNW and CT inside (AA interact RESNW) = 0.70
X0 = RESNW INTERACT RESNWAA
X01 = (RESNW INTERACT RESNWAA) COIN EDGE SN
X = CT INSIDE (AA INTERACT RESNW)
X1 = EXT X01 X <= 0.76 ABUT<90 REGION OPPOSITE
X2 = EXT X01 X == 0.7 ABUT<90 REGION OPPOSITE
(X1 NOT (X2 NOT (X2 ENCLOSE CT))) OR (CT INTERACT X0)
}

[question] Extension of RESNW outside of NW (65nm 0.2um, SMIC 2R RESNW within NW) >= 0.00
[answer] RESNWAA_9{
@ Extension of RESNW outside of NW (65nm 0.2um, SMIC 2R RESNW within NW) >= 0.00
X =RESNWAA TOUCH (RESNW NOT RESNWAA) >1
Y = RESNW COIN EDGE NW
Z =EXPAND EDGE Y INSIDE BY 0.001
RESNW NOT INTERACT (X OR (RESNW INTERACT Z))
}

[question] SAB must include NW resistor except CT area
[answer] RESNWAA_10{
@ SAB must include NW resistor except CT area
X = SAB INTERACT RESNWAA
RESNWAA NOT X
CT AND X
}

[question] Space between RESNW to SN (SMIC 2R no rule, 65nm no rule) = 0.00
[answer] RESNWAA_11{
@ Space between RESNW to SN (SMIC 2R no rule, 65nm no rule) = 0.00
(RESNW INTERACT RESNWAA) NOT TOUCH SN
(SN INTERACT (NW INTERACT RESNWAA)) NOT TOUCH (RESNW INTERACT RESNWAA)
}

[question] SAB enclosure of AA (SMIC 2R no rule, 65nm rule 0.2um, 0.18um is SMIC SAB main rule) >= 0.18
[answer] RESNWAA_12{
@ SAB enclosure of AA (SMIC 2R no rule, 65nm rule 0.2um, 0.18um is SMIC SAB main rule) >= 0.18
ENC (AA INTERACT RESNWAA) SAB < 0.18 ABUT<90 REGION
}

[question] SAB overlap of SN = 0.4. Use the exact value on sides touch RESNW. (65nm rule 0.2, 40nm WAT TK 0.4um)
[answer] RESNWAA_13 {
@ SAB overlap of SN = 0.4. Use the exact value on sides touch RESNW. (65nm rule 0.2, 40nm WAT TK 0.4um)
X = SN COIN EDGE RESNW
Y = EXPAND EDGE X INSIDE BY 0.4
Y NOT TOUCH (HOLES SAB)
}

[question] NW-Resistor and NW space S1 >= 1
[answer] RESNWST_3{
@ NW-Resistor and NW space S1 >= 1
EXT NWRSTI NW < 1 ABUT<90 SINGULAR REGION
}

[question] The nearest CT space to (AA edge touch RESNW) S2 = 0.3
[answer] RESNWST_4{
@ The nearest CT space to (AA edge touch RESNW) S2 = 0.3
X0 = RESNW INTERACT NWRSTI
X01 = (RESNW COIN EDGE NWRSTI) TOUCH EDGE AA
X1 = EXT X01 CT <= 0.36 ABUT<90 REGION OPPOSITE
X2 = EXT X01 CT == 0.3 ABUT<90 REGION OPPOSITE
(X1 NOT (X2 NOT (X2 ENCLOSE CT))) OR (CT INTERACT X0)
}

[question] Minimum space between NWSTI resistor and adjacent AA is 0.44um.
[answer] RESNWST_5 {
@ Minimum space between NWSTI resistor and adjacent AA is 0.44um.
EXT NWRSTI (AA NOT INTERACT NWRSTI) < 0.44 ABUT<90 SINGULAR REGION
}
[question] SP, P+ implant area, is not allowed to exist in a PSUB region
[answer] PSUB_Note4 {
@ SP, P+ implant area, is not allowed to exist in a PSUB region
(PSUB NOT INDMY) AND SP
}

[question] Bent Poly is not allowed to exist on AA in a PSUB region
[answer] PSUB_13 {
@ Bent Poly is not allowed to exist on AA in a PSUB region
X = GT INSIDE EDGE PBAA
INT X < 0.01 ABUT < 180 REGION
EXT X < 0.01 ABUT < 180 REGION
}

[question] PSUB area is >= 0.7um2.
[answer] PSUB_14 {
@ PSUB area is >= 0.7um2.
AREA PSUB < 0.7
}

[question] PSUB enclosed area is >= 0.64um2.
[answer] PSUB_15 {
@ PSUB enclosed area is >= 0.64um2.
AREA ((HOLES PSUB INNER) NOT PSUB) < 0.64
}

[question] SDOP width is 0.18
[answer] SDOP_1 {
@ SDOP width is 0.18
INT SDOP < 0.18 ABUT<90 SINGULAR REGION
}

[question] Space between two SDOP is 0.18. Merge if the space is less than this rule
[answer] SDOP_2 {
@ Space between two SDOP is 0.18. Merge if the space is less than this rule
EXT SDOP < 0.18 ABUT<90 SINGULAR REGION
}

[question] Space between SDOP and N+/AA in PW or P+ AA in NW is 0.09
[answer] SDOP_3 {
@ Space between SDOP and N+/AA in PW or P+ AA in NW is 0.09
EXT SDOP NTAP < 0.09 ABUT<90 SINGULAR REGION
EXT SDOP PTAP < 0.09 ABUT<90 SINGULAR REGION
}

[question] SDOP extension outside of poly gate for NMOS along source drain direction is 0.18
[answer] SDOP_4 {
@ SDOP extension outside of poly gate for NMOS along source drain direction is 0.18
ENC NGTEIAA SDOP < 0.18 ABUT<90 REGION
}

[question] Space between SDOP and P-channel poly gate is 0.2
[answer] SDOP_5 {
@ Space between SDOP and P-channel poly gate is 0.2
EXT SDOP PGATE < 0.20 ABUT<90 SINGULAR REGION
}

[question] Space between SDOP SAB poly and AA resistor is 0.2
[answer] SDOP_6 {
@ Space between SDOP SAB poly and AA resistor is 0.2
EXT SDOP (GTR INTERACT SAB) < 0.2 ABUT<90 SINGULAR REGION
EXT SDOP (AAR INTERACT SAB) < 0.2 ABUT<90 SINGULAR REGION
}

[question] N+AA enclosure by SDOP is 0.08 if the distance to the poly gate w >0.16um
[answer] SDOP_7 {
@ N+AA enclosure by SDOP is 0.08 if the distance to the poly gate w >0.16um
X = (NMOS AND SDOP) TOUCH EDGE NAAEIGT
ENC X SDOP < 0.08 ABUT<90 REGION
}

[question] N+AA enclosure by SDOP is 0.18 if the distance to the poly gate w<=0.16um
[answer] SDOP_8 {
@ N+AA enclosure by SDOP is 0.18 if the distance to the poly gate w<=0.16um
X = EXPAND EDGE (GT IN EDGE (AA AND SDOP)) OUTSIDE BY 0.16 EXTEND BY 0.18
X NOT SDOP
}

[question] SDOP area is 0.1
[answer] SDOP_9 {
@ SDOP area is 0.1
AREA SDOP < 0.10
}

[question] SDOP minimum enclosed area is 0.1
[answer] SDOP_10 {
@ SDOP minimum enclosed area is 0.1
SDOPHOLE = HOLES SDOP INNER
AREA (SDOPHOLE NOT SDOP) < 0.10
}

[question] SDOP can not overlap with P+ pickup AA or butted P+AA
[answer] SDOP_11 {
@ SDOP can not overlap with P+ pickup AA or butted P+AA
SDOP AND PACT
}

[question] SDOP shapes must be orthogonal
[answer] SDOP_12 {
@ SDOP shapes must be orthogonal
ANGLE SDOP >0<90
}

[question] (SDOP over AA) over (TG, DG, LVN, VTNH) is prohibited
[answer] SDOP_13 {
@ (SDOP over AA) over (TG, DG, LVN, VTNH) is prohibited
SDAA = AA AND SDOP
SDAA AND TG
SDAA AND DG
SDAA AND LVN
SDAA AND VTNH
}

[question] Gate touching SDOP must be covered by SDOP
[answer] SRDOP_101 {
@ Gate touching SDOP must be covered by SDOP
(GATE NOT OUTSIDE SDOP) NOT SDOP
}

[question] SDOP min. width is 0.18
[answer] SRDOP_102 {
@ SDOP min. width is 0.18
INT SDOP < 0.18 ABUT<90 SINGULAR REGION
}

[question] SDOP min. area is 0.1
[answer] SRDOP_103 {
@ SDOP min. area is 0.1
AREA SDOP < 0.1
}

[question] SDOP is must be in INST
[answer] SRDOP_104 {
@ SDOP is must be in INST
SDOP NOT INST
}

[question] SDOP must enclose Real Gate is 0.056
[answer] SRDOP_105 {
@ SDOP must enclose Real Gate is 0.056
ENC Real_GATE SDOP < 0.056 ABUT<90 SINGULAR REGION
}

[question] TG minimum width is 0.33(single-point-interact is allowed).
[answer] TG_1 {
@ TG minimum width is 0.33(single-point-interact is allowed).
INT TG < 0.33 ABUT<90 REGION
}

[question] Minimum space between two TGs is 0.33(single-point-interact is allowed).
[answer] TG_2 {
@ Minimum space between two TGs is 0.33(single-point-interact is allowed).
EXT TG < 0.33 ABUT<90 REGION
}

[question] AA with transistor minimum enclosure by TG is 0.20um(include AA area not under poly).
[answer] TG_3 {
@ AA with transistor minimum enclosure by TG is 0.20um(include AA area not under poly).
ENC Real_MOS TG < 0.20 ABUT<90 SINGULAR REGION
}

[question] Real gate enclosure by TG is 0.20
[answer] TG_4 {
@ Real gate enclosure by TG is 0.20
ENC Real_GATE TG < 0.20 ABUT<90 SINGULAR REGION
}
[question] NW enclosure opposite of P+AA adjacent both two edges is >= 0.16. Both of two adjacent edges enclosed by NW smaller than rule value is not permitted.
[answer] NW_12{
@ NW enclosure opposite of P+AA adjacent both two edges is >= 0.16. Both of two adjacent edges enclosed by NW smaller than rule value is not permitted.
X = ENC [PACT] NW <0.16 ABUT<90 OPPOSITE
Y =PACT TOUCH EDGE X
Z =INT Y <0.002 ABUT REGION
Z NOT SRAM
}

[question] N+AA enclosure by NW is 0.027
[answer] SRNW_13{
@ N+AA enclosure by NW is 0.027
X = ENC NTAP NW < 0.027 ABUT<90 SINGULAR REGION
X NOT OUTSIDE INST
}

[question] Space between TG and Real gate is 0.19 (Don't be necessary for pick-up to follow these rules)
[answer] TG_6 {
@ Space between TG and Real gate is 0.19 (Don't be necessary for pick-up to follow these rules)
EXT TG Real_GATE < 0.19 ABUT<90 SINGULAR REGION
}

[question] Minimum area is 0.463
[answer] TG_7 {
@ Minimum area is 0.463
AREA TG < 0.463
}

[question] Minimum enclosed area is 0.463
[answer] TG_8 {
@ Minimum enclosed area is 0.463
TGHOLE = HOLES TG INNER
AREA (TGHOLE NOT TG) < 0.463
}

[question] Space between TG and Real gate is 0.19 (Don't be necessary for pick-up to follow these rules)
[answer] TG_9 {
@ AA (enclosure by TG) minimum width for 2.5V transistor is 0.32
INT MOS25 < 0.32 ABUT<90 SINGULAR REGION
}

[question] TG shapes must be orthogonal
[answer] TG_10 {
@ TG shapes must be orthogonal
ANGLE TG >0<90
}

[question] Extension of AA in TG outside of Real gate is 0.15. Exclude gate within LDMOS region(within LDBK) and within inductor area(layer INDMY)
[answer] TG_11_R_ON {
@ Extension of AA in TG outside of Real gate is 0.15. Exclude gate within LDMOS region(within LDBK) and within inductor area(layer INDMY)

ENC (Real_GATE NOT (LDBK OR INDMY)) (AA AND TG) < 0.15 ABUT>0<90 SINGULAR REGION
}

[question] Space between TG and DG is 0.33
[answer] TG_12 {
@ Space between TG and DG is 0.33
EXT TG DG < 0.33 ABUT<90 SINGULAR REGION
}

[question] TG minimum overlap past NW with abutting permitted is 0.33
[answer] TG_13 {
@ TG minimum overlap past NW with abutting permitted is 0.33
ENC NW (TG NOT COIN EDGE NW) < 0.33 ABUT<90 REGION
}

[question] TG minimum overlap of NW with abutting permitted is 0.33
[answer] TG_14 {
@ TG minimum overlap of NW with abutting permitted is 0.33
INT NW (TG NOT COIN EDGE NW) < 0.33 ABUT<90 REGION
}

[question] NW minimum overlap past TG with abutting permitted is 0.33
[answer] TG_15 {
@ NW minimum overlap past TG with abutting permitted is 0.33
ENC (TG NOT COIN EDGE NW) NW < 0.33 ABUT<90 REGION
}
[question] Minimum space between DG and Real gate is 0.19
[answer] DG_6 {
@ Minimum space between DG and Real gate is 0.19
EXT DG Real_GATE < 0.19 ABUT<90 SINGULAR REGION
}

[question] Minimum area is 0.463
[answer] DG_7 {
@ Minimum area is 0.463
AREA DG < 0.463
}

[question] Minimum enclosed area is 0.463
[answer] DG_8 {
@ Minimum enclosed area is 0.463
DGHOLE = HOLES DG INNER
AREA (DGHOLE NOT DG) < 0.463
}

[question] AA (enclosure by DG) minimum width for 1.8V transistor is 0.32
[answer] DG_9 {
@ AA (enclosure by DG) minimum width for 1.8V transistor is 0.32
INT MOS18 < 0.32 ABUT<90 SINGULAR REGION
}

[question] DG shapes must be orthogonal
[answer] DG_10 {
@ DG shapes must be orthogonal
ANGLE DG >0<90
}

[question] AA (enclosed by DG) minimum overlap past poly is 0.15
[answer] DG_11_R_ON {
@ AA (enclosed by DG) minimum overlap past poly is 0.15
ENC GT MOS18 < 0.15 ABUT<90 SINGULAR REGION
}

[question] DG minimum overlap past NW with abutting permitted is 0.33
[answer] DG_12 {
@ DG minimum overlap past NW with abutting permitted is 0.33
ENC NW DG < 0.33 ABUT>0<90 SINGULAR REGION
}

[question] DG minimum overlap of NW with abutting permitted is 0.33
[answer] DG_13 {
@ DG minimum overlap of NW with abutting permitted is 0.33
INT NW DG < 0.33 ABUT>0<90 SINGULAR REGION
}

[question] NW minimum overlap past DG with abutting permitted is 0.33
[answer] DG_14 {
@ NW minimum overlap past DG with abutting permitted is 0.33
ENC DG NW < 0.33 ABUT>0<90 SINGULAR REGION
}

[question] Space between (NW NOT (DG OR TG)) and (NW NOT (DG OR TG)) is >= 0.33um.
[answer] TG_18 {
@ Space between (NW NOT (DG OR TG)) and (NW NOT (DG OR TG)) is >= 0.33um.
@ with run length > 0, skip to check jog <=0.01um pattern.
X = NW NOT (DG OR TG)
JOG_EDGE = CONVEX EDGE X == 1 WITH LENGTH <= 0.01
Y = X NOT COIN EDGE JOG_EDGE
EXT Y < 0.33 ABUT<90 OPPOSITE REGION
}

[question] Space between ((DG OR TG) AND NW) and ((DG OR TG) AND NW) when run length > 0 is >= 0.33um.
[answer] TG_19 {
@ Space between ((DG OR TG) AND NW) and ((DG OR TG) AND NW) when run length > 0 is >= 0.33um.
X = NW AND (DG OR TG)
EXT X < 0.33 ABUT<90 OPPOSITE REGION
}

[question] Space between ((DG OR TG) NOT (NW OR PSUB)) and ((DG OR TG) NOT (NW OR PSUB)) when run length > 0 is >= 0.33um.
[answer] TG_20 {
@ Space between ((DG OR TG) NOT (NW OR PSUB)) and ((DG OR TG) NOT (NW OR PSUB)) when run length > 0 is >= 0.33um.
X = (DG OR TG) NOT (NW OR PSUB)
EXT X < 0.33 ABUT<90 OPPOSITE REGION
}

[question] DG minimum width is 0.33
[answer] DG_1 {
@ DG minimum width is 0.33
INT DG < 0.33 ABUT<90 SINGULAR REGION
}

[question] Minmum space between two DGs is 0.33, merge if the space is less than rule
[answer] DG_2 {
@ Minmum space between two DGs is 0.33, merge if the space is less than rule
EXT DG < 0.33 ABUT<90 SINGULAR REGION
}

[question] AA with transistor minimum enclosure by DG is 0.20 (include AA area not under poly)
[answer] DG_3 {
@ AA with transistor minimum enclosure by DG is 0.20 (include AA area not under poly)
ENC Real_MOS DG < 0.20 ABUT<90 SINGULAR REGION
}

[question] Real gate minimum enclosure by DG is 0.20
[answer] DG_4 {
@ Real gate minimum enclosure by DG is 0.20
ENC Real_GATE DG < 0.20 ABUT<90 SINGULAR REGION
}

[question] M1 enclosure by BORDER min. is 0.36
[answer] BORDER_2_M1 {
@ M1 enclosure by BORDER min. is 0.36
ENC M1i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}

[question] M2 enclosure by BORDER min. is 0.36
[answer] BORDER_2_M2 {
@ M2 enclosure by BORDER min. is 0.36
ENC M2i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}

[question] M3 enclosure by BORDER min. is 0.36
[answer] BORDER_2_M3 {
@ M3 enclosure by BORDER min. is 0.36
ENC M3i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}
[question] CT enclosure by BORDER min. is 0.36
[answer] BORDER_2_CT {
@ CT enclosure by BORDER min. is 0.36
ENC CTi BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}


[question] AA enclosure by BORDER min. is 0.36
[answer] BORDER_2_AA {
@ AA enclosure by BORDER min. is 0.36
ENC AAi BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}
[question] GT enclosure by BORDER min. is 0.36
[answer] BORDER_2_GT {
@ GT enclosure by BORDER min. is 0.36
ENC GTi BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}

[question] M4 enclosure by BORDER min. is 0.36
[answer] BORDER_2_M4 {
@ M4 enclosure by BORDER min. is 0.36
ENC M4i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}

[question] M5 enclosure by BORDER min. is 0.36
[answer] BORDER_2_M5 {
@ M5 enclosure by BORDER min. is 0.36
ENC M5i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}

[question] M6 enclosure by BORDER min. is 0.36
[answer] BORDER_2_M6 {
@ M6 enclosure by BORDER min. is 0.36
ENC M6i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}


[question] M7 enclosure by BORDER min. is 0.36
[answer] BORDER_2_M7 {
@ M7 enclosure by BORDER min. is 0.36
ENC M7i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}

[question] M8 enclosure by BORDER min. is 0.36
[answer] BORDER_2_M8 {
@ M8 enclosure by BORDER min. is 0.36
ENC M8i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}

[question] V1 enclosure by BORDER min. is 0.36
[answer] BORDER_2_V1 {
@ V1 enclosure by BORDER min. is 0.36
ENC V1i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}

[question] V2 enclosure by BORDER min. is 0.36
[answer] BORDER_2_V2 {
@ V2 enclosure by BORDER min. is 0.36
ENC V2i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}

[question] V3 enclosure by BORDER min. is 0.36
[answer] BORDER_2_V3 {
@ V3 enclosure by BORDER min. is 0.36
ENC V3i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}

[question] V4 enclosure by BORDER min. is 0.36
[answer] BORDER_2_V4 {
@ V4 enclosure by BORDER min. is 0.36
ENC V4i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}

[question] V5 enclosure by BORDER min. is 0.36
[answer] BORDER_2_V5 {
@ V5 enclosure by BORDER min. is 0.36
ENC V5i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}

[question] V6 enclosure by BORDER min. is 0.36
[answer] BORDER_2_V6 {
@ V6 enclosure by BORDER min. is 0.36
ENC V6i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}


[question] V7 enclosure by BORDER min. is 0.36
[answer] BORDER_2_V7 {
@ V7 enclosure by BORDER min. is 0.36
ENC V7i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}

[question] DNW minimum enclosure by chip edge(BORDER layer) is 0.8
[answer] BORDER_3 {
@ DNW minimum enclosure by chip edge(BORDER layer) is 0.8
ENC DNW BD_WITHHOLE < 0.8 ABUT<90 SINGULAR REGION
}

[question] All designs should place a BORDER at the most outermost edge with straight lines from chip corner area to corner area.
[answer] BORDER_4{
@ All designs should place a BORDER at the most outermost edge with straight lines from chip corner area to corner area.
BD_WITHHOLE NOT ( RECTANGLE (BD_WITHHOLE OR CORN))
}

[question] All designs should place a BORDER at the most outermost edge with straight lines from chip corner area to corner area.
[answer] BORDER_4{
@ All designs should place a BORDER at the most outermost edge with straight lines from chip corner area to corner area.
BD_WITHHOLE NOT ( RECTANGLE BD_WITHHOLE )
}
[question] Enclosure of seal ring outer ring outline edge by BORDER layer if the seal ring has been added by designers is >= 5um.
[answer] BORDER_6 {
@ Enclosure of seal ring outer ring outline edge by BORDER layer if the seal ring has been added by designers is >= 5um.
MS_OUT_TEMP1 = (((((((M1i AND MARKS) OR (M2i AND MARKS)) OR (M3i AND MARKS)) OR (M4i AND MARKS)) OR (M5i AND MARKS)) OR (M6i AND MARKS)) OR (M7i AND MARKS)) OR (M8i AND MARKS)
MS_OUT_TEMP2 = (TM2i AND MARKS) OR (MTT2i AND MARKS)
MS_OUT = MS_OUT_TEMP1 OR MS_OUT_TEMP2
X = HOLES MS_OUT
MS_outer_ring = MS_OUT TOUCH X
ENC MS_outer_ring BD_WITHHOLE < 5
}

[question] Real GATE channel length for 0.9/1.1/1.2V N/P MOS transistors (std, high, or low VT) is >= 0.044um.
[answer] GT_1a_R_OFF {
@ Real GATE channel length for 0.9/1.1/1.2V N/P MOS transistors (std, high, or low VT) is >= 0.044um.
X = (GT IN EDGE (AA NOT (DG OR TG))) COIN EDGE Real_GATE
INT X < 0.044 ABUT<90 REGION OPPOSITE
}

[question] Real GATE minimum channel length for 1.8V N/P MOS transistors is 0.15
[answer] GT_1b {
@ Real GATE minimum channel length for 1.8V N/P MOS transistors is 0.15
X = GT COIN EDGE ((Real_GATE AND DG) NOT DGV)
INT X < 0.15 ABUT<90 REGION OPPOSITE
}

[question] Real GATE minimum channel length for 2.5V N/P MOS transistors is 0.27
[answer] GT_1c {
@ Real GATE minimum channel length for 2.5V N/P MOS transistors is 0.27
X = GT COIN EDGE ((Real_GATE AND TG) NOT TGV)
INT X < 0.27 ABUT<90 REGION OPPOSITE
}

[question] Real Gate minimum channel length for 2.5V overdrive 3.3V NMOS transistors is 0.55
[answer] GT_1d {
@ Real Gate minimum channel length for 2.5V overdrive 3.3V NMOS transistors is 0.55
X = GT COIN EDGE ((Real_NGATE AND TG) AND OVERDR)
INT X < 0.55 ABUT<90 REGION OPPOSITE
}
[question] V7 enclosure by BORDER min. is 0.36
[answer] BORDER_2_V7 {
@ V7 enclosure by BORDER min. is 0.36
ENC V7i BD_WITHHOLE < 0.36 ABUT<90 SINGULAR REGION
}

[question] DNW minimum enclosure by chip edge(BORDER layer) is 0.8
[answer] BORDER_3 {
@ DNW minimum enclosure by chip edge(BORDER layer) is 0.8
ENC DNW BD_WITHHOLE < 0.8 ABUT<90 SINGULAR REGION
}

[question] All designs should place a BORDER at the most outermost edge with straight lines from chip corner area to corner area.
[answer] BORDER_4{
@ All designs should place a BORDER at the most outermost edge with straight lines from chip corner area to corner area.
BD_WITHHOLE NOT ( RECTANGLE (BD_WITHHOLE OR CORN))
}

[question] All designs should place a BORDER at the most outermost edge with straight lines from chip corner area to corner area.
[answer] BORDER_4{
@ All designs should place a BORDER at the most outermost edge with straight lines from chip corner area to corner area.
BD_WITHHOLE NOT ( RECTANGLE BD_WITHHOLE )
}

[question]AA for transistor minimum space if one of AA width(W2) >= 0.14um, and AA to AA overlap(run length),which along S/D direction Y1>=0.14, S >= 0.1.
[answer]AA_4b {
@ AA for transistor minimum space if one of AA width(W2) >= 0.14um, and AA to AA overlap(run length)
@ which along S/D direction Y1>=0.14, S >= 0.1
  AA_INGT=AA INTERACT GATE
  AA12 = AA_INGT WITH WIDTH >= 0.14
  AA_TCHGTX1 =AA_INGT TOUCH EDGE GATE
  AA_TCHGTX2 =AA12 TOUCH EDGE GATE 
  AA_TCHGTY1= EXPAND EDGE AA_TCHGTX1 OUTSIDE BY 0.001
  AA_TCHGTY2= EXPAND EDGE AA_TCHGTX2 OUTSIDE BY 0.001
  AA_edge1 = LENGTH AA_INGT > 0
  AA_edge11 = EXPAND EDGE AA_edge1 OUTSIDE BY 0.001
  AA_edgeZ1 = AA_edge11 NOT AA_TCHGTY1
  AA_edgeZ2 = AA_edge11 NOT AA_TCHGTY2
  AAspace = EXT AA_edgeZ1 AA_edgeZ2 < 0.098 OPPOSITE REGION
 ((AAspace OUTSIDE INST) WITH EDGE (LENGTH (AAspace NOT INSIDE INST) >= 0.14)) NOT AA_INGT
}

[question] The space between two AA with gate along source/drain direction is >=0.1, if one of AA width (W2) >= 0.14m, and AA to AA run length Y1>=0.14um. The space between two AA with gate along gate poly direction is >=0.1, if one of AA width (W3)>=0.14m, and AA to AA run length Y2 >=0.14um.
[answer] AA_4b_4c {
@ The space between two AA with gate along source/drain direction is >=0.1 , if one of AA width (W2) >= 0.14m, and AA to AA run length Y1>=0.14um
@ The space between two AA with gate along gate poly direction is >=0.1, if one of AA width (W3)>=0.14m, and AA to AA run length Y2 >=0.14um
AA_INGT=AA INTERACT GATE
AA12 = AA_INGT WITH WIDTH >= 0.14
AAspace = EXT AA_INGT AA12 < 0.1 OPPOSITE REGION
AAspace_waive = AAspace COIN EDGE (AA_INGT TOUCH EDGE GATE)
WAIVE = (AAspace WITH EDGE AAspace_waive) NOT OUTSIDE INST
(AAspace NOT WAIVE) WITH EDGE (LENGTH AAspace >= 0.14)
}

[question] Space between two AAs inside (DG OR TG) is 0.13
[answer] AA_4d{
@ Space between two AAs inside (DG OR TG) is 0.13
EXT (AA INSIDE (DG OR TG))<0.13 ABUT<90 SINGULAR REGION
}


[question] Space between (AA or AADUM) is <= 10, and DRC check maximum STI width. DRC doesn't check the chip corner DUMBA region if a seal ring is added by SMIC.
[answer] AA_4e_R_ON {
@ Space between (AA or AADUM) is <= 10
@ DRC check maximum STI width.
@ DRC dont check: chip corner DUMBA region as defined in rule CORN.2 if seal ring is added by SMIC.
CORN_DUMBA = DUMBA INTERACT CORN
X = DRC:1 NOT CORN_DUMBA
AA_all = AAi OR AADUM
(WITH WIDTH (X NOT AA_all) > 10) NOT MARKS
}

[question] AA area when AA all of edge length < 0.21 m is >= 0.055um. This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
[answer] AA_9b {
@ AA area when AA all of edge length < 0.21 m is >= 0.055um.
@ This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
AA_ignore = AA_all WITH EDGE (length AA_all >= 0.21)
(AREA (AA_all NOT AA_ignore) < 0.055) NOT SRAM
}

[question] Enclosed area when AA all of inner edge length < 0.21 m is >= 0.077um2. This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
[answer] AA_13a_R_OFF {
@ Enclosed area when AA all of inner edge length < 0.21 m is >= 0.077um2.
@ This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
AA_ignore = AA_all WITH EDGE (LENGTH (AA_all TOUCH EDGE (HOLES AA_all INNER)) >= 0.21)
X = (HOLES (AA_all NOT AA_ignore) INNER) NOT AA_all
(AREA X < 0.077) NOT SRAM
}

[question] For area excluding (DG or TG), Minimum AA density (including dummy) is 20%. Density check window size: 200um200um with step size: 100um. Waive RESNW, LOGO, seal ring(MARKS) areas. DRC check with the said window size and rule number and highlight as X. Y = X not (DG or TG), Z= (Y area)/(100100). If Z > 25%, highlight Y for AA density inside of Y that cannot meet the rule value requirement.
[answer] AA_14_a_density {
@ For area excluding (DG or TG), Minimum AA density (including dummy) is 20%. Density check window size: 200um200um with step size: 100um.
@ Waive RESNW, LOGO, seal ring(MARKS) areas
@ DRC check with the said window size and rule number and highlight as X. Y = X not (DG or TG), Z= (Y area)/(100100)
@ If Z > 25%, highlight Y for AA density inside of Y that cannot meet the rule value requirement.
DENSITY_MARK = ((BORDER NOT RESNW) NOT LOGO) NOT MARKS
CHECK_LAYER = (((AAi OR AADUM) NOT RESNW) NOT LOGO) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.20 WINDOW 200 STEP 100 BACKUP RDB density_report_AA_14_a1.db
Y = X NOT (DG OR TG)
Z= COPY Y
M = DENSITY Y [area(Y)/(100*100)]>0.25 INSIDE OF LAYER Z RDB density_report_AA_14_a2.db
N = COPY M
W =DENSITY CHECK_LAYER M [area(CHECK_LAYER)/area(M)] < 0.20 INSIDE OF LAYER N BY POLYGON PRINT density_report_AA_14_a.log RDB density_report_AA_14_a.db
(( W NOT MARKS ) NOT RESNW) NOT LOGO
}
[question] For area excluding (DG or TG), Maximum AA density (including dummy) is 82%. Density check window size: 200um200um with step size: 100um. Waive RESNW, LOGO, seal ring(MARKS) areas. DRC check with the said window size and rule number and highlight as X. Y = X not (DG or TG), Z= (Y area)/(100100). If Z > 25%, highlight Y for AA density inside of Y that cannot meet the rule value requirement.
[answer] AA_14_b_density {
@ For area excluding (DG or TG), Maximum AA density (including dummy) is 82%. Density check window size: 200um200um with step size: 100um.
@ Waive RESNW, LOGO, seal ring(MARKS) areas
@ DRC check with the said window size and rule number and highlight as X. Y = X not (DG or TG), Z= (Y area)/(100100)
@ If Z > 25%, highlight Y for AA density inside of Y that cannot meet of rule value requirement.
DENSITY_MARK = ((BORDER NOT RESNW) NOT LOGO) NOT MARKS
CHECK_LAYER = (((AAi OR AADUM) NOT RESNW) NOT LOGO) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.82 WINDOW 200 STEP 100 BACKUP RDB density_report_AA_14_b1.db
Y = X NOT (DG OR TG)
Z= COPY Y
M = DENSITY Y [area(Y)/(100*100)]>0.25 INSIDE OF LAYER Z RDB density_report_AA_14_b2.db
N = COPY M
W =DENSITY CHECK_LAYER M [area(CHECK_LAYER)/area(M)]> 0.82 INSIDE OF LAYER N BY POLYGON PRINT density_report_AA_14_b.log RDB density_report_AA_14_b.db
(( W NOT MARKS ) NOT RESNW) NOT LOGO
}

[question] For area in of (DG or TG), Minimum AA density (including dummy) is 20%. Density check window size: 200um200um with step size 100um. DRC check with the said window size and rule number and highlight as X. Y = X and (DG or TG), Z= (Y area)/(100100) If Z > 25%, highlight Y for AA density inside of Y outside of rule value requirement.
[answer] AA_14a_a_density {
@ For area in of (DG or TG), Minimum AA density (including dummy) is 20%. Density check window size: 200um200um with step size 100um
@ DRC check with the said window size and rule number and highlight as X. Y = X and (DG or TG), Z= (Y area)/(100100) If Z > 25%,
@ highlight Y for AA density inside of Y outside of rule value requirement
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = (AAi OR AADUM) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.20 WINDOW 200 STEP 100 BACKUP RDB density_report_AA_14a_a1.db
Y = X AND (DG OR TG)
Z= COPY Y
M = DENSITY Y [area(Y)/(100*100)]>0.25 INSIDE OF LAYER Z RDB density_report_AA_14a_a2.db
N = COPY M
W =DENSITY CHECK_LAYER M [area(CHECK_LAYER)/area(M)] < 0.20 INSIDE OF LAYER N BY POLYGON PRINT density_report_AA_14a_a.log RDB density_report_AA_14a_a.db
W NOT MARKS
}
[question] For area in of (DG or TG), Maximum AA density (including dummy) is 90%. Density check window size: 200um200um, step size: 100um. DRC check with the said window size and rule number and highlight as X. Y = X and (DG or TG). Highlight AA density inside of Y outside of the rule value requirement.
[answer] AA_14a_b_density {
@ For area in of (DG or TG), Maximum AA density (including dummy) is 90%. Density check window size: 200um200um, step size: 100um.
@ DRC check with the said window size and rule number and highlight as X. Y = X and (DG or TG) Highlight AA density inside of Y outside of rule value requires
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = (AAi OR AADUM) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.9 WINDOW 200 STEP 100 BACKUP RDB density_report_AA_14a_b1.db
Y = X AND (DG OR TG)
Z= COPY Y
M = DENSITY Y [area(Y)/(100*100)]>0.25 INSIDE OF LAYER Z RDB density_report_AA_14a_b2.db
N = COPY M
W = DENSITY CHECK_LAYER M [area(CHECK_LAYER)/area(M)] >0.9 INSIDE OF LAYER N BY POLYGON PRINT density_report_AA_14a_b.log RDB density_report_AA_14a_b.db
W NOT MARKS
}

[question] AA must be fully covered by (SN OR SP). Waive the violations in AA INTERACT RESNW,LOGO,OCOVL region.
[answer] AA_19 {
@ AA must be fully covered by (SN OR SP).
@ Waive the violations in AA INTERACT RESNW,LOGO,OCOVL region
(AA NOT INSIDE (SN OR SP)) NOT (((AA INTERACT RESNW) OR LOGO) OR OCOVL)
}

[question] The minimum separation between resistors with un-related implant region is 0.16. Un-related implant region: NW, LVT, HVT, SN, SP, ESD1. These regions don't interact with resistors.
[answer] RESAA_7 {
@ The minimum separation between resistors with un-related implant region is 0.16.
@ Un-related implant region: NW, LVT, HVT, SN, SP, ESD1. These regions don?t interact with resistors.
EXT AAR (SN NOT INTERACT AAR) < 0.16 ABUT<90 SINGULAR REGION
EXT AAR (SP NOT INTERACT AAR) < 0.16 ABUT<90 SINGULAR REGION
EXT AAR (ESD1 NOT INTERACT AAR) < 0.16 ABUT<90 SINGULAR REGION
EXT AAR (NW NOT INTERACT AAR) < 0.16 ABUT<90 SINGULAR REGION
EXT AAR (LVT NOT INTERACT AAR) < 0.16 ABUT<90 SINGULAR REGION
EXT AAR (HVT NOT INTERACT AAR) < 0.16 ABUT<90 SINGULAR REGION
}

[question] Minimum space between real gate and minimum 5050um LDA is 20. Waive if the gate channel length >= 0.06um.
[answer] AA_C_5_R_OFF {
@ Minimum space between real gate and minimum 5050um LDA is 20
@ Waive if the gate channel length >= 0.06um
X = LDA WITH WIDTH >= 50
Y = SIZE X BY 20
Z =LENGTH ( AA COIN EDGE Real_GATE)<0.06
((Real_GATE WITH EDGE Z) NOT X) AND Y
}


[question] The minimum separation between AA resistors and un-related implant region is 0.16. Un-related implant region: NW, LVT, HVT, SN, SP, ESD1. These regions don't interact with resistors.
[answer] DIFRES_7{
@The minimum separation between AA resistors and un-related implant region is 0.16.
@ Un-related implant region: NW, LVT, HVT, SN, SP, ESD1. These regions don?t interact with resistors.
EXT AAD (SN NOT INTERACT AAD) < 0.16 ABUT<90 SINGULAR REGION
EXT AAD (SP NOT INTERACT AAD) < 0.16 ABUT<90 SINGULAR REGION
EXT AAD (ESD1 NOT INTERACT AAD) < 0.16 ABUT<90 SINGULAR REGION
EXT AAD (NW NOT INTERACT AAD) < 0.16 ABUT<90 SINGULAR REGION
EXT AAD (LVT NOT INTERACT AAD) < 0.16 ABUT<90 SINGULAR REGION
EXT AAD (HVT NOT INTERACT AAD) < 0.16 ABUT<90 SINGULAR REGION
}

[question] Space between (NW hole INSIDE DNW) and ((NW hole INSIDE DNW) INTERACT (DG OR TG)) or ((PW NOT DNW) INTERACT (DG OR TG)) at different nets is >= 0.6um. DRC doesn't check LDBK region.
[answer] DNW_8b {
@ Space between (NW hole INSIDE DNW) and ((NW hole INSIDE DNW) INTERACT (DG OR TG)) or ((PW NOT DNW) INTERACT (DG OR TG)) at different nets is >= 0.6um.
@ DRC doesn?t check LDBK region.
X = (HOLES NW) INSIDE DNW
Y1 = PW COIN EDGE X
Y2 = PW COIN EDGE (X INTERACT DGTG)
Z = (PW NOT DNW) INTERACT DGTG

OUT1 = (EXT Y1 Y2 < 0.6 ABUT < 90 REGION NOT CONNECTED) NOT LDBK
OUT1 NOT MARKS

OUT2 = (EXT Y1 Z < 0.6 ABUT < 90 REGION NOT CONNECTED) NOT LDBK
OUT2 NOT MARKS
}


[question] N+AA adjacent both two edges space opposite to NW is >=0.16. Both of two adjacent edges space to NW smaller than rule value is not permitted.In schematic rule check method, E = 0.08, D=0.16.
[answer] NW_11_R_ON {
@ N+AA adjacent both two edges space opposite to NW is >=0.16. Both of two adjacent edges space to NW smaller than rule value is not permitted.
@ In schematic rule check method, E = 0.08, D=0.16
NACT_EDGE = LENGTH NACT >0
Eregion = EXPAND EDGE NACT_EDGE INSIDE BY 0.08 EXTEND BY 0.001
Eregion_EDGE = NACT INSIDE EDGE Eregion
Eregion_=EXT [Eregion_EDGE] NW <0.16 OPPOSITE PERP ALSO OBTUSE ALSO
Eregion_EDGE_1 = Eregion_EDGE TOUCH EDGE Eregion_
INT Eregion_EDGE_1 <0.002 ABUT REGION
}

[question] NW enclosure opposite of P+AA adjacent both two edges is >= 0.16. Both of two adjacent edges enclosed by NW smaller than rule value is not permitted.In schematic rule check method, E = 0.08, D=0.16.This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
[answer] NW_12_R_ON {
@ NW enclosure opposite of P+AA adjacent both two edges is >= 0.16. Both of two adjacent edges enclosed by NW smaller than rule value is not permitted.
@ In schematic rule check method, E = 0.08, D=0.16.
@ This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
PACT_EDGE = LENGTH PACT >0
Eregion = EXPAND EDGE PACT_EDGE INSIDE BY 0.08 EXTEND BY 0.001
Eregion_EDGE = PACT INSIDE EDGE Eregion
Eregion_=ENC [Eregion_EDGE] NW <0.16 OPPOSITE PERP ALSO OBTUSE ALSO
Eregion_EDGE_1 = Eregion_EDGE TOUCH EDGE Eregion_
ERROR = INT Eregion_EDGE_1 <0.002 ABUT REGION
ERROR OUTSIDE SRAM
}

[question] Minimum space between NW and N+AA inside PW is 0.04. Minimum space between NW outer vertex and N+AA inside PW outer vertex is 0.037
[answer] SRNW_14 {
@ Minimum space between NW and N+AA inside PW is 0.04
@ Minimum space between NW outer vertex and N+AA inside PW outer vertex is 0.037
(EXT NACT NW < 0.04 ABUT<90 OPPOSITE REGION) NOT OUTSIDE INST
(EXT NACT NW < 0.037 ABUT<90 CORNER TO CORNER SINGULAR REGION) NOT OUTSIDE INST
}

[question] For parallel long NW (length > 50m), must make NW width larger than 0.89m or NW to NW space larger than 0.89m.If this area pass AA density DRC check, this rule can be waived.This rule is not applied for (((DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
[answer] NW_17_R_OFF {
@ For parallel long NW (length > 50m), must make NW width larger than 0.89m or NW to NW space larger than 0.89m.
@ If this area pass AA density DRC check, this rule can be waived.
@ This rule is not applied for (((DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
X1 = EXT NW < 0.89 OPPOSITE REGION PARA ONLY
X2 = LENGTH X1 > 50
X3 = EXPAND EDGE X2 OUTSIDE BY 0.89
X4 = X3 NOT INTERACT (X3 NOT NW)
X5 = INT X2 < 0.89 REGION
(X5 NOT INTERACT X4) NOT SRAM
}
[question] NW-Resistor width is >=1.2. NW-Resistor minimum length is >=10.
[answer] RESNWST_1_2 {
@ NW-Resistor width is >=1.2
@ NW-Resistor minimum length is >=10
INT (NWRSTI TOUCH EDGE AA) <10 ABUT<90 OPPOSITE REGION
NOT ENCLOSE RECTANGLE NWRSTI 1.2 10
}

[question] Space between RESNW to silicided AA area. S4 = 0.00.DRC check by (RESNW AND NW) touch AA edge with count 2.
[answer] RESNWST_6 {
@ Space between RESNW to silicided AA area. S4 = 0.00
@ DRC check by (RESNW AND NW) touch AA edge with count 2.
(RESNW AND NW) TOUCH AA < 2
}

[question] NW-Resistor minimum length (SMIC 2R)>=10. NW-Resistor width (SMIC 2R, 65nm rule 1.6um)>=1.2
[answer] RESNWAA_2_3{
@ NW-Resistor minimum length (SMIC 2R)>=10
@ NW-Resistor width (SMIC 2R, 65nm rule 1.6um)>=1.2
INT (RESNWAA TOUCH EDGE SN) <10 ABUT<90 OPPOSITE REGION
NOT ENCLOSE RECTANGLE RESNWAA 1.2 10
}

[question] RESNW must not overlap with other implant layers (except NW) in the NW-Resistor area.Other implant layers: LVT, HVT, SN, SP, ESD1. These layers don't interact with resistors.
[answer] RESNWAA_7{
@ RESNW must not overlap with other implant layers (except NW) in the NW-Resistor area.
@ Other implant layers: LVT, HVT, SN, SP, ESD1. These layers don?t interact with resistors.
RESNWAA AND SN
RESNWAA AND SP
RESNWAA AND ESD1
RESNWAA AND LVT
RESNWAA AND HVT
}

[question] 2.5V minimum gate length enclosed by PSUB(enclosed by TG) is 1.20. 2.5V overdrive 3.3V gate length enclosed by PSUB (enclosed by TG) is 1.20. 2.5V underdrive 1.8V gate length enclosure by PSUB( enclosed by TG) is 1.20
[answer] PSUB_3cde {
@ 2.5V minimum gate length enclosed by PSUB(enclosed by TG) is 1.20
@ 2.5V overdrive 3.3V gate length enclosed by PSUB (enclosed by TG)is 1.20
@ 2.5V underdrive 1.8V gate length enclosure by PSUB( enclosed by TG)is 1.20
X =( PBGT INSIDE EDGE (PBAA INTERACT TG)) COIN EDGE GATE
INT X < 1.20 ABUT<90 REGION
}

[question] Space between two PSUB regions is 0.33
[answer] PSUB_4 {
@ Space between two PSUB regions is 0.33
EXT PSUB < 0.33 ABUT<90 SINGULAR REGION
}
[question] AA enclosure by PSUB is min 0.20, max 0.26, inductor does not need to follow. Note7: it is recommended that PSUB should be conformal to AA edge
[answer] PSUB_5 {
@ AA enclosure by PSUB is min 0.20, max 0.26, inductor does not need to follow.
@ Note7: it is recommended that PSUB should be conformal to AA edge
X1 = SIZE PBAA BY 0.20
X2 = SIZE PBAA BY 0.26
X3 = X2 NOT X1
Y = (PSUB INTERACT PBAA) NOT INDMY
OUTSIDE EDGE Y X3
}

[question] Only one AA region is allowed to exist in one PSUB region except for the NMOS capacitor, INDMY and pickup region.
[answer] PSUB_12 {
@ Only one AA region is allowed to exist in one PSUB region
@ except for the NMOS capacitor, INDMY and pickup region.
(PSUB NOT INTERACT INDMY) INTERACT ((AA NOT TAP) NOT INTERACT CAPBP) > 1
}

[question] It's not allowed (SP AND GATE) in PSUB. DRC doesn't check INDMY region.
[answer] PSUB_16_R_ON {
@ It's not allowed (SP AND GATE) in PSUB.
@ DRC doesn?t check INDMY region.
(PGATE AND PSUB) NOT INDMY
}


[question] Minimum space between TG and AA with device is 0.19, Prohibit overlap of TG and other voltage AA with transistor
[answer] TG_5 {
@ Minimum space between TG and AA with device is 0.19
@ Prohibit overlap of TG and other voltage AA with transistor
X_MOS = AA INTERACT (GT INTERACT GATE)
X_RES = AA INTERACT (DIFRES OR RESAA)
X_DIO1 = AA INTERACT (SIZE (DSTR NOT INTERACT PSUB) BY 0.3)
X_DIO2 = AA INTERACT (SIZE (DSTR INTERACT PSUB) BY 0.4)
X_NPN_PNP = AA INTERACT DMPNP
X_ALL = (((X_MOS OR X_RES) OR (X_DIO1 OR X_DIO2)) OR X_NPN_PNP) NOT INST
X =(AA AND ((SN AND NW) OR (SP NOT NW))) NOT VARMOS
EXT TG (X_ALL NOT X) < 0.19 ABUT<90 SINGULAR REGION
(X_MOS CUT TG) AND TG
}

[question] (((DG OR TG) OR NW) OR PSUB) opposite width is >= 0.33um. This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) connected region.
[answer] TG_16 {
@ (((DG OR TG) OR NW) OR PSUB) opposite width is >= 0.33um.
@ This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) connected region.
(INT (OR DG TG NW PSUB) < 0.33 ABUT<90 OPPOSITE SINGULAR REGION) OUTSIDE SRAM
}

[question] (((DG OR TG) OR NW) OR PSUB) width for (((DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) connected area is >= 0.27um.
[answer] TG_16a {
@ (((DG OR TG) OR NW) OR PSUB) width for (((DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) connected area is >= 0.27um.
(INT (OR DG TG NW PSUB) < 0.27 ABUT<90 SINGULAR REGION) NOT OUTSIDE SRAM
}


[question] Space between (DG OR TG) and NW when the run length > 0 is >= 0.33um. Space= 0um is allowed.DRC waive:a.the violated region not interact with AA region.b.The violated region interacts with AA, but the AA is pickup AA.
[answer] TG_17 {
@ Space between (DG OR TG) and NW when the run length > 0 is >= 0.33um. Space= 0um is allowed.
@ DRC waive:
@ a.the violated region not interact with AA region.
@ b.The violated region interacts with AA, but the AA is pickup AA.
(EXT DG (NW NOT COIN EDGE DG) < 0.33 ABUT<90 OPPOSITE REGION) INTERACT (AA NOT TAP)
(EXT TG (NW NOT COIN EDGE TG) < 0.33 ABUT<90 OPPOSITE REGION) INTERACT (AA NOT TAP)
}

[question] Minimum space between DG and AA with device is 0.19. Prohibit overlap of DG and other voltage AA with transistor.
[answer] DG_5 {
@ Minimum space between DG and AA with device is 0.19
@ Prohibit overlap of DG and other voltage AA with transistor
X_MOS = AA INTERACT (GT INTERACT GATE)
X_RES = AA INTERACT (DIFRES OR RESAA)
X_DIO1 = AA INTERACT (SIZE (DSTR NOT INTERACT PSUB) BY 0.3)
X_DIO2 = AA INTERACT (SIZE (DSTR INTERACT PSUB) BY 0.4)
X_NPN_PNP = AA INTERACT DMPNP
X_ALL = (((X_MOS OR X_RES) OR (X_DIO1 OR X_DIO2)) OR X_NPN_PNP) NOT INST
X =(AA AND ((SN AND NW) OR (SP NOT NW))) NOT VARMOS
EXT DG (X_ALL NOT X )< 0.19 ABUT<90 SINGULAR REGION
(X_MOS CUT DG) AND DG
}

[question] Chamfer area size at the chip corner is 74. The chip edge is defined to be the maximum boundary of all chip layers. All layers include BORDER(127;0) should not interact with area A in the figure. This rule is applicable for chips gds. Note 1. The DRC executes this section rule check on following layers: AA, GT, CT, SP, SAB, CT, Vn n=1-7, Mn n=1-8, MnDUM n=1-8, TV1, TV2, TM1, TM2, BORDER. Note 2. This rule section only applies for those chips that need to have chip level. The chip corner rule check option is default turned on in DRC script. Note.3. In case for the building block level design, or the IP gds, please turn off the chip corner rule check option.
[answer] CORN_1 {
@ Chamfer area size at the chip corner is 74. The chip edge is defined to be the maximum boundary of all chip layers.
@ All layers include BORDER(127;0) should not interact with area A in the figure. This rule is applicable for chips gds
@ Note 1. The DRC executes this section rule check on following layers: AA, GT, CT, SP, SAB, CT, Vn n=1-7, Mn n=1-8, MnDUM n=1-8, TV1, TV2, TM1, TM2, BORDER.
@ Note 2. This rule section only applies for those chips that need to have chip level. The chip corner rule check option is default turned on in DRC script.
@ Note.3. In case for the building block level design, or the IP gds, please turn off the chip corner rule check option.
CORN AND AAi
CORN AND GTi
CORN AND CTi
CORN AND SPi
CORN AND SABi
CORN AND V1i
CORN AND V2i
CORN AND V3i
CORN AND V4i
CORN AND V5i
CORN AND V6i
CORN AND V7i
CORN AND M1i
CORN AND M2i
CORN AND M3i
CORN AND M4i
CORN AND M5i
CORN AND M6i
CORN AND M7i
CORN AND M8i
CORN AND M1DUM
CORN AND M2DUM
CORN AND M3DUM
CORN AND M4DUM
CORN AND M5DUM
CORN AND M6DUM
CORN AND M7DUM
CORN AND M8DUM
CORN AND TV2i
CORN AND TM2i
CORN AND MTT2i
CORN AND BORDER
}

[question] For the chips that need SMIC mask shop insert dummy and seal ring, the corner area A (see this section figure) should be covered with (DUMBA, DUMBP, DUMBM).
[answer] CORN_2 {
@ For the chips needs SMIC mask shop insert dummy and seal ring, the corner area A(see this section figure) should be covered with (DUMBA, DUMBP, DUMBM).
CORN NOT (( DUMBA OR DUMBP) OR DUMBM)
}

[question] Designer needs to add BORDER (CHIPEDGE) to define chip boundary and have all chip layout patterns inside BORDER, except DUMBA, DUMBP, DUMBM in the corner as defined in rule CORN.2.
[answer] BORDER_1 {
@ Designer need to add BORDER (CHIPEDGE) to define chip boundary and have all chip layout patterns inside BORDER.
@ except DUMBA, DUMBP, DUMBM in corner as defined in rule CORN.2.
(DRC:1 NOT BD_WITHHOLE) NOT ((OR DUMBA DUMBP DUMBM) INTERACT CORN)
}

[question] Real Gate minimum channel length for 0.9/1.1/1.2V N/P MOS transistors (std, high, or low VT) is 0.04. SRGT_1, Gate minimum length is 0.04.
[answer] GT_1a {
@ Real Gate minimum channel length for 0.9/1.1/1.2V N/P MOS transistors (std, high, or low VT) is 0.04
@ SRGT_1, Gate minimum length is 0.04
X = (GT IN EDGE (AA NOT (DG OR TG))) COIN EDGE Real_GATE
INT X < 0.04 ABUT<90 REGION OPPOSITE
}


[question] Real Gate minimum channel length for 2.5V overdrive 3.3V PMOS transistors is 0.44.
[answer] GT_1e {
@ Real Gate minimum channel length for 2.5V overdrive 3.3V PMOS transistors is 0.44
X = GT COIN EDGE ((Real_PGATE AND TG) AND OVERDR)
INT X < 0.44 ABUT<90 REGION OPPOSITE
}

[question] Real Gate minimum channel length for 2.5V underdrive 1.8V NMOS transistors is 0.24. Real Gate minimum channel length for 2.5V underdrive 1.8V PMOS transistors is 0.24.
[answer] GT_1fg {
@ Real Gate minimum channel length for 2.5V underdrive 1.8V NMOS transistors is 0.24
@ Real Gate minimum channel length for 2.5V underdrive 1.8V PMOS transistors is 0.24
X = GT COIN EDGE ((Real_GATE AND TG) AND TGV)
INT X < 0.24 ABUT<90 REGION OPPOSITE
}

[question] Real Gate channel length for 1.8V underdrive 1.5V N/P MOS transistors is 0.125.
[answer] GT_1h{
@ Real Gate channel length for 1.8V underdrive 1.5V N/P MOS transistors 0.125
X = GT COIN EDGE ((Real_GATE AND DG) AND DGV)
INT X < 0.125 ABUT<90 REGION OPPOSITE
}

[question] Poly minimum width is 0.04.
[answer] GT_2a {
@ Poly minimum width is 0.04
INT GT_all < 0.04 ABUT<90 SINGULAR REGION
}

[question] Non-floating poly outside of (extend AA W>= 2.5um) region minimum width is 0.06. This rule is not applicable for GT interacting with EFUSE(81;2).
[answer] GT_2b_R_OFF {
@ Non-floating poly outside of (extend AA W>= 2.5um) region minimum width is 0.06, This rule is not applicable for GT interacting with EFUSE(81;2).
AAregion = SIZE AA BY 2.5
GTout = (GT NOT FTGT) NOT AAregion
err = (INT (GTout NOT COIN EDGE AAregion) < 0.06 ABUT<90 REGION) NOT EFUSE
err NOT (GT WITH WIDTH >0.06)
}


[question] Space between two poly is 0.1.
[answer] GT_3 {
@ Space between two poly is 0.1
EXT (GT_all OUTSIDE INST)< 0.10 SINGULAR REGION
}

[question] GT to GT space if one GT's width > 0.12um is >=0.14, parallel run length of the two GT > 0.14um.
[answer] GT_3c{
@ GT to GT space if one GT's width > 0.12um is >=0.14, parallel run length of the two GT > 0.14um
X = GT_all WITH WIDTH > 0.12
Y = EXT X GT_all < 0.14 REGION OPPOSITE
Y1 = EXT X [GT_all] < 0.14 OPPOSITE
Z = LENGTH Y1 >0.14
Y WITH EDGE Z
}

[question] Space between two GATEs when L-shape AA and L-shape poly enclosed area < 0.011 m2 is >= 0.105um.
[answer] GT_3d {
@ Space between two GATEs when L-shape AA and L-shape poly enclosed area < 0.011 m2 is >= 0.105um.
AA_corner = EXT AA < 0.001 ABUT == 90 INTERSECTING ONLY REGION
GT_corner = EXT GT < 0.001 ABUT == 90 INTERSECTING ONLY REGION
AA_GT_corner = EXT AA GT < 0.001 ABUT == 90 INTERSECTING ONLY REGION
Check_region_1 = HOLES (AA OR GT) INNER
Check_region_2 = (((RECTANGLE CHeck_region_1) INTERACT AA_GT_corner == 2) INTERACT AA_corner == 1) INTERACT GT_corner == 1
Check_region = AREA Check_region_2 < 0.011
Check_gate = GATE INTERACT (SIZE Check_region by 0.001)
EXT Check_gate < 0.105 ABUT<90 SINGULAR REGION
}


[question] Space between large GT and GATE when the channel length  0.08 m is >= 0.93um.The large GT definition:GT area ? 630 m2 and within regions of density > 70% in window 30 m x 30 m,stepping 15 m. Dummy poly doesn?t be included the density check.
[answer] GT_3e {
@ Space between large GT and GATE when the channel length ? 0.08 m. is >= 0.93um.
@ The large GT definition:GT area ? 630 m2 and within regions of density > 70% in window 30 m x 30 m,
@ stepping 15 m. Dummy poly doesn?t be included the density check.
Density_region = DENSITY GTi > 0.7 WINDOW 30 STEP 15
Large_GT = (AREA GT_all >= 630) INSIDE Density_region
GATE_check = GATE WITH EDGE (LENGTH GATE_LE <= 0.08)
EXT Large_GT GATE_check < 0.93 ABUT<90 SINGULAR REGION
}

[question] Space between two poly on field is 0.07.
[answer] SRGT_3 {
@ Space between two poly on field is 0.07
X = (GT NOT AA) COIN EDGE GT
OUT1 = EXT X < 0.07 ABUT<90 REGION
OUT2 = EXT GT <= 0.001 ABUT<90 SINGULAR REGION
(OUT1 OR OUT2) NOT OUTSIDE INST
}

[question] Space between AA and poly on field oxide is 0.03.
[answer] GT_4 {
@ Space between AA and poly on field oxide is 0.03
X =EXT AA GT_all < 0.03 ABUT==0 SINGULAR REGION
X OUTSIDE INST
}


[question] Extension of AA outside of Real GATE is 0.06, excluding LDMOS and within the inductor area (layer INDMY).
[answer] GT_5 {
@ Extension of AA outside of Real GATE is 0.06, excluding LDMOS and within inductor area(layer INDMY)
ENC (Real_GATE NOT (LDBK OR INDMY)) ( AA OUTSIDE INST) < 0.06 ABUT>0<90 SINGULAR REGION
}

[question] Extension of AA outside of Real GATE is >= 0.07. Exclude gate within LDMOS region (layer: LDBK) and within inductor area (layer: INDMY).
[answer] GT_5a_R_OFF {
@ Extension of AA outside of Real GATE is >= 0.07.
@ Exclude gate within LDMOS region (layer: LDBK) and within inductor area (layer: INDMY).
ENC (Real_GATE NOT (LDBK OR INDMY)) ( AA OUTSIDE INST) < 0.07 ABUT>0<90 SINGULAR REGION
}

[question] Extension of AA outside of Real GATE is 0.045.
[answer] SRGT_5 {
@ Extension of AA outside of Real GATE is 0.045
X =ENC Real_GATE AA < 0.045 ABUT>0<90 SINGULAR REGION
X NOT OUTSIDE INST
}

[question] Extension of poly outside of AA to form a poly end-cap is 0.09. Waive within LDBK area.
[answer] GT_6 {
@ Extension of poly outside of AA to form poly end-cap is 0.09. Waive within LDBK area
err= ENC (AA COIN EDGE GATE) GT_head< 0.09 ABUT<90 REGION OPPOSITE
err1=err NOT WITH EDGE ((err NOT COIN EDGE GT) NOT COIN EDGE GATE)
((err1 INSIDE GT ) NOT (LDBK OR INDMY)) OUTSIDE INST
}


[question] Extension E of GT outside of AA to form a poly end-cap is 0.11. The GT to L shape AA (in the same MOS) space S < 0.1um. The L shape AA height h > 0.02um. This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
[answer] GT_6a_R_OFF {
@ Extension E of GT outside of AA to form poly end-cap is 0.11. The GT to L shape AA(in the same MOS) space S < 0.1um. The L shape AA height h > 0.02um.
@ This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
AA_L1 =CONVEX EDGE AA ANGLE1 == 270 ANGLE2 ==90 WITH LENGTH >0.02
AA_L = AA_L1 NOT COIN EDGE (AA TOUCH EDGE GATE)
S1 = CONVEX EDGE (AA OR GT) ANGLE1 == 270 ANGLE2 == 270 WITH LENGTH <0.1
S = S1 COIN EDGE AA
SL_CORNER=EXT S AA_L< 0.002 ABUT==90 INTERSECTING ONLY REGION
S_region =( EXPAND EDGE S INSIDE BY 0.001 EXTEND BY 0.001 ) INTERACT SL_CORNER
err =ENC (GATE TOUCH EDGE S_region) GT_head < 0.11 ABUT<90 REGION OPPOSITE
err1=err NOT WITH EDGE ((err NOT COIN EDGE GT) NOT COIN EDGE GATE)
(err1 INSIDE GT) OUTSIDE SRAM
}

[question] Extension of poly outside of AA to form poly end-cap is >= 0.1um. Exclude inside the inductor (layer: INDMY) and exclude inside LDMOS (layer: LDBK).
[answer] GT_6b_R_OFF {
@ Extension of poly outside of AA to form poly end-cap is >= 0.1um.
@ Exclude inside inductor (layer: INDMY) and exclude inside LDMOS (layer: LDBK).
X = ENC AA GT < 0.1 ABUT<90 SINGULAR REGION
X NOT INSIDE (INDMY OR LDBK)
}

[question] Extension of non-floating poly outside of AA to form a poly end-cap is 0.055, the area interacted with a rectangle contact need not follow this rule.
[answer] SRGT_6 {
@ Extension of non-floating poly outside of AA to form poly end-cap is 0.055
@ area interacted with rectangle contact need not follow this rule
X = ENC (AA COIN EDGE GATE) (GT NOT FTGT) < 0.055 ABUT<90 REGION
(X NOT INTERACT RECT) NOT OUTSIDE INST
}

[question] (poly_end with length < 0.120) minimum space to (poly_end with length < 0.120) (head to head space) with a run length > 0 must be 0.1.
[answer] GT_7 {
@ (poly_end with length < 0.120) minimum space to (poly_end with length < 0.120)
@ (head to head space) with run length > 0 must be is 0.1.
X = EXT GT_end_head < 0.1 ABUT<90 REGION OPPOSITE
X OUTSIDE INST
}

[question] (poly_end with length < 0.120) minimum space to (poly_end with length < 0.120), excluding floating poly (head to head space) must be > 0.07, The head to head with run length > 0.
[answer] SRGT_7 {
@ (poly_end with length < 0.120) minimum space to (poly_end with length < 0.120),excluding floating poly
@ (head to head space) must be > 0.07
@ The head to head with run length > 0.
POLY_end = CONVEX EDGE (GT NOT FTGT) ANGLE1 ==90 LENGTH1 >=0.08 ANGLE2 ==90 LENGTH2 >=0.08 WITH LENGTH < 0.12
(EXT POLY_end < 0.07 ABUT<90 REGION OPPOSITE) NOT OUTSIDE INST
}

[question] (poly_end with length < 0.120) minimum space to poly (head to side) must be > 0.1, This rule is not applicable for SRAM region check.
[answer] GT_8 {
@ (poly_end with length < 0.120) minimum space to poly (head to side) must be > 0.1 ,This rule is not applicable for SRAM region check.
X = EXT GT_end_head GT_nonend < 0.1 ABUT<90 REGION
X OUTSIDE INST
}

[question] Space between GT line end to line (Dh) or GT line to line (Ds) when the layout structures meet the conditions below:

GT line end definition: GT width W<0.065um
Runlength of GT line to line or GT line to end: E1>=-0.03um
Any one edge distance from the corner of the two edges: K1 <0.065um
Any one of Dh or Ds meet this rule value is ok.
This rule is not applicable for SRAM region check. 0.11
[answer] GT_8a{
@ Space between GT line end to line (Dh) or GT line to line (Ds) when the layout structures meet the conditions of below: (Waive the GT small extrusion F<0.04m)
@ 1. GT line end definition: GT width W<0.065um
@ 2. Runlength of GT line to line or GT line to end: E1>=-0.03um
@ 3. Any one edge distance from the corner of the two edges: K1 <0.065um
@ Any one of Dh or Ds meet this rule value is ok.
@ This rule is not applicable for SRAM region check. 0.11
LINE_END = CONVEX EDGE GT_all ANGLE1 ==90 LENGTH1 >=0.04 ANGLE2 ==90 LENGTH2 >=0.04 WITH LENGTH < 0.065
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.034
LINE_SIDE = (GT_all COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_END_EXP = EXPAND EDGE LINE_END INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001 EXTEND BY 0.031
LINE_END_1 = LINE_END_EXP TOUCH EDGE LINE_END
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] GT_all < 0.11 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] GT_all < 0.11 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
GT_CORNER = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
(LINE_END_SHAPE INTERACT GT_CORNER) OUTSIDE INST
}
[question] (poly_end with length < 0.120) minimum space to poly (head to side) must be > 0.072, excluding floating poly
[answer] SRGT_8 {
@ (poly_end with length < 0.120) minimum space to poly (head to side) must be > 0.072,excluding floating poly
X = GT AND AA
GT_nonend = GT NOT COIN EDGE GT_end_head1
GT_end = ENC AA GT < 0.12 OPPOSITE REGION
GT_end_head = GT_end COIN EDGE ((GT INTERACT X) NOT TOUCH EDGE X)
GT_end_head1 = (GT INTERACT X) NOT TOUCH EDGE X
Y = EXT GT_end_head GT_nonend < 0.072 ABUT<90 REGION
(Y NOT OUTSIDE INST) NOT INTERACT FTGT
}

[question] Space between AA and non-floating poly on field oxide is 0.01.
[answer] SRGT_4 {
@ Space between AA and non-floating poly on field oxide is 0.01
X = EXT AA (GT NOT (FTGT OR INDMY)) < 0.01 ABUT<90 SINGULAR REGION
X NOT OUTSIDE INST
}

[question] Space between GT line end to line (Dh) or GT line to line (Ds) when the layout structures meet the conditions below:1.GT line end definition: GT width W<0.065um.2.Runlength of GT line to line or GT line to end: E1>=-0.03um.3.Any one edge distance from the corner of the two edges: K1 <0.065um
Any one of Dh or Ds meet this rule value is ok.This rule is not applicable for SRAM region check. 0.11
[answer] GT_8a{
@ Space between GT line end to line (Dh) or GT line to line (Ds) when the layout structures meet the conditions of below: (Waive the GT small extrusion F<0.04m)
@ 1. GT line end definition: GT width W<0.065um
@ 2. Runlength of GT line to line or GT line to end: E1>=-0.03um
@ 3. Any one edge distance from the corner of the two edges: K1 <0.065um
@ Any one of Dh or Ds meet this rule value is ok.
@ This rule is not applicable for SRAM region check. 0.11
LINE_END = CONVEX EDGE GT_all ANGLE1 ==90 LENGTH1 >=0.04 ANGLE2 ==90 LENGTH2 >=0.04 WITH LENGTH < 0.065
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.034
LINE_SIDE = (GT_all COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_END_EXP = EXPAND EDGE LINE_END INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001 EXTEND BY 0.031
LINE_END_1 = LINE_END_EXP TOUCH EDGE LINE_END
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] GT_all < 0.11 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] GT_all < 0.11 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
GT_CORNER = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
(LINE_END_SHAPE INTERACT GT_CORNER) OUTSIDE INST
}
[question] (poly_end with length < 0.120) minimum space to poly (head to side) must be > 0.072, excluding floating poly
[answer] SRGT_8 {
@ (poly_end with length < 0.120) minimum space to poly (head to side) must be > 0.072,excluding floating poly
X = GT AND AA
GT_nonend = GT NOT COIN EDGE GT_end_head1
GT_end = ENC AA GT < 0.12 OPPOSITE REGION
GT_end_head = GT_end COIN EDGE ((GT INTERACT X) NOT TOUCH EDGE X)
GT_end_head1 = (GT INTERACT X) NOT TOUCH EDGE X
Y = EXT GT_end_head GT_nonend < 0.072 ABUT<90 REGION
(Y NOT OUTSIDE INST) NOT INTERACT FTGT
}


[question] For GT channel length < 0.06, the range of Real gate space to (GT or GTDUM) is 0.120.33. The (GT or GTDUM) parallel to Real gate for GT.9 covers channel width >= 67%.
[answer] GT_9 {
@ For GT channel length < 0.06, range of Real gate space to (GT or GTDUM) 0.120.33
@ The (GT or GTDUM) parallel to Real gate for GT.9 covers channel width >= 67% .
X0= (Real_GATE OUTSIDE INST) INSIDE EDGE ACT
X = INT X0 < 0.06 ABUT<90 OPPOSITE REGION
Y = EXT X (GT OR GTDUM) < 0.12 ABUT<90 OPPOSITE REGION
Z1 = EXPAND EDGE X0 OUTSIDE BY 0.331
Z2 = Z1 NOT Real_GATE
Z4 = EXT X (GT OR GTDUM) <= 0.33 ABUT<90 OPPOSITE REGION
Z5 = ((Z2 NOT INTERACT Z4) INTERACT X ) OR Y

B0 = Real_GATE INSIDE EDGE ACT
B1 = INT [B0] < 0.06 ABUT<90 OPPOSITE
B2 = EXT B1 (GT OR GTDUM) >= 0.12 <= 0.33 ABUT<90 OPPOSITE EXCLUDE SHIELDED 4
B3 = DFM PROPERTY B1 B2 OVERLAP ABUT ALSO MULTI SPLIT
[prop1 = EC(B2)/LENGTH(B1)] < 0.67
B4= EXPAND EDGE B3 OUTSIDE BY 0.1
((Z5 OR B4) OUTSIDE INST) OUTSIDE OTPMK1
}

[question] For GT channel length >= 0.06, the minimum Real gate space to (GT or GTDUM) is 0.13. PFET gate minimum space over AA is 0.13.
[answer] GT_10 {
@ For GT channel length >= 0.06, minimum Real gate space to (GT or GTDUM) is 0.13
@ PFET gate minimum space over AA is 0.13
X = LENGTH (ACT INSIDE EDGE (GT OUTSIDE INST))>=0.06
Y = Real_GATE WITH EDGE X
EXT Y (GT OR GTDUM) < 0.13 ABUT<90 OPPOSITE REGION
}


[question] For GT channel length >= 0.06, the minimum Real gate space to (GT or GTDUM) is 0.12.
[answer] SRGT_10 {
@ For GT channel length >= 0.06, minimum Real gate space to (GT or GTDUM) is 0.12
X = LENGTH (ACT INSIDE EDGE (GT NOT OUTSIDE INST))>=0.06
Y = Real_GATE WITH EDGE X
EXT Y (GT OR GTDUM ) < 0.12 ABUT<90 OPPOSITE REGION
}

[question] Poly minimum overlap past AA is 0.09 when poly to AA inner vertex distance < 0.060.
[answer] GT_13 {
@ poly minimum overlap past AA is 0.09, when poly to AA inner vertex distance < 0.060
gtextaa = ENC (AA NOT INSIDE INST) (GT NOT INSIDE INST) < 0.090 OPPOSITE REGION
gatespcaa = EXT (GATE NOT INSIDE INST) (AA NOT INSIDE INST) < 0.06 ABUT==90 PERP ONLY REGION
gtextaa WITH EDGE (gtextaa TOUCH EDGE gatespcaa)
}

[question] Poly minimum overlap past AA is 0.05 when poly to AA inner vertex distance < 0.060.
[answer] SRGT_13 {
@ poly minimum overlap past AA is 0.05, when poly to AA inner vertex distance < 0.060
gtextaa = ENC (AA AND INST) (GT AND INST) < 0.050 OPPOSITE REGION
gatespcaa = EXT (GATE AND INST) (AA AND INST) < 0.06 ABUT==90 PERP ONLY REGION
gtextaa WITH EDGE (gtextaa TOUCH EDGE gatespcaa)
}

[question] Poly maximum density (%) with 25um tiling within the whole GDS area is 70 (Max. density value).
[answer] GT_16 {
@ Poly maximum density(%) with 25um tiling within the whole GDS area is 70(Max. density value)
DENSITY (GTi OR GTDUM) > 0.70 WINDOW 25 STEP 12.5 BACKUP PRINT density_report_GT16.log
}


[question] Minimum area for GT is 0.012.
[answer] GT_17 {
@ minimum area is 0.012
AREA GT_all < 0.012
}

[question] GT area when GT all of edge length < 0.21 m is >= 0.055um2.
[answer] GT_17a_R_OFF {
@ GT area when GT all of edge length < 0.21 m is >= 0.055um2.
GT_ignore = GT_all WITH EDGE (length GT_all >= 0.21)
AREA (GT_all NOT GT_ignore) < 0.055
}

[question] Poly minimum enclosed area is 0.040.
[answer] GT_18 {
@ poly minimum enclosed area is 0.040
AREA ((HOLES GT_all INNER) NOT GT_all) < 0.040
}

[question] Enclosed area when AA all of inner edge length < 0.21 m is >= 0.077um2.
[answer] GT_18a_R_OFF {
@ Enclosed area when AA all of inner edge length < 0.21 m is >= 0.077um2.
GT_ignore = GT_all WITH EDGE (LENGTH (GT_all TOUCH EDGE (HOLES GT_all INNER)) >= 0.21)
X = (HOLES (GT_all NOT GT_ignore) INNER) NOT GT_all
AREA X < 0.077
}

[question] (GT AND AA) area GTAA. GTAA encloses a 200x200um area. Maximum area for GTAA (um2) is 50000.
[answer] GT_19 {
@ (GT AND AA) area GTAA. GTAA encloses a 200x200um area. Maximum area for GTAA (um2) is 50000
X = ENCLOSE RECTANGLE GATE 200 200
AREA X > 50000
}


[question] Poly min. density in the whole chip is 13%.
[answer] GT_20l_density {
@ Poly min. density in the whole chip is 13%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = (GTi OR GTDUM) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.13 PRINT density_report_GT20l.log RDB density_report_GT20l.db
X NOT MARKS
}

[question] Poly max. density in the whole chip is 40%.
[answer] GT_20h_density {
@ Poly max. density in the whole chip is 40%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = (GTi OR GTDUM) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.40 PRINT density_report_GT20h.log RDB density_report_GT20h.db
X NOT MARKS
}

[question] Poly min. density overlap by DUMBP is 13%, excluding OCCD, OCOVL region.
[answer] GT_20b_density {
@ Poly min. density overlap by DUMBP is 13%, Exclude OCCD,OCOVL region.
DENSITY_MARK = DUMBP NOT ((MARKS OR OCOVL) OR OCCD)
CHECK_LAYER = (GTi OR GTDUM) NOT ((MARKS OR OCOVL) OR OCCD)
CHECK_REGION = COPY DENSITY_MARK
Z = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.13 INSIDE OF LAYER DENSITY_MARK PRINT density_report_GT20b.log RDB density_report_GT20b.db
Z NOT ((MARKS OR OCOVL) OR OCCD)
}

[question] Poly max. density overlap by DUMBP is 40%.
[answer] GT_20bh {
@ Poly max. density overlap by DUMBP is 40%
X = GTi OR GTDUM
Y = COPY DUMBP
Z = DENSITY X DUMBP [area(X)/area(DUMBP)] > 0.4 INSIDE OF LAYER Y PRINT density_report_GT20bh.log RDB density_report_GT20bh.db
Z NOT MARKS
}


[question] Poly density (including dummy) excluding (DG or TG) is 10%, check window 100x100um with step 50um.
[answer] GT_20c {
@Poly density (including dummy) excluding (DG or TG)is 10%, check window 100x100m with step 50m.
@DRC check with the said window size and rule number and highlight as X. Y = X not (DG or TG) , Z= (Y area)/(100*100)
@If Z > 25%, highlight Y for GT density inside of Y smaller than rule value

X =DENSITY (GTi OR GTDUM) < 0.1 WINDOW 100 STEP 50 BACKUP RDB density_report_GT20c1.db
Y = X NOT (DG OR TG)
Z= COPY Y
M = DENSITY Y [area(Y)/(100*100)]>0.25 INSIDE OF LAYER Z RDB density_report_GT20c2.db
N = COPY M
W =DENSITY GTi_ALL M [area(GTi_ALL)/area(M)] < 0.1 INSIDE OF LAYER N BY POLYGON PRINT density_report_GT_20c.log RDB density_report_GT20c.db
W NOT MARKS
}

[question] Poly density (including dummy) in (DG or TG) is 5%, check window 100x100um with step 50um.
[answer] GT_20d {
@Poly density (including dummy) in (DG or TG)is 5%, check window 100x100m with step 50m.
@DRC check with the said window size and rule number and highlight as X. Y = X and (DG or TG) , Z= (Y area)/(100100)
@ If Z > 25%, highlight Y for GT density inside of Y smaller than rule value
X =DENSITY (GTi OR GTDUM) < 0.05 WINDOW 100 STEP 50 BACKUP PRINT density_report_GT.20d.log RDB density_report_GT20d1.db
Y = X AND (DG OR TG)
Z= COPY Y
M = DENSITY Y [area(Y)/(100100)]>0.25 INSIDE OF LAYER Z RDB density_report_GT20d2.db
N = COPY M
W =DENSITY GTi_ALL M [area(GTi_ALL)/area(M)] < 0.05 INSIDE OF LAYER N BY POLYGON PRINT density_report_GT_20d.log RDB density_report_GT20d.db
W NOT MARKS
}

[question] No bent Real GATE on AA are allowed. All Real gate patterns on AA have to be orthogonal to AA edge and SRGT_21.
[answer] GT_21 {
@ No bent Real GATE on AA are allowed
@ All Real gate patterns on AA have to be orthogonal to AA edge
@ and SRGT_21
GTEIAA1 = GTEIAA COIN EDGE Real_GATE
(INT GTEIAA1 < 0.01 ABUT == 90 REGION) NOT OCOVL
(EXT GTEIAA1 < 0.01 ABUT == 90 REGION) NOT OCOVL
(INT GTEIAA1 < 0.01 ABUT == 45 REGION) NOT OCOVL
(EXT GTEIAA1 < 0.01 ABUT == 45 REGION) NOT OCOVL
(INT GTEIAA1 < 0.01 ABUT == 135 REGION) NOT OCOVL
(EXT GTEIAA1 < 0.01 ABUT == 135 REGION) NOT OCOVL
AAEIGT1 = (IN EDGE AA GT) COIN EDGE Real_GATE
(INT GTEIAA1 AAEIGT1 < 0.01 ABUT!=90 REGION) NOT OCOVL
}


[question] GT must be enclosed by (SN or SP) except the MOM, GTFUSE and (HRP AND GT). Exclude floating GT.
[answer] GT_22 {
@ GT must be enclosed by (SN or SP) except the MOM, GTFUSE and (HRP AND GT). Exclude floating GT
X = (((GT NOT FTGT) NOT INTERACT (HRP AND GT)) NOT INTERACT (MOMDMY OR GTFUSE)) NOT (SN OR SP)
X NOT OCOVL
}
This rule is already covered by SP_SN_17.

[question] SN and SP overlap on gate over AA is not allowed.
[answer] GT_23 {
@ SN and SP overlap on gate over AA is not allowed
(GATE AND SN) AND SP
}

[question] L-shaped GT minimum space to AA is 0.04.
[answer] GT_24 {
@ L-shaped GT minimum space to AA is 0.04
LGT_ = U_edge_ TOUCH GTconer == 1
LGT = U_edge COIN EDGE LGT_
LENGTH LGT < 0.04
}

[question] If channel length < 0.2um, channel width <= 0.45um, and L-shape GT length (L >= 0.055um), space between L-shaped GT to AA in the same MOS is >= 0.05um. (Waive the violations in SRAM area).
[answer] GT_24b_R_OFF {
@ If channel length < 0.2um, channel width <= 0.45um, and L-shape GT length ( L >= 0.055um),
@ space between L-shaped GT to AA in the same MOS is >= 0.05um.
@ (Waive the violations in SRAM area)
GATE_check = (GATE WITH EDGE (LENGTH GATE_LE < 0.2)) WITH EDGE (LENGTH GATE_WE <= 0.45)
GT_AA = (GT OR AA) INTERACT GATE_check
GT_AA_L = CONVEX EDGE GT_AA ANGLE1 == 270 ANGLE2 == 270 WITH LENGTH < 0.05
GT_L = (GT_AA_L COIN EDGE GT) NOT COIN EDGE (CONVEX EDGE GT == 0)
X0 = EXPAND EDGE GT_L INSIDE BY 0.005
Y = EXT GT < 0.005 ABUT REGION
Z = GT TOUCH EDGE ((Y WITH EDGE GT_L) NOT COIN EDGE GT_L)
H = LENGTH Z >= 0.055
P = EXPAND EDGE H OUTSIDE BY 0.005
Q = Y INTERACT P
W = (X0 TOUCH GATE_check) INTERACT Q
W NOT SRAM
}


[question] If channel length < 0.2um, channel width> 0.45um, and L-shape GT length (L >= 0.055um), space between L-shaped GT to AA in the same MOS is >= 0.05um.
[answer] GT_24c_R_OFF {
@ If channel length < 0.2um, channel width> 0.45um, and L-shape GT length ( L >= 0.055um),
@ space between L-shaped GT to AA in the same MOS is >= 0.05um.
GATE_check = (GATE WITH EDGE (LENGTH GATE_LE < 0.2)) WITH EDGE (LENGTH GATE_WE > 0.45)
GT_AA = (GT OR AA) INTERACT GATE_check
GT_AA_L = CONVEX EDGE GT_AA ANGLE1 == 270 ANGLE2 == 270 WITH LENGTH < 0.05
GT_L = (GT_AA_L COIN EDGE GT) NOT COIN EDGE (CONVEX EDGE GT == 0)
X0 = EXPAND EDGE GT_L INSIDE BY 0.005
Y = EXT GT < 0.005 ABUT REGION
Z = GT TOUCH EDGE ((Y WITH EDGE GT_L) NOT COIN EDGE GT_L)
H = LENGTH Z >= 0.055
P = EXPAND EDGE H OUTSIDE BY 0.005
Q = Y INTERACT P
(X0 TOUCH GATE_check) INTERACT Q
}

[question] L-shape AA minimum space to poly (in the same transistor) is 0.03.
[answer] GT_25 {
@ L-shape AA minimum space to poly (in the same transistor) is 0.03
LAA_ = U_edge_ TOUCH AAconer == 1
LAA = U_edge COIN EDGE LAA_
X = LENGTH LAA < 0.03
X COIN EDGE (AA TOUCH EDGE GATE)
}

[question] If channel length < 0.2um, channel width <= 0.45um, space between L-shaped AA to GT in the same MOS is >= 0.05um. (Waive the violations in SRAM area).
[answer] GT_25b_R_OFF {
@ If channel length < 0.2um, channel width <= 0.45um,
@ space between L-shaped AA to GT in the same MOS is >= 0.05um.
@ (Waive the violations in SRAM area).
GATE_check = (GATE WITH EDGE (LENGTH GATE_LE < 0.2)) WITH EDGE (LENGTH GATE_WE <= 0.45)
GT_AA = (GT OR AA) INTERACT GATE_check
GT_AA_L = CONVEX EDGE GT_AA ANGLE1 == 270 ANGLE2 == 270 WITH LENGTH < 0.05
AA_L = (GT_AA_L COIN EDGE AA) NOT COIN EDGE ((CONVEX EDGE AA == 0) NOT TOUCH EDGE GATE)
X0 = EXPAND EDGE AA_L INSIDE BY 0.005
Y = EXT AA < 0.005 ABUT REGION
Z = AA TOUCH EDGE ((Y WITH EDGE AA_L) NOT COIN EDGE AA_L)
H = LENGTH Z > 0
P = EXPAND EDGE H OUTSIDE BY 0.005
Q = Y INTERACT P
W = (X0 TOUCH GATE_check) INTERACT Q
W NOT SRAM
}


[question] If channel length < 0.2um, channel width > 0.45um, space between L-shaped AA to GT in the same MOS is >= 0.05um.
[answer] GT_25c_R_OFF {
@ If channel length < 0.2um, channel width > 0.45um,
@ space between L-shaped AA to GT in the same MOS is >= 0.05um.
GATE_check = (GATE WITH EDGE (LENGTH GATE_LE < 0.2)) WITH EDGE (LENGTH GATE_WE > 0.45)
GT_AA = (GT OR AA) INTERACT GATE_check
GT_AA_L = CONVEX EDGE GT_AA ANGLE1 == 270 ANGLE2 == 270 WITH LENGTH < 0.05
AA_L = (GT_AA_L COIN EDGE AA) NOT COIN EDGE ((CONVEX EDGE AA == 0) NOT TOUCH EDGE GATE)
X0 = EXPAND EDGE AA_L INSIDE BY 0.005
Y = EXT AA < 0.005 ABUT REGION
Z = AA TOUCH EDGE ((Y WITH EDGE AA_L) NOT COIN EDGE AA_L)
H = LENGTH Z > 0
P = EXPAND EDGE H OUTSIDE BY 0.005
Q = Y INTERACT P
(X0 TOUCH GATE_check) INTERACT Q
}

[question] All memory cell transistor (transistors within INST layer), gate GT direction should be unidirectional in one chip.
[answer] GT_26 {
@ All memory cell transistor(transistors within INST layer),
@ gate GT direction should be unidirectional in one chip.
X = (((GT INTERACT CT) NOT OUTSIDE INST) INSIDE EDGE AA) COIN EDGE GATE
Y = ANGLE X != 90
EXPAND EDGE Y INSIDE BY 0.01
}

[question] Bent 45 deg GT min width is 0.16.
[answer] GT_27 {
@ Bent 45 deg GT min width is 0.16
X = ANGLE GT_all ==45
INT X <0.16 ABUT<90 REGION
}

[question] The space between GT to bent 45-degree GT is >= 0.16um. This rule is not applied for LOGO region.
[answer] GT_28 {
@ The space between GT to bent 45-degree GT is >= 0.16um.
@ This rule is not applied for LOGO region.
X = ANGLE GT_all ==45
(EXT GT_all X <0.16 ABUT<90 REGION SPACE) NOT LOGO
}


[question] The poly length between two CTs (the two CTs on the same poly), when the poly width <0.08um is <= 20um. This rule isnt applicable for ESDIO2, ESDHV region.
[answer] GT_29 {
@ The poly length between two CTs (the two CTs on the same poly), when the poly width <0.08um is <= 20um.
@ This rule isnt applicable for ESDIO2, ESDHV region.

GT_CHECK = (WITH WIDTH GT < 0.08) ENCLOSE CT > 0
X = SIZE CT BY 10 INSIDE OF GT_CHECK STEP 0.02
Y = GT_CHECK INTERACT X > 1
Y NOT (ESDIO2 OR ESDHV)
}

[question] The length from any point inside poly GATE to the nearest CT on GATE poly, when the poly width <0.08um is <= 65um. This rule isnt applicable for ESDIO2, ESDHV region.
[answer] GT_30 {
@ The length from any point inside poly GATE to the nearest CT on GATE poly, when the poly width <0.08um is <= 65um.
@ This rule isnt applicable for ESDIO2, ESDHV region.
X = GATE WITH EDGE (LENGTH GATE_LE < 0.08)
Y = (GT INTERACT X) INTERACT CT
Z0 = SIZE CT BY 65 INSIDE OF Y STEP 0.065
Z1 = (GATE INTERACT Y) NOT INSIDE Z0
Z1 NOT (ESDIO2 OR ESDHV)
}

[question] (AA or poly) local density is >= 0.05% (including dummy). Checked window size: 20 m x 20 m, stepping 10 m. Excluded: DUMBA/DUMBP/RESNW/LOGO/INDMY region. The rule is applied while the checked region width is >= 5um.
[answer] GT_31_density {
@ (AA or poly) local density is >= 0.05%(including dummy).
@ 1. Checked window size: 20 m x 20 m, stepping 10 m. Excluded: DUMBA/DUMBP/RESNW/LOGO/INDMY region.
@ 2. The rule is applied while the checked region width is >= 5um.
AA_OR_GT = AAi_all OR GTi_all
DENSITY_MARK = WITH WIDTH ((((((BORDER NOT DUMBA) NOT DUMBP) NOT RESNW) NOT LOGO) NOT INDMY) NOT MARKS) >= 5
CHECK_LAYER = AA_OR_GT AND DENSITY_MARK
CHECK_REGION = COPY DENSITY_MARK
DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.0005 WINDOW 20 STEP 10 BACKUP PRINT density_report_GT_31.log RDB density_report_GT_31.db
}


[question] Poly interacting AA must separate at least two AA diffusions (exclude dummy patterns). DRC doesn't check:(DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM), LDBK, LOGO, and INDMY covered region,When AA or poly does not interact with CT.
[answer] GT_32_R_OFF {
@ Poly interacting AA must separate at least two AA diffusions(exclude dummy pattern).
@ DRC doesn't check:
@ 1.(DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM), LDBK, LOGO and INDMY covered region.
@ 2.When AA or poly not interact with CT.
ERR = ((GT INTERACT CT) AND (AA INTERACT CT)) TOUCH ((AA INTERACT CT) NOT (GT INTERACT CT)) == 1
ERR NOT (OR SRAM LDBK LOGO INDMY)
}

[question] Floating Real Gate is not allowed if the effective source/drain is not connected together. Definition of floating Real Gate: 1. Real Gate without CT on poly. 2. Real Gate with CT on poly but not connected to MOS AA, pickup, or PAD. 3. It is not a floating Real Gate if the Real Gate is connected to AA by butted CT in (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region. Definition of effective source/drain: Source/drain is connected to different (MOS AA NOT poly), pickup, Real Gate, or PAD. This rule is only used to check the chip-level GDS.
[answer] GT_33_R_OFF {
@ Floating Real Gate is not allowed if the effective source/drain is not connected together.
@ Definition of floating Real Gate:
@ 1.Real Gate without CT on poly.
@ 2.Real Gate with CT on poly but not connect to MOS AA, pickup or PAD.
@ 3.It is not a floating Real Gate if the Real Gate is connected to AA by butted CT in (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
@ Definition of effective source/drain:
@ Source/drain is connected to different (MOS AA NOT poly), pickup, Real Gate or PAD.
@ This rule is only used to check chip level GDS.

GATE_CONNECT = STAMP Real_GATE BY GT0
FGATE = NET AREA RATIO GATE_CONNECT PTAPi NTAPi PSD_NOT_R NSD_NOT_R MD > 0 [!AREA(PTAPi)!AREA(NTAPi)!AREA(PSD_NOT_R)!AREA(NSD_NOT_R)!AREA(MD)]
FNSD = NET AREA RATIO NSD_NOT_R PSD_NOT_R GATE_CONNECT PTAPi NTAPi MD > 0 [~(COUNT(NSD_NOT_R) -1)!AREA(PSD_NOT_R)!AREA(GATE_CONNECT)!AREA(PTAPi)!AREA(NTAPi)!AREA(MD)]
FPSD = NET AREA RATIO PSD_NOT_R NSD_NOT_R GATE_CONNECT PTAPi NTAPi MD > 0 [~(COUNT(PSD_NOT_R) -1)!AREA(NSD_NOT_R)!AREA(GATE_CONNECT)!AREA(PTAPi)!AREA(NTAPi)!AREA(MD)]
ENSD = NSD_NOT_R NOT FNSD
EPSD = PSD_NOT_R NOT FPSD
FNSD_temp = FNSD NOT ((FNSD OR GATE) INTERACT ENSD > 1 BY NET)
FPSD_temp = FPSD NOT ((FPSD OR GATE) INTERACT EPSD > 1 BY NET)
FGATE_final = FGATE NOT INTERACT (OR FNSD_temp FPSD_temp)

(FGATE_final INTERACT NSD_NOT_R > 1 BY NET) NOT MARKS
(FGATE_final INTERACT PSD_NOT_R > 1 BY NET) NOT MARKS
}


[question] Distance from poly to a perpendicular AA "U" inside vertex, where the AA vertex distance is  0.210 m is  0.09um.
[answer] GT_34_R_OFF {
@ Distance from poly to a perpendicular AA "U" inside vertex, where the AA vertex distance is ? 0.210 m is >= 0.09um.
AA_OR_GT = AA OR GT
X = HOLES AA_OR_GT INNER
AA_corner = EXT AA < 0.005 ABUT REGION
AA_GT_corner = EXT AA GT < 0.005 ABUT REGION
Y = ((RECTANGLE X) INTERACT AA_corner == 2) INTERACT AA_GT_corner == 2
Z = Y WITH EDGE (LENGTH (Y COIN EDGE GT) <= 0.21)
W = (Z COIN EDGE AA) NOT COIN EDGE (CONVEX EDGE AA ANGLE1 == 270 ANGLE2 == 270)
LENGTH W < 0.09
}

[question] Poly minimum overlap past AA when poly to AA inner vertex distance < 0.040um is 0.13
[answer] GT_35_R_OFF {
@ poly minimum overlap past AA when poly to AA inner vertex distance < 0.040um is 0.13
gtextaa = ENC AA GT < 0.13 OPPOSITE REGION
gatespcaa = EXT GATE AA < 0.04 ABUT==90 PERP ONLY REGION
gtextaa WITH EDGE (gtextaa TOUCH EDGE gatespcaa)
}

[question] Two poly segments with width < 0.045 must not share 1 vertex
[answer] SRGT_102 {
@ Two poly segment with width < 0.045 must not share 1 vertex
EXT ((GT AND INST) WITH WIDTH < 0.045) < 0.01 ABUT == 90 REGION
}

[question] Non-floating Poly must divide AA into 2 or more regions area interacted with share contact need not follow this rule
[answer] SRGT_103 {
@ Non-floating Poly must devide AA into 2 or more regions
@ area interacted with share contact need not follow this rule
GATE = (((GT NOT FTGT) AND AA) NOT OUTSIDE INST) NOT INTERACT RECT
sized_gate = SIZE GATE BY 0.001
GATE INTERACT (sized_gate AND (AA NOT GT)) < 2
}


[question] AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
[answer] AA_1 {
@ AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
X= INT AA_all < 0.06 ABUT<90 SINGULAR REGION
X OUTSIDE INST
}

[question] AA inner vertex to inner vertex distance is 0.046
[answer] SRAA_1sa {
@ AA inner vertex to inner vertex distance is 0.046
X= EXT AA < 0.046 ABUT<90 OPPOSITE REGION NOTCH
X NOT OUT INST
}

[question] AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
[answer] AA_1a {
@ AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
X= INT (Real_MOS12 IN EDGE GT) < 0.12 ABUT<90 REGION
X OUTSIDE INST
}

[question] POLY resistor minimum width is 0.4
[answer] RESP1_2 {
@ POLY resistor minimum width is 0.4
INT (GTR IN EDGE SAB) < 0.4 ABUT<90 REGION
}

[question] POLY resistor minimum width is 0.39
[answer] RESP1_2R {
@ POLY resistor minimum width is 0.39
INT (GTR IN EDGE SAB) < 0.39 ABUT<90 REGION
}

[question] POLY resistor minimum length is 0.40
[answer] RESP1_3 {
@ POLY resistor minimum length is 0.40
INT (SAB COIN EDGE GTR) < 0.40 ABUT<90 REGION
}

[question] POLY resistor minimum length is 0.80
[answer] RESP1_3R {
@ POLY resistor minimum length is 0.80
INT (SAB IN EDGE GTR) < 0.80 ABUT<90 REGION
}

[question] POLY resistor must be orthogonal
[answer] RESP1_4 {
@ POLY resistor must be orthogonal
ANGLE GTR >0<90
}

[question] CT to SAB minimum space is 0.18
[answer] RESP1_5 {
@ CT to SAB minimum space is 0.18
EXT (CT AND (GT INTERACT GTR)) SAB < 0.18 ABUT<90 SINGULAR REGION
}
[question] AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
[answer] AA_1 {
@ AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
X= INT AA_all < 0.06 ABUT<90 SINGULAR REGION
X OUTSIDE INST
}

[question] AA inner vertex to inner vertex distance is 0.046
[answer] SRAA_1sa {
@ AA inner vertex to inner vertex distance is 0.046
X= EXT AA < 0.046 ABUT<90 OPPOSITE REGION NOTCH
X NOT OUT INST
}

[question] AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
[answer] AA_1a {
@ AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
X= INT (Real_MOS12 IN EDGE GT) < 0.12 ABUT<90 REGION
X OUTSIDE INST
}

[question] Extension of RESP1 outside of POLY minimum distance is 0.15
[answer] RESP1_6 {
@ Extension of RESP1 outside of POLY minimum distance is 0.15
ENC (GT INTERACT GTR) RESP1 < 0.15 ABUT<90 SINGULAR REGION
}

[question] The separation minimum between resistors with un-related implant region is 0.16.Un-related implant region: LVT, HVT, SN, SP, ESD1. These regions don?t interact with resistors.
[answer] RESP1_7 {
@ The separation minimum between resistors with un-related implant region is 0.16
@ Un-related implant region: LVT, HVT, SN, SP, ESD1. These regions don?t interact with resistors.
EXT GTR (SN NOT INTERACT GTR) < 0.16 ABUT<90 SINGULAR REGION
EXT GTR (SP NOT INTERACT GTR) < 0.16 ABUT<90 SINGULAR REGION
EXT GTR (ESD1 NOT INTERACT GTR) < 0.16 ABUT<90 SINGULAR REGION
EXT GTR (LVT NOT INTERACT GTR) < 0.16 ABUT<90 SINGULAR REGION
EXT GTR (HVT NOT INTERACT GTR) < 0.16 ABUT<90 SINGULAR REGION
}

[question] Dog-bone design at the end of POLY resistor for contact pick-up is not suggested
[answer] RESP1_8 {
@ Dog-bone design at the end of POLY resistor for contact pick-up is not suggested
X = CONVEX EDGE GTR == 1
EXPAND EDGE X INSIDE BY 0.01
}

[question] For POLY resistor, make sure the POLY be covered by SAB and implanted by either SN or SP
[answer] RESP1_9 {
@ For POLY resistor, make sure the POLY be covered by SAB and implanted by either SN or SP
GTR NOT SAB
(GTR NOT IN SP) NOT IN SN
}

[question] POLY SAB resistor with SP must lay on NW
[answer] RESP1_10 {
@ POLY SAB resistor with SP must lay on NW
((GTR INTERACT SAB) AND SP) NOT NW
}


[question] AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
[answer] AA_1 {
@ AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
X= INT AA_all < 0.06 ABUT<90 SINGULAR REGION
X OUTSIDE INST
}

[question] AA inner vertex to inner vertex distance is 0.046
[answer] SRAA_1sa {
@ AA inner vertex to inner vertex distance is 0.046
X= EXT AA < 0.046 ABUT<90 OPPOSITE REGION NOTCH
X NOT OUT INST
}

[question] AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
[answer] AA_1a {
@ AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
X= INT (Real_MOS12 IN EDGE GT) < 0.12 ABUT<90 REGION
X OUTSIDE INST
}

[question] Extension Poly to SAB is 0.3
[answer] RESP1_11 {
@ Extension Poly to SAB is 0.3
ENC SAB (GT INTERACT GTR)< 0.3 ABUT<90 SINGULAR REGION
}

[question] Minimum Space RESPl to non-related AA is 0.16
[answer] RESP1_12 {
@ Minimum Space RESPl to non-related AA is 0.16
EXT RESP1 (AA NOT INTERACT RESP1) < 0.16 ABUT<90 SINGULAR REGION
}

[question] Minimum Space RESPl to non-related Poly is 0.24
[answer] RESP1_13 {
@ Minimum Space RESPl to non-related Poly is 0.24
EXT RESP1 (GT NOT INTERACT RESP1) < 0.24 ABUT<90 SINGULAR REGION
}

[question] If you have N_poly_resistor device, please confirm it with SMIC PIE
[answer] RESP1_14 {
@ If you have N_poly_resistor device, please confirm it with SMIC PIE
((RESP1 AND SN) AND SAB ) AND GT
}

[question] RESP1 and SAB on GT should have coincident edge
[answer] RESP1_15{
@ RESP1 and SAB on GT should have coincident edge
X = RESP1 INSIDE EDGE GT
Y = SAB INSIDE EDGE GT
X NOT COIN EDGE Y
RESP1 ENCLOSE GT
}

[question] POLY Silicide resistor minimum width is 0.15
[answer] PLRES_1{
@ POLY Silicide resistor minimum width is 0.15
INT GTP < 0.15 ABUT<90 REGION
}


[question] AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
[answer] AA_1 {
@ AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
X= INT AA_all < 0.06 ABUT<90 SINGULAR REGION
X OUTSIDE INST
}

[question] AA inner vertex to inner vertex distance is 0.046
[answer] SRAA_1sa {
@ AA inner vertex to inner vertex distance is 0.046
X= EXT AA < 0.046 ABUT<90 OPPOSITE REGION NOTCH
X NOT OUT INST
}

[question] AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
[answer] AA_1a {
@ AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
X= INT (Real_MOS12 IN EDGE GT) < 0.12 ABUT<90 REGION
X OUTSIDE INST
}

[question] PLRES can not overlap with RESP1
[answer] PLRES_2{
@PLRES can not overlap with RESP1
PLRES AND RESP1
}

[question] POLY Silicide resistor minimum square number(length/width ratio) >= 1
[answer] PLRES_3{
@POLY Silicide resistor minimum square number(length/width ratio) >= 1
X = PLRES INTERACT GT
Y = GT AND PLRES
L = LENGTH Y >0
L1 = EXPAND EDGE L OUTSIDE BY 0.001
W = INSIDE EDGE X GT
W1 = EXPAND EDGE W OUTSIDE BY 0.001
L_RE =L1 NOT W1
L_EDGE = L_RE COIN EDGE Y
DFM PROPERTY Y L_EDGE W OVERLAP ABUT ALSO MULTI [WIDTH = LENGTH(W)] >0 [SQUARES = LENGTH(L_EDGE)/LENGTH(W)] < 1
}

[question] POLY Silicide resistor must be orthogonal
[answer] PLRES_4{
@POLY Silicide resistor must be orthogonal
ANGLE GTP >0< 90
}

[question] CT to PLRES space: Fixed value is 0.01
[answer] PLRES_5{
@CT to PLRES space: Fixed value is 0.01

X1 = EXT CT GTP <= 0.07 ABUT<90 REGION OPPOSITE
X2 = EXT CT GTP == 0.01 ABUT<90 REGION OPPOSITE
(X1 NOT (X2 NOT (X2 ENCLOSE CT))) OR (CT INTERACT PLRES)
}

[question] min Extension of PLRES outside of POLY minimum distance is 0.0
[answer] PLRES_6{
@min Extension of PLRES outside of POLY minimum distance is 0.0
X =GTP TOUCH (PLRES NOT GTP) >1
Y = PLRES COIN EDGE GT
Z =EXPAND EDGE Y INSIDE BY 0.001
PLRES NOT INTERACT (X OR (PLRES INTERACT Z))
}


[question] AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
[answer] AA_1 {
@ AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
X= INT AA_all < 0.06 ABUT<90 SINGULAR REGION
X OUTSIDE INST
}

[question] AA inner vertex to inner vertex distance is 0.046
[answer] SRAA_1sa {
@ AA inner vertex to inner vertex distance is 0.046
X= EXT AA < 0.046 ABUT<90 OPPOSITE REGION NOTCH
X NOT OUT INST
}

[question] AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
[answer] AA_1a {
@ AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
X= INT (Real_MOS12 IN EDGE GT) < 0.12 ABUT<90 REGION
X OUTSIDE INST
}

[question] The minimum separation between resistors with unrelated implant region is 0.16.Un-related implant region: LVT, HVT, SN, SP, ESD1. These region don?t interact with resistors.
[answer] PLRES_7{
@The minimum separation between resistors with un-related implant region is 0.16
@ Un-related implant region: LVT, HVT, SN, SP, ESD1. These region don?t interact with resistors.
EXT GTP (SN NOT INTERACT GTP) < 0.16 ABUT<90 SINGULAR REGION
EXT GTP (SP NOT INTERACT GTP) < 0.16 ABUT<90 SINGULAR REGION
EXT GTP (ESD1 NOT INTERACT GTP) < 0.16 ABUT<90 SINGULAR REGION
EXT GTP (LVT NOT INTERACT GTP) < 0.16 ABUT<90 SINGULAR REGION
EXT GTP (HVT NOT INTERACT GTP) < 0.16 ABUT<90 SINGULAR REGION
}

[question] For POLY Silicide resistor, make sure the POLY resistor is implanted by either SN or SP. Minimum enclosure by SN or SP is 0.18
[answer] PLRES_8{
@For POLY Silicide resistor, make sure the POLY resistor be implanted by either SN or SP. Minimum enclosure by SN or SP is 0.18
(GTP NOT IN SP) NOT IN SN
ENC GTP SN <0.18 ABUT<90 SINGULAR REGION
ENC GTP SP <0.18 ABUT<90 SINGULAR REGION
}

[question] Minimum Space PLRES to non-related AA is 0.16
[answer] PLRES_9{
@Minimum Space PLRES to non-related AA is 0.16
EXT PLRES AA< 0.16 ABUT>0<90 SINGULAR REGION
}

[question] Minimum Space PLRES to non-related Poly is 0.24
[answer] PLRES_10 {
@Minimum Space PLRES to non-related Poly is 0.24
EXT PLRES GT< 0.24 ABUT>0<90 SINGULAR REGION
}

[question] AA vertex must not be connected to two short edges with length < 0.07
[answer] SE_1 {
@ AA vertex must not be connected to two short edge with length < 0.07
CONVEX EDGE (LENGTH AA < 0.070) ANGLE1 >=0 ANGLE2 >0
}

[question] Poly vertex must not be connected to two short edges with length < 0.04
[answer] SE_2 {
@ Poly vertex must not be connected to two short edge with length < 0.04
CONVEX EDGE (LENGTH GT < 0.040) ANGLE1 >=0 ANGLE2 >0
}


[question] AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
[answer] AA_1 {
@ AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
X= INT AA_all < 0.06 ABUT<90 SINGULAR REGION
X OUTSIDE INST
}

[question] AA inner vertex to inner vertex distance is 0.046
[answer] SRAA_1sa {
@ AA inner vertex to inner vertex distance is 0.046
X= EXT AA < 0.046 ABUT<90 OPPOSITE REGION NOTCH
X NOT OUT INST
}

[question] AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
[answer] AA_1a {
@ AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
X= INT (Real_MOS12 IN EDGE GT) < 0.12 ABUT<90 REGION
X OUTSIDE INST
}

[question] Poly vertex must not be connected to two short edges with length <= 0.07
[answer] SE_2R {
@ Poly vertex must not be connected to two short edge w/ length <= 0.07
CONVEX EDGE (LENGTH GT < 0.070) ANGLE1 >=0 ANGLE2 >0
}

[question] Poly edge with length < 0.07 um must have at least one neighboring edge with length = 0.07 um
[answer] SE_2a {
@ Poly edge with length < 0.07 um must have at least one neighboring edge with length = 0.07 um
CONVEX EDGE (LENGTH PC < 0.070) ANGLE1 >0 ANGLE2 >0
}

[question] SN vertex must not be connected to two short edges with length < 0.14um
[answer] SE_3 {
@ SN vertex must not be connected to two short edges with length < 0.14um
CONVEX EDGE (LENGTH SN < 0.140) ANGLE1 >=0 ANGLE2 >0
}

[question] M1 vertex must not be connected to two short edges with lengths < 0.07 um
[answer] SE_4 {
@ M1 vertex must not be connected to two short edges with lengths < 0.07 um
CONVEX EDGE (LENGTH M1 < 0.070) ANGLE1 >=0 ANGLE2 >0
}

[question] M2 vertex must not be connected to two short edges with lengths < 0.07 um
[answer] SE_5a {
@ M2 vertex must not be connected to two short edges with lengths < 0.07 um
CONVEX EDGE (LENGTH M2 < 0.070) ANGLE1 >=0 ANGLE2 >0
}

[question] M3 vertex must not be connected to two short edges with lengths < 0.07 um
[answer] SE_5b {
@ M3 vertex must not be connected to two short edges with lengths < 0.07 um
CONVEX EDGE (LENGTH M3 < 0.070) ANGLE1 >=0 ANGLE2 >0
}

[question] M4 vertex must not be connected to two short edges with lengths < 0.07 um
[answer] SE_5c {
@ M4 vertex must not be connected to two short edges with lengths < 0.07 um
CONVEX EDGE (LENGTH M4 < 0.070) ANGLE1 >=0 ANGLE2 >0
}


[question] AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
[answer] AA_1 {
@ AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
X= INT AA_all < 0.06 ABUT<90 SINGULAR REGION
X OUTSIDE INST
}

[question] AA inner vertex to inner vertex distance is 0.046
[answer] SRAA_1sa {
@ AA inner vertex to inner vertex distance is 0.046
X= EXT AA < 0.046 ABUT<90 OPPOSITE REGION NOTCH
X NOT OUT INST
}

[question] AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
[answer] AA_1a {
@ AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
X= INT (Real_MOS12 IN EDGE GT) < 0.12 ABUT<90 REGION
X OUTSIDE INST
}

[question] M5 vertex must not be connected to two short edges with lengths < 0.07 um
[answer] SE_5d {
@ M5 vertex must not be connected to two short edges with lengths < 0.07 um
CONVEX EDGE (LENGTH M5 < 0.070) ANGLE1 >=0 ANGLE2 >0
}

[question] M6 vertex must not be connected to two short edges with lengths < 0.07 um
[answer] SE_5e {
@ M6 vertex must not be connected to two short edges with lengths < 0.07 um
CONVEX EDGE (LENGTH M6 < 0.070) ANGLE1 >=0 ANGLE2 >0
}

[question] M7 vertex must not be connected to two short edges with lengths < 0.07 um
[answer] SE_5f {
@ M7 vertex must not be connected to two short edges with lengths < 0.07 um
CONVEX EDGE (LENGTH M7 < 0.070) ANGLE1 >=0 ANGLE2 >0
}

[question] M8 vertex must not be connected to two short edges with lengths < 0.07 um
[answer] SE_5g {
@ M8 vertex must not be connected to two short edges with lengths < 0.07 um
CONVEX EDGE (LENGTH M8 < 0.070) ANGLE1 >=0 ANGLE2 >0
}

[question] Any M1 vertex touching an M1 edge <= 0.07 um must connect to an M1 edge >= 0.135
[answer] SE_4R {
@ Any M1 vertex touching an M1 edge <= 0.07 um must connect to an M1 edge >= 0.135
Length (CONVEX EDGE (LENGTH M1 <= 0.135) ANGLE1 >=0 ANGLE2 > 0) <= 0.070
}

[question] Any M2 vertex touching an M2 edge <= 0.07 um must connect to an M2 edge >= 0.135
[answer] SE_5Ra {
@ Any M2 vertex touching an M2 edge <= 0.07 um must connect to an M2 edge >= 0.135
Length (CONVEX EDGE (LENGTH M2 <= 0.135) ANGLE1 >=0 ANGLE2 > 0) <= 0.070
}

[question] Any M3 vertex touching an M3 edge <= 0.07 um must connect to an M3 edge >= 0.135
[answer] SE_5Rb {
@ Any M3 vertex touching an M3 edge <= 0.07 um must connect to an M3 edge >= 0.135
Length (CONVEX EDGE (LENGTH M3 <= 0.135) ANGLE1 >=0 ANGLE2 > 0) <= 0.070
}

[question] Any M4 vertex touching an M4 edge <= 0.07 um must connect to an M4 edge >= 0.135
[answer] SE_5Rc {
@ Any M4 vertex touching an M4 edge <= 0.07 um must connect to an M4 edge >= 0.135
Length (CONVEX EDGE (LENGTH M4 <= 0.135) ANGLE1 >=0 ANGLE2 > 0) <= 0.070
}


[question] AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
[answer] AA_1 {
@ AA minimum width(The INST connected area apply SRAMdesign rule) is 0.06
X= INT AA_all < 0.06 ABUT<90 SINGULAR REGION
X OUTSIDE INST
}

[question] AA inner vertex to inner vertex distance is 0.046
[answer] SRAA_1sa {
@ AA inner vertex to inner vertex distance is 0.046
X= EXT AA < 0.046 ABUT<90 OPPOSITE REGION NOTCH
X NOT OUT INST
}

[question] AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
[answer] AA_1a {
@ AA minimum width of NMOS/PMOS for 0.9/1.1/1.2V transistor is 0.12
X= INT (Real_MOS12 IN EDGE GT) < 0.12 ABUT<90 REGION
X OUTSIDE INST
}

[question] Any M5 vertex touching an M5 edge <= 0.07 um must connect to an M5 edge >= 0.135
[answer] SE_5Rd {
@ Any M5 vertex touching an M5 edge <= 0.07 um must connect to an M5 edge >= 0.135
Length (CONVEX EDGE (LENGTH M5 <= 0.135) ANGLE1 >=0 ANGLE2 > 0) <= 0.070
}

[question] Any M6 vertex touching an M6 edge <= 0.07 um must connect to an M6 edge >= 0.135
[answer] SE_5Re {
@ Any M6 vertex touching an M6 edge <= 0.07 um must connect to an M6 edge >= 0.135
Length (CONVEX EDGE (LENGTH M6 <= 0.135) ANGLE1 >=0 ANGLE2 > 0) <= 0.070
}

[question] Any M7 vertex touching an M7 edge <= 0.07 um must connect to an M7 edge >= 0.135
[answer] SE_5Rf {
@ Any M7 vertex touching an M7 edge <= 0.07 um must connect to an M7 edge >= 0.135
Length (CONVEX EDGE (LENGTH M7 <= 0.135) ANGLE1 >=0 ANGLE2 > 0) <= 0.070
}

[question] Any M8 vertex touching an M8 edge <= 0.07 um must connect to an M8 edge >= 0.135
[answer] SE_5Rg {
@ Any M8 vertex touching an M8 edge <= 0.07 um must connect to an M8 edge >= 0.135
Length (CONVEX EDGE (LENGTH M8 <= 0.135) ANGLE1 >=0 ANGLE2 > 0) <= 0.070
}

[question] LVT minimum width(only check opposite side) is 0.18
[answer] LVT_1 {
@ LVT minimum width(only check opposite side) is 0.18
INT LVT < 0.18 ABUT>0<90 OPPOSITE REGION
}

[question] Minimum Space between two LVT. (with run length > 0 ) is 0.18
[answer] LVT_2 {
@ Minimum Space between two LVT. (with run length > 0 ) is 0.18
EXT LVT < 0.18 ABUT < 90 REGION OPPOSITE
}

[question] Minimum Space between LVT and AA (except Pickup AA) is 0.04
[answer] LVT_3 {
@ Minimum Space between LVT and AA (except Pickup AA) is 0.04
EXT LVT (AA NOT TAP) < 0.04 ABUT<90 REGION
}

[question] LVT minimum extension outside of Real gate for MOS along source drain direction is 0.14
[answer] LVT_4 {
@ LVT minimum extension outside of Real gate for MOS along source drain direction is 0.14
Z = Real_GATE INTERACT LVT
X = Z INSIDE EDGE ACT
ENC X LVT < 0.14 ABUT<90 REGION OPPOSITE
}


[question] LVT minimum extension outside of Real gate for MOS along poly direction is 0.08
[answer] LVT_4a {
@ LVT minimum extension outside of Real gate for MOS along poly direction is 0.08
Z = Real_GATE INTERACT LVT
X = ACT TOUCH EDGE Z
ENC X LVT < 0.08 ABUT<90 REGION OPPOSITE
}

[question] Minimum space between LVT and Real gate for MOS along source drain direction is 0.14
[answer] LVT_5 {
@ Minimum space between LVT and Real gate for MOS along source drain direction is 0.14
X = Real_GATE INSIDE EDGE ACT
EXT LVT X < 0.14 ABUT<90 REGION OPPOSITE
}

[question] Minimum Space between LVT and Real gate along poly direction is 0.08
[answer] LVT_5a {
@ Minimum Space between LVT and Real gate along poly direction is 0.08
X = Real_GATE TOUCH EDGE ACT
EXT X LVT < 0.08 ABUT<90 REGION
}

[question] Minimum space between LVT to (poly SAB resistor(GT AND RESP1) or AA SAB resistor(AA AND RESAA)) is 0.18
[answer] LVT_6 {
@ Minimum space between LVT to (poly SAB resistor(GT AND RESP1) or AA SAB resistor(AA AND RESAA)) is 0.18
EXT LVT GTSABR < 0.18 ABUT<90 SINGULAR REGION
EXT LVT AASABR < 0.18 ABUT<90 SINGULAR REGION
}

[question] LVT minimum area is 0.19
[answer] LVT_9 {
@ LVT minimum area is 0.19
AREA LVT < 0.19
}

[question] LVT minimum enclosed area is 0.19
[answer] LVT_10 {
@ LVT minimum enclosed area is 0.19
AREA ((HOLES LVT INNER) NOT LVT) < 0.19
}

[question] (LVT overlap AA) overlapping ( DG, VARMOS, PSUB and HVT) is prohibited
[answer] LVT_13 {
@ (LVT overlap AA) overlapping ( DG, VARMOS, PSUB and HVT) is prohibited
(LVT AND AA) AND (((DG OR VARMOS) OR PSUB) OR HVT)
}


[question] Minimum Space between LVT and pickup AA is 0.02
[answer] LVT_14 {
@ Minimum Space between LVT and pickup AA is 0.02
EXT LVT TAP < 0.02 ABUT<90 REGION
}

[question] 45-degree edge length is >= 0.5um.
[answer] LVT_15 {
@ 45-degree edge length is >= 0.5um.
X = ANGLE LVT >=44.9 <=45.1
LENGTH X < 0.5
}

[question] HVT minimum width(only check opposite side) is 0.18
[answer] HVT_1 {
@ HVT minimum width(only check opposite side) is 0.18
INT HVT < 0.18 ABUT>0<90 OPPOSITE REGION
}

[question] Minimum Space between two HVT. (with run length > 0 ) is 0.18
[answer] HVT_2 {
@ Minimum Space between two HVT. (with run length > 0 ) is 0.18
EXT HVT < 0.18 ABUT < 90 REGION OPPOSITE
}

[question] Minimum Space between HVT and AA (except Pickup AA) is 0.04
[answer] HVT_3 {
@ Minimum Space between HVT and AA (except Pickup AA) is 0.04
EXT HVT (AA NOT TAP) < 0.04 ABUT<90 REGION
}

[question] HVT minimum extension outside of Real gate for MOS along source drain direction is 0.14
[answer] HVT_4 {
@ HVT minimum extension outside of Real gate for MOS along source drain direction is 0.14
Z = Real_GATE INTERACT HVT
X = Z INSIDE EDGE ACT
ENC X HVT < 0.14 ABUT<90 REGION OPPOSITE
}


[question] HVT minimum extension outside of Real gate for MOS along poly direction is 0.08
[answer] HVT_4a {
@ HVT minimum extension outside of Real gate for MOS along poly direction is 0.08
Z = Real_GATE INTERACT HVT
X = ACT TOUCH EDGE Z
ENC X HVT < 0.08 ABUT<90 REGION OPPOSITE
}

[question] Minimum space between HVT and Real gate for MOS along source drain direction is 0.14
[answer] HVT_5 {
@ Minimum space between HVT and Real gate for MOS along source drain direction is 0.14
X = Real_GATE INSIDE EDGE ACT
EXT HVT X < 0.14 ABUT<90 REGION OPPOSITE
}

[question] Minimum Space between HVT and Real gate along poly direction is 0.08
[answer] HVT_5a {
@ Minimum Space between HVT and Real gate along poly direction is 0.08
X = Real_GATE TOUCH EDGE ACT
EXT X HVT < 0.08 ABUT<90 REGION
}

[question] Minimum space between HVT to (poly SAB resistor(RESP1 AND GT) or AA SAB resistor(RESAA AND AA)) is 0.18
[answer] HVT_6 {
@ Minimum space between HVT to (poly SAB resistor(RESP1 AND GT) or AA SAB resistor(RESAA AND AA)) is 0.18
EXT HVT GTSABR < 0.18 ABUT<90 SINGULAR REGION
EXT HVT AASABR < 0.18 ABUT<90 SINGULAR REGION
}

[question] HVT minimum area is 0.19
[answer] HVT_9 {
@ HVT minimum area is 0.19
AREA HVT < 0.19
}

[question] HVT minimum enclosed area is 0.19
[answer] HVT_10 {
@ HVT minimum enclosed area is 0.19
AREA ((HOLES HVT INNER) NOT HVT) < 0.19
}

[question] (HVT overlap AA) overlapping ( DG, VARMOS, PSUB, LVT) is prohibited
[answer] HVT_13 {
@ (HVT overlap AA) overlapping ( DG, VARMOS, PSUB, LVT) is prohibited
(HVT AND AA) AND (((DG OR VARMOS) OR PSUB) OR LVT)
}

[question] Minimum Space between HVT and pickup AA is 0.02
[answer] HVT_14 {
@ Minimum Space between HVT and pickup AA is 0.02
EXT HVT TAP < 0.02 ABUT<90 REGION
}

[question] 45-degree edge length is >= 0.5um.
[answer] HVT_15 {
@ 45-degree edge length is >= 0.5um.
X = ANGLE HVT >=44.9 <=45.1
LENGTH X < 0.5
}

[question] NC minimum width is 0.18
[answer] NC_1 {
@ NC minimum width is 0.18
INT NC < 0.18 ABUT<90 SINGULAR REGION
}

[question] Minimum space between two NC is 0.18
[answer] NC_2 {
@ Minimum space between two NC is 0.18
@ Merge if the space is less than 0.18
EXT NC < 0.18 ABUT<90 SINGULAR REGION
}

[question] Minimum space between NC and N+AA in PW or P+AA in NW is 0.08, except AA resistor
[answer] NC_3 {
@ Minimum space between NC and N+AA in PW or P+AA in NW is 0.08, except AA resistor
X = (PACT NOT (PTAP OR AAR)) NOT TOUCH EDGE NC
Y = (NACT NOT (NTAP OR AAR)) NOT TOUCH EDGE NC
EXT NC X < 0.08 ABUT<90 REGION
EXT NC Y < 0.08 ABUT<90 REGION
}

[question] NC minimum extension outside of poly gate for NMOS along source drain direction is 0.18
[answer] NC_4_8 {
@ NC minimum extension outside of poly gate for NMOS along source drain direction is 0.18
@ N+AA minimum enclosure by NC if the distance to the poly gate < 0.16um is 0.16
Z = NGATE INTERACT NC
X = Z INSIDE EDGE NACT
A = EXPAND EDGE X INSIDE BY 0.16 OUTSIDE BY 0.16 CORNER FILL
Y = Z COIN EDGE NACT
B = EXPAND EDGE Y OUTSIDE BY 0.16 EXTEND BY 0.16
C = A OR B
C NOT NC
ENC X NC < 0.18 ABUT<90 REGION OPPOSITE
}


[question] Space between NC and P-channel poly gate is 0.2
[answer] NC_5 {
@ Space between NC and P-channel poly gate is 0.2
EXT NC PGATE < 0.20 ABUT<90 SINGULAR REGION
}

[question] Space between NC SAB poly and AA resistor is 0.2
[answer] NC_6 {
@ Space between NC SAB poly and AA resistor is 0.2
EXT NC GTR < 0.20 ABUT<90 SINGULAR REGION
EXT NC AAR < 0.20 ABUT<90 SINGULAR REGION
}

[question] N+AA enclosure by NC if the distance to the poly gate w>0.22um is 0.08
[answer] NC_7 {
@ N+AA enclosure by NC if the distance to the poly gate w>0.22um is 0.08
X = (NACT TOUCH EDGE NGATE) NOT COIN EDGE PACT
ENC X NC < 0.08 ABUT<90 REGION
}

[question] NC area is 0.10
[answer] NC_9 {
@ NC area is 0.10
AREA NC < 0.10
}

[question] NC minimum enclosed area is 0.10
[answer] NC_10 {
@ NC minimum enclosed area is 0.10
AREA ((HOLES NC INNER) NOT NC) < 0.10
}

[question] NC can not overlap with P+ pickup AA or butted P+AA
[answer] NC_11 {
@ NC can not overlap with P+ pickup AA or butted P+AA
NC AND PACT
}

[question] NC shapes must be orthogonal
[answer] NC_12 {
@ NC shapes must be orthogonal
ANGLE NC >0<90
}

[question] (NC over AA) over (TG, DG, LVN, VTNH) is prohibited
[answer] NC_13 {
@ (NC over AA) over (TG, DG, LVN, VTNH) is prohibited
(NC AND AA) AND (TG OR DG)
(NC AND AA) AND (LVN OR VTNH)
}


[question] PC width is 0.18
[answer] PC_1 {
@ PC width is 0.18
INT PC < 0.18 ABUT<90 SINGULAR REGION
}

[question] Space between two PC is 0.18.Merge if the space is less than 0.18.
[answer] PC_2 {
@ Space between two PC is 0.18
@ Merge if the space is less than 0.18
EXT PC < 0.18 ABUT<90 SINGULAR REGION
}

[question] Space between PC and N+AA in PW or P+AA in NW is 0.09, except AA resistor
[answer] PC_3 {
@ Space between PC and N+AA in PW or P+AA in NW is 0.09, except AA resistor
X = (PACT NOT (PTAP OR AAR)) NOT TOUCH EDGE PC
Y = (NACT NOT (NTAP OR AAR)) NOT TOUCH EDGE PC
EXT PC X < 0.09 ABUT<90 REGION
EXT PC Y < 0.09 ABUT<90 REGION
}

[question] PC extension outside of poly gate for PMOS along source drain direction is 0.18. N+AA enclosure by PC if the distance to the poly gate < 0.22um is 0.18
[answer] PC_4_8 {
@ PC extension outside of poly gate for PMOS along source drain direction is 0.18
@ N+AA enclosure by PC if the distance to the poly gate < 0.22um is 0.18
Z = PGATE INTERACT PC
X = Z INSIDE EDGE PACT
A = EXPAND EDGE X INSIDE BY 0.22 OUTSIDE BY 0.22 CORNER FILL
Y = Z COIN EDGE PACT
B = EXPAND EDGE Y OUTSIDE BY 0.22 EXTEND BY 0.18
C = A OR B
C NOT PC
ENC X PC < 0.18 ABUT<90 REGION OPPOSITE
}

[question] Space between PC and N-channel poly gate is 0.2
[answer] PC_5 {
@ Space between PC and N-channel poly gate is 0.2
EXT PC NGATE < 0.20 ABUT<90 SINGULAR REGION
}

[question] Space between PC SAB poly and AA resistor is 0.2
[answer] PC_6 {
@ Space between PC SAB poly and AA resistor is 0.2
EXT PC GTR < 0.20 ABUT<90 SINGULAR REGION
EXT PC AAR < 0.20 ABUT<90 SINGULAR REGION
}


[question] P+AA enclosure by PC if the distance to the poly gate w>0.22um is 0.08
[answer] PC_7 {
@ P+AA enclosure by PC if the distance to the poly gate w>0.22um is 0.08
X = (PACT TOUCH EDGE PGATE) NOT COIN EDGE NACT
ENC X PC < 0.08 ABUT<90 REGION
}

[question] PC area is 0.10
[answer] PC_9 {
@ PC area is 0.10
AREA PC < 0.10
}

[question] PC minimum enclosed area is 0.10
[answer] PC_10 {
@ PC minimum enclosed area is 0.10
AREA ((HOLES PC INNER) NOT PC) < 0.10
}

[question] PC can not overlap with N+ pickup AA or butted N+AA
[answer] PC_11 {
@ PC can not overlap with N+ pickup AA or butted N+AA
PC AND NACT
}

[question] PC shapes must be orthogonal
[answer] PC_12 {
@ PC shapes must be orthogonal
ANGLE PC >0<90
}

[question] (PC over AA) over (TG, DG, LVP, VTPH) is prohibited
[answer] PC_13 {
@ (PC over AA) over (TG, DG, LVP, VTPH) is prohibited
(PC AND AA) AND (TG OR DG)
(PC AND AA) AND (LVP OR VTPH)
}

[question] NC minimum width is 0.272
[answer] SRNC_101 {
@ NC minimum width is 0.272
INT NC < 0.272 ABUT<90 REGION
}


[question] Minimum space between two NC is 0.46
[answer] SRNC_102 {
@ Minimum space between two NC is 0.46
EXT NC < 0.46 ABUT<90 REGION
}

[question] NC min area is 0.114
[answer] SRNC_103 {
@ NC min area is 0.114
AREA NC < 0.114
}

[question] NC minimum enclosed area is 0.114
[answer] SRNC_104 {
@ NC minimum enclosed area is 0.114
AREA ((HOLES NC INNER) NOT NC) < 0.114
}

[question] PC width is 0.46
[answer] SRPC_101 {
@ PC width is 0.46
INT PC < 0.46 ABUT<90 REGION
}

[question] Space between two PC is 0.272
[answer] SRPC_102 {
@ Space between two PC is 0.272
EXT PC < 0.272 ABUT<90 REGION
}

[question] PC area is 0.114
[answer] SRPC_103 {
@ PC area is 0.114
AREA PC < 0.114
}

[question] PC minimum enclosed area is 0.114
[answer] SRPC_104 {
@ PC minimum enclosed area is 0.114
AREA ((HOLES PC INNER) NOT PC) < 0.114
}


[question] SP minimum width(with run length > 0) is 0.18
[answer] SP_1 {
@ SP minimum width(with run length > 0) is 0.18
INT SP < 0.18 ABUT<90 REGION OPPOSITE
}

[question] SP minimum width is 0.135
[answer] SRSP_1 {
@ SP minimum width is 0.135
X= INT SP < 0.135 ABUT<90 REGION
X NOT OUTSIDE INST
}

[question] Minimum space between two SP(with run length > 0) is 0.18.Merge if the space is less than 0.18.
[answer] SP_2 {
@ Minimum space between two SP(with run length > 0) is 0.18
@ Merge if the space is less than 0.18
EXT SP < 0.18 OPPOSITE ABUT<90 REGION
}

[question] Minimum space between two SP is 0.135
[answer] SRSP_2 {
@ Minimum space between two SP is 0.135
X= EXT SP < 0.135 ABUT<90 REGION
X NOT OUTSIDE INST
}

[question] Minimum space between SP and N+AA in PW (run length > 0.1um) is 0.08, except AA resistor
[answer] SP_3a {
@ Minimum space between SP and N+AA in PW (run length > 0.1um) is 0.08, excpet AA resistor
X = ((NACT OUTSIDE INST) NOT (NTAP OR AAR)) NOT COIN EDGE SP
X1 = EXT SP X < 0.08 ABUT>0<90 REGION OPPOSITE
X1 WITH EDGE (LENGTH X1 > 0.1)
}

[question] Minimum space between SP and N+AA in PW (run length <= 0.1um) is 0.05, except AA resistor
[answer] SP_3b {
@ Minimum space between SP and N+AA in PW (run length <= 0.1um) is 0.05, excpet AA resistor
X = ((NACT OUTSIDE INST) NOT (NTAP OR AAR)) NOT COIN EDGE SP
EXT SP X < 0.05 ABUT>0<90 REGION
}


[question] Minimum space between SP and N+ AA inside PW is 0.041, except AA resistor. (run length > 0.1um)
[answer] SRSP_3a{
@ Minimum space between SP and N+ AA inside PW is 0.041, except AA resistor. (run length > 0.1um)
X = (NACT NOT OUTSIDE INST) AND PW
Y = EXT SP X < 0.041 ABUT>0<90 REGION OPPOSITE
(Y WITH EDGE (LENGTH Y > 0.1)) NOT OUTSIDE INST
}

[question] Minimum space between SP and N+ AA inside PW is 0.037, except AA resistor. (run length <= 0.1um)
[answer] SRSP_3b{
@ Minimum space between SP and N+ AA inside PW is 0.037, except AA resistor. (run length <= 0.1um)
X = (NACT NOT OUTSIDE INST) AND PW
Y = EXT SP X < 0.037 ABUT>0<90 REGION OPPOSITE
Z = Y COIN EDGE SP
(Y WITH EDGE (LENGTH Z <=0.1 )) NOT OUTSIDE INST
}

[question] Minimum space between SP and N+ pick-up AA is 0.02
[answer] SP_4{
@ Minimum space between SP and N+ pick-up AA is 0.02
X = NTAP NOT COIN EDGE (SP INTERACT PACT)
EXT SP X < 0.02 ABUT<90 REGION
}

[question] SP minimum extension outside of Real gate for PMOS along S/D direction is 0.16
[answer] SP_6 {
@ SP minimum extension outside of Real gate for PMOS along S/D direction is 0.16
ENC (GT COIN EDGE Real_GATE) SP < 0.16 ABUT<90 REGION OPPOSITE
}


[question] SP minimum extension outside of poly gate for PMOS is 0.18, excluding floating poly
[answer] SRSP_6 {
@ SP minimum extension outside of poly gate for PMOS is 0.18, excluding floating poly
ENC (((GT NOT OUTSIDE INST) NOT FTGT) IN EDGE PACT) SP < 0.18 ABUT<90 REGION OPPOSITE
}

[question] Minimum space between SP and S/D direction N-channel Real gate is 0.16
[answer] SP_7a {
@ Minimum space between SP and S/D direction N-channel Real gate is 0.16
EXT SP (GT COIN EDGE Real_NGATE) < 0.16 ABUT<90 REGION OPPOSITE
}

[question] Minimum space between SP and S/D direction N-channel poly gate is 0.18, excluding floating poly
[answer] SRSP_7a {
@ Minimum space between SP and S/D direction N-channel poly gate is 0.18, excluding floating poly
SD = ((AA INTERACT GT) NOT GT) INTERACT CT
X = EXT SP (((GT NOT OUTSIDE INST) NOT FTGT) IN EDGE NACT) < 0.18 ABUT<90 REGION OPPOSITE
X INTERACT SD
}

[question] Minimum space between SP and non-S/D direction N-channel Real gate is 0.08um. This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
[answer] SP_7b {
@ Minimum space between SP and non-S/D direction N-channel Real gate is 0.08um.
@ This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
X= EXT SP Real_NGATE < 0.08 ABUT<90 SINGULAR REGION
X OUTSIDE SRAM
}

[question] A butted N+ pick-up AA space to PMOS Real gate in the same AA is >= 0.23
[answer] SP_7c {
@ A butted N+ pick-up AA space to PMOS Real gate in the same AA is >= 0.23
EXT (NTAP_EMPTY2 TOUCH PSD_EMPTY2) Real_PGATE_EMPTY2 <0.23 ABUT<90 SINGULAR REGION CONNECTED
}

[question] Minimum space between SP and non-S/D direction N-channel poly gate is 0.038. Minimum space between SP outer vertex and non-S/D direction N-channel poly gate outer vertex is 0.037
[answer] SRSP_7b {
@ Minimum space between SP and non-S/D direction N-channel poly gate is 0.038
@ Minimum space between SP outer vertex and non-S/D direction N-channel poly gate outer vertex is 0.037
X =EXT SP NGATE < 0.038 ABUT<90 REGION OPPOSITE
X NOT OUTSIDE INST
Y = EXT SP NGATE < 0.037 ABUT<90 REGION CORNER TO CORNER
Y NOT OUTSIDE INST
}


[question] Minimum space between SP on a butted AA and poly gate edge in case the extending of butted P+ AA is less than 0.16 (h<0.16) in PW is 0.16
[answer] SP_8a {
@ Minimum space between SP on a butted AA and poly gate edge in case the
@ extending of butted P+ AA is less than 0.16 (h<0.16) in PW is 0.16
NGTL = NACT INSIDE EDGE GT
NAAL = NACT TOUCH EDGE NGTL
NAAL_EP = EXPAND EDGE NAAL OUTSIDE BY 0.16 EXTEND BY 0.01
BUTPA_ED = PACT COIN EDGE (NACT NOT NTAP)
BUTPA_ED_1 = BUTPA_ED INSIDE EDGE NAAL_EP
BUTSP_1 = (SP INTERACT PW) WITH EDGE BUTPA_ED_1

GTSP_1 = GT INSIDE EDGE ((NACT NOT NTAP) TOUCH PACT)
GTSP = GT TOUCH EDGE GTSP_1

EXT BUTSP_1 GTSP < 0.16 ABUT<90 REGION
}

[question] Minimum space between a SP on a butted AA and poly gate edge in case the extending of butted P+ AA is larger than 0.16 (h>0.16) in PW is 0.08
[answer] SP_8b {
@ Minimum space between a SP on a butted AA and poly gate edge in case the
@ extending of butted P+ AA is larger than 0.16 (h>0.16) in PW is 0.08
NGTL = NACT INSIDE EDGE GT
NAAL = NACT TOUCH EDGE NGTL
NAAL_EP = EXPAND EDGE NAAL OUTSIDE BY 0.16 EXTEND BY 0.01
BUTPA_ED = PACT COIN EDGE (NACT NOT NTAP)
BUTPA_ED_1 = BUTPA_ED INSIDE EDGE NAAL_EP
BUTSP_1 = (SP INTERACT PW) WITH EDGE BUTPA_ED_1

BUTSP_2 = ((SP INTERACT PW) WITH EDGE BUTPA_ED ) NOT BUTSP_1

GTSP_1 = GT INSIDE EDGE ((NACT NOT NTAP) TOUCH PACT)
GTSP = GT TOUCH EDGE GTSP_1

EXT BUTSP_2 GTSP < 0.08 ABUT<90 REGION
}


[question] A butted N+ pick-up AA (in L shape AA) space to PMOS gate in the same AA is >=0.23, when this butted N+ pick-up AA extrusion: 0 < h < 0.1um
[answer] SP_8c {
@ A butted N+ pick-up AA (in L shape AA) space to PMOS gate in the same AA is >=0.23, when this butted N+ pick-up AA extrusion: 0 < h < 0.1um
PAAL = PACT TOUCH INSIDE EDGE Real_PGATE
PAAL_EP = EXPAND EDGE PAAL OUTSIDE BY 0.1 EXTEND BY 0.01
BUTNA_ED = NACT COIN EDGE (PACT NOT PTAP)
BUTNA_ED_1 = BUTNA_ED INSIDE EDGE PAAL_EP
BUTSN_1 = (NACT INTERACT NW) WITH EDGE BUTNA_ED_1
GTSP_1 = (GT INSIDE EDGE (PACT TOUCH NACT)) COIN EDGE Real_PGATE
GTSP = (GT WITH EDGE GTSP_1) TOUCH EDGE Real_PGATE
EXT BUTSN_1 GTSP < 0.23 ABUT<90 REGION
}

[question] Space between a SP and a N+AA or N+POLY resistor (SN AND ((RESAA AND AA) OR (RESP1 AND GT))is 0.14um.
[answer] SP_9 {
@ Space between a SP and a N+AA or N+POLY resistor (SN AND ((RESAA AND AA) OR (RESP1 AND GT))is 0.14um.
EXT SP (AAR AND SN) < 0.14 ABUT<90 SINGULAR REGION
EXT SP (GTR AND SN) < 0.14 ABUT<90 SINGULAR REGION
}

[question] P+AA minimum enclosure by SP((not include pick up AA) is 0.08
[answer] SP_10 {
@ P+AA minimum enclosure by SP((not include pick up AA) is 0.08
X = (PTAP INTERACT GATE) AND VARMOS
Y = PACT NOT (PTAP NOT X)
Z = ENC Y SP < 0.08 ABUT >0< 90 SINGULAR REGION
Z OUTSIDE INST
}

[question] P+AA minimum enclosure by SP is 0.038 (not include pick up AA)
[answer] SRSP_10 {
@ P+AA minimum enclosure by SP is 0.038 (not include pick up AA)
X =ENC (PACT NOT PTAP) (SP NOT COIN EDGE NTAP) < 0.038 ABUT<90 REGION
X NOT OUTSIDE INST
}

[question] SP enclosure of P+ pickup AA is 0.02
[answer] SP_12 {
@ SP enclosure of P+ pickup AA is 0.02
X0 = (PTAP INTERACT GATE) AND VARMOS
X = ((PTAP OUTSIDE INST) NOT X0) NOT COIN EDGE NACT
ENC X SP < 0.02 ABUT<90 REGION
}


[question] N+AA minimum enclosure by SN if the distance to the related poly is <w= 0.16 is 0.16
[answer] SP_11 {
@ N+AA minimum enclosure by SN if the distance to the related poly is <w= 0.16 is 0.16
A = EXPAND EDGE PGTEIAA INSIDE BY 0.16 OUTSIDE BY 0.16 CORNER FILL
Y = PGATE COIN EDGE PACT
B = EXPAND EDGE Y OUTSIDE BY 0.16 EXTEND BY 0.16
C = A OR B
ENC PACT (SP IN EDGE C) < 0.16 ABUT<90 REGION OPPOSITE
}

[question] P+ AA resistor or P+Poly resistor minimum enclosure by SP is 0.14. The resistor here: (SP AND ((RESAA AND AA) OR (RESP1 AND GT)).
[answer] SP_14 {
@ P+ AA resistor or P+Poly resistor minimum enclosure by SP is 0.14
@ The resistor here: (SP AND ((RESAA AND AA) OR (RESP1 AND GT))
ENC (AAR AND SP) SP < 0.14 ABUT<90 SINGULAR REGION
ENC (GTR AND SP) SP < 0.14 ABUT<90 SINGULAR REGION
}

[question] SP and AA minimum overlap is 0.10
[answer] SP_15 {
@ SP and AA minimum overlap is 0.10
INT SP AA < 0.10 ABUT>0<90 SINGULAR REGION
}

[question] SP and AA minimum overlap, SP inner vertex to AA inner vertex is 0.098
[answer] SRSP_15 {
@ SP and AA minimum overlap, SP inner vertex to AA inner vertex is 0.098
INT (SP NOT OUTSIDE INST) ((AA NOT OUTSIDE INST) NOT TOUCH EDGE SP) < 0.098 ABUT<90 REGION OPPOSITE
}

[question] SP minimum area include the connected area within INST is 0.11
[answer] SP_16 {
@ SP minimum area include the connected area within INST is 0.11
AREA (SP OUT INST) < 0.11
}

[question] SP minimum area is 0.072
[answer] SRSP_16 {
@ SP minimum area is 0.072
X = AREA SP < 0.072
X NOT OUTSIDE INST
}


[question] SN and SP overlap is forbidden
[answer] SP_SN_17 {
@ SN and SP overlap is forbidden
SN AND SP
}

[question] Minimum enclosed area of SP is 0.11
[answer] SP_18 {
@ Minimum enclosed area of SP is 0.11
AREA ((HOLES SP INNER) NOT SP) < 0.11
}

[question] Minimum enclosure of a SP beyond a P+ AA in NW is 0.02
[answer] SP_19 {
@ Minimum enclosure of a SP beyond a P+ AA in NW is 0.02
ENC ((PACT AND NW) NOT COIN EDGE NTAP) SP < 0.02 ABUT<90 REGION
}

[question] Minimum enclosure of a SP beyond a P+ AA in NW is 0.0325
[answer] SRSP_19 {
@ Minimum enclosure of a SP beyond a P+ AA in NW is 0.0325
ENC (((PACT NOT OUTSIDE INST) AND NW) NOT COIN EDGE NTAP) SP < 0.0325 ABUT<90 REGION
}

[question] Minimum AA butted p-well contact enclosure by SP is 0.02
[answer] SP_20 {
@ Minimum AA butted p-well contact enclosure by SP is 0.02
//INT (PTAP COIN EDGE NACT) PTAP < 0.08 ABUT<90 REGION
ENC ((PTAP NOT INSIDE INST) NOT COIN EDGE NACT) SP < 0.02 ABUT<90 REGION
}

[question] P+ butted AA in P-well area (the area interact with CT) is >= 0.021um.
[answer] SP_20a {
@ P+ butted AA in P-well area(the area interact with CT)is >= 0.021um.
AREA (((((SP CUT AA ) NOT (SP ENCLOSE AA)) AND AA) NOT NW) INTERACT CT) < 0.021
}

[question] N+ butted AA in NW contact extension of SP is 0.08
[answer] SP_21 {
@ N+ butted AA in NW contact extension of SP is 0.08
INT (NTAP COIN EDGE PACT) NTAP < 0.08 ABUT<90 REGION
}

[question] N+ butted AA in NW area (the area interact with CT) is < 0.03
[answer] SP_21a {
@ N+ butted AA in NW area(the area interact with CT)
AREA (((((SN CUT AA ) NOT (SN ENCLOSE AA)) AND AA) AND NW) INTERACT CT)<0.03
}

[question] 45-degree edge length is >= 0.5um
[answer] SP_22 {
@ 45-degree edge length is >= 0.5um
X = ANGLE SP >=44.9 <=45.1
LENGTH X < 0.5
}

[question] SN minimum width (run length > 0) is 0.18
[answer] SN_1 {
@ SN minimum width(run length > 0) is 0.18
INT SN < 0.18 ABUT<90 OPPOSITE REGION
}

[question] SN width is 0.135
[answer] SRSN_1 {
@ SN width is 0.135
X =INT SN < 0.135 ABUT<90 REGION
X NOT OUTSIDE INST
}

[question] Minimum space between two SN (with run length > 0) is 0.18
[answer] SN_2 {
@ Minimum space between two SN (with run length > 0) is 0.18
EXT SN < 0.18 OPPOSITE ABUT<90 REGION
}

[question] Space between two SN is 0.135
[answer] SRSN_2 {
@ Space between two SN is 0.135
X = EXT SN < 0.135 ABUT<90 REGION
X NOT OUTSIDE INST
}

[question] Minimum space between SN and P+AA in NW (run length > 0.1um) is 0.08, except AA resistor(RESAA AND AA)
[answer] SN_3a {
@ Minimum space between SN and P+AA in NW (run length > 0.1um) is 0.08,except AA resistor(RESAA AND AA)
X = ((PACT AND NW) NOT AAR) NOT COIN EDGE SN
X1 = EXT SN X < 0.08 ABUT>0<90 REGION OPPOSITE
X2 =X1 WITH EDGE (LENGTH X1 > 0.1)
X2 OUTSIDE INST
}

[question] Minimum space between SN and P+AA in NW (run length <= 0.10um) is 0.05, except AA resistor(RESAA AND AA)
[answer] SN_3b {
@ Minimum space between SN and P+AA in NW (run length <= 0.10um) is 0.05, except AA resistor(RESAA AND AA)
X =((PACT AND NW) NOT AAR) NOT COIN EDGE SN
X1 = EXT SN X < 0.05 ABUT>0<90 REGION
X1 OUTSIDE INST
}


[question] Minimum space between SN and P+ AA inside NW is 0.043, except AA resistor. (run length > 0.1um)
[answer] SRSN_3a{
@ Minimum space between SN and P+ AA inside NW is 0.043, except AA resistor. (run length > 0.1um)
X = ((PACT NOT OUTSIDE INST) AND NW) NOT COIN EDGE SN
Y = EXT SN X < 0.043 ABUT>0<90 REGION OPPOSITE
(Y WITH EDGE (LENGTH Y > 0.1)) NOT OUTSIDE INST
}

[question] Minimum space between SN and P+ AA inside NW is 0.038, except AA resistor. (run length <= 0.1um)
[answer] SRSN_3b{
@ Minimum space between SN and P+ AA inside NW is 0.038, except AA resistor. (run length <= 0.1um)
X = ((PACT NOT OUTSIDE INST) AND NW) NOT COIN EDGE SN
Y = EXT SN X < 0.038 ABUT>0<90 REGION OPPOSITE
Z = Y COIN EDGE SN
(Y WITH EDGE (LENGTH Z <=0.1 )) NOT OUTSIDE INST
}

[question] Minimum space between SN and P+ pick-up AA is 0.02
[answer] SN_4 {
@ Minimum space between SN and P+ pick-up AA is 0.02
X = (PTAP OUTSIDE INST) NOT COIN EDGE (SN INTERACT NACT)
EXT SN X < 0.02 ABUT<90 REGION
}

[question] SN minimum extension outside of Real gate for NMOS along source drain direction is 0.16
[answer] SN_6 {
@ SN minimum extension outside of Real gate for NMOS along source drain direction is 0.16
ENC (Real_GATE COIN EDGE GT) SN < 0.16 ABUT<90 REGION OPPOSITE
}

[question] SN minimum extension outside of Poly gate for NMOS along source drain direction is 0.18, excluding floating poly
[answer] SRSN_6 {
@ SN minimum extension outside of Poly gate for NMOS along source drain direction is 0.18, excluding floatin poly
SD = ((AA INTERACT GT) NOT GT) INTERACT CT
X = ENC (((GT NOT OUTSIDE INST) NOT FTGT) IN EDGE NACT) SN < 0.18 ABUT<90 REGION OPPOSITE
X INTERACT SD
}

[question] Minimum space between SN and S/D direction P-channel Real gate is 0.16
[answer] SN_7a {
@ Minimum space between SN and S/D driection P-channel Real gate is 0.16
EXT SN (GT COIN EDGE Real_PGATE) < 0.16 ABUT<90 REGION OPPOSITE
}

[question] Minimum space between SN and S/D direction P-channel poly gate is 0.18, excluding floating poly
[answer] SRSN_7a {
@ Minimum space between SN and S/D driection P-channel poly gate is 0.18, excluding floatin poly
EXT SN (((GT NOT OUTSIDE INST) NOT FTGT) IN EDGE PACT) < 0.18 ABUT<90 REGION OPPOSITE
}

[question] Minimum space between SN and non-S/D direction P-channel Real gate is 0.08.
[answer] SN_7b {
@ Minimum space between SN and Non-S/D driection P-channel Real gate is 0.08.
@ This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
X = EXT SN Real_PGATE < 0.08 ABUT<90 SINGULAR REGION
X NOT SRAM
}


[question] A butted P+ pick-up AA space to NMOS Real Gate in the same AA is >=0.23
[answer] SN_7c{
@ A butted P+ pick-up AA space to NMOS Real Gate in the same AA is >=0.23
EXT (PTAP_EMPTY2 TOUCH NSD_EMPTY2) Real_NGATE_EMPTY2 <0.23 ABUT<90 SINGULAR REGION CONNECTED
}

[question] Minimum space between SN and Non-S/D direction P-channel poly gate is 0.043, excluding floating poly
[answer] SRSN_7b {
@ Minimum space between SN and Non-S/D driection P-channel poly gate is 0.043, excluding floatin poly
EXT SN ((PGATE AND INST) NOT FTGT) < 0.043 ABUT<90 REGION
}

[question] Minimum space between SN on a butted AA and poly gate edge in case the extending of butted N+ AA is less than 0.16 in NW is 0.16
[answer] SN_8a {
@ Minimum space between SN on a butted AA and poly gate edge in case the extending of butted N+ AA is less than 0.16 in NW is 0.16
PGTL = PACT INSIDE EDGE GT
PAAL = PACT TOUCH EDGE PGTL
PAAL_EP = EXPAND EDGE PAAL OUTSIDE BY 0.16 EXTEND BY 0.01
BUTNA_ED = NACT COIN EDGE (PACT NOT PTAP)
BUTNA_ED_1 = BUTNA_ED INSIDE EDGE PAAL_EP
BUTSN_1 = (SN INTERACT NW) WITH EDGE BUTNA_ED_1

GTSN_1 = GT INSIDE EDGE ((PACT NOT PTAP) TOUCH NACT)
GTSN = GT TOUCH EDGE GTSN_1
EXT BUTSN_1 GTSN < 0.16 ABUT<90 REGION
}

[question] Minimum space between SN on a butted AA and poly gate edge in case the extending of butted N+ AA is larger than 0.16 in NW is 0.08
[answer] SN_8b {
@ Minimum space between SN on a butted AA and poly gate edge in case the extending of butted N+ AA is larger than 0.16 in NW is 0.08
PGTL = PACT INSIDE EDGE GT
PAAL = PACT TOUCH EDGE PGTL
PAAL_EP = EXPAND EDGE PAAL OUTSIDE BY 0.16 EXTEND BY 0.01
BUTNA_ED = NACT COIN EDGE (PACT NOT PTAP)
BUTNA_ED_1 = BUTNA_ED INSIDE EDGE PAAL_EP
BUTSN_1 = (SN INTERACT NW) WITH EDGE BUTNA_ED_1

BUTSN_2 = ((SN INTERACT NW) WITH EDGE BUTNA_ED ) NOT BUTSN_1

GTSN_1 = GT INSIDE EDGE ((PACT NOT PTAP) TOUCH NACT)
GTSN = GT TOUCH EDGE GTSN_1

EXT BUTSN_2 GTSN < 0.08 ABUT<90 REGION
}


[question] A butted P+ pick-up AA (in L shape AA) space to NMOS Real Gate in the same AA is >=0.23, when this butted P+ pick-up AA extrusion: 0 < h < 0.1um
[answer] SN_8c{
@ A butted P+ pick-up AA (in L shape AA) space to NMOS Real Gate in the same AA is >=0.23, when this butted P+ pick-up AA extrusion: 0 < h < 0.1um
NAAL = NACT TOUCH INSIDE EDGE Real_NGATE
NAAL_EP = EXPAND EDGE NAAL OUTSIDE BY 0.1 EXTEND BY 0.01
BUTNA_ED = PACT COIN EDGE (NACT NOT NTAP)
BUTNA_ED_1 = BUTNA_ED INSIDE EDGE NAAL_EP
BUTSN_1 = (PACT INTERACT PW) WITH EDGE BUTNA_ED_1

GTSN_1 = (GT INSIDE EDGE ((NACT NOT NTAP) TOUCH PACT)) COIN EDGE Real_NGATE
GTSN = (GT WITH EDGE GTSN_1) TOUCH EDGE Real_NGATE
N = CONVEX EDGE (NACT OR (GT ENCLOSE NGATE)) ANGLE1==270 ANGLE2==270
N_REGION = EXPAND EDGE N OUTSIDE BY 0.1
EXT BUTSN_1 GTSN < 0.23 ABUT<90 REGION
}

[question] Minimum space between a SN and a P-type resistor is 0.14um. (SP AND ((RESAA AND AA) OR (RESP1 AND GT))
[answer] SN_9 {
@ Minimum space between a SN and a P-type resistor is 0.14um. (SP AND ((RESAA AND AA) OR (RESP1 AND GT))
EXT SN (AAR AND SP) < 0.14 ABUT<90 SINGULAR REGION
EXT SN (GTR AND SP) < 0.14 ABUT<90 SINGULAR REGION
}

[question] N+AA minimum enclosure by SN if the distance to the poly gate is > w=0.16 is 0.08. N+ pickup AA minimum enclosure by SN is 0.08
[answer] SN_10 {
@ N+AA minimum enclosure by SN if the distance to the poly gate is > w=0.16 is 0.08. N+ pickup AA minimum enclosure by SN is 0.08
X = ((NACT NOT NTAP) NOT NWR_SN) NOT COIN EDGE PACT
A = X COIN EDGE SP
B = X NOT COIN EDGE SP
Achk = LENGTH A > 0.08
ENC Achk SN < 0.08 ABUT<90 REGION
ENC B SN < 0.08 ABUT<90 REGION OPPOSITE
}

[question] N+AA minimum enclosure by SN(not include pick up AA) is 0.08 Waive for (AA interact RESNW)
[answer] SN_10 {
@ N+AA minimum enclosure by SN(not include pick up AA) is 0.08 Waive for (AA interact RESNW)
X = (NTAP INTERACT GATE) AND VARMOS
Y = ((AA NOT INTERACT RESNW) AND SN) NOT (NTAP NOT X)
Z = ENC Y SN < 0.08 ABUT >0< 90 SINGULAR REGION
Z OUTSIDE INST
}


[question] N+AA minimum enclosure by SN is 0.041 (not include pick up AA).N+AA outter vertex to SN inner vertex is 0.037(Not apply to AA along S/D direction).
[answer] SRSN_10 {
@ N+AA minimum enclosure by SN is 0.041 (not include pick up AA)
@ N+AA outter vertex to SN inner vertex is 0.037(Not apply to AA along S/D direction)
ENC ((NACT NOT OUTSIDE INST) NOT NTAP) (SN NOT COIN EDGE PTAP) < 0.041 ABUT<90 REGION OPPOSITE
ENC ((NACT NOT OUTSIDE INST) TOUCH EDGE GATE) (SN NOT COIN EDGE PTAP) < 0.037 ABUT<90 REGION
}

[question] SN minimum extension outside of poly gate for NMOS is 0.22
[answer] SN_11 {
@ SN minimum extension outside of poly gate for NMOS is 0.22
A = EXPAND EDGE NGTEIAA INSIDE BY 0.16 OUTSIDE BY 0.16 CORNER FILL
Y = NGATE COIN EDGE NACT
B = EXPAND EDGE Y OUTSIDE BY 0.16 EXTEND BY 0.16
C = A OR B
ENC NACT (SN IN EDGE C) < 0.16 ABUT<90 REGION OPPOSITE
}

[question] N+ pickup AA minimum enclosure by SN is 0.02 Waive for (AA interact RESNW)
[answer] SN_12 {
@ N+ pickup AA minimum enclosure by SN is 0.02 Waive for (AA interact RESNW)
X0 = (NTAP INTERACT GATE) AND VARMOS
X = ((NTAP NOT X0) NOT (AA INTERACT RESNW)) NOT COIN EDGE PACT
ENC X SN < 0.02 ABUT<90 REGION
}

[question] N+AA resistor or N+POLY resistor minimum enclosure by SN is 0.14. The resistor here: (SN AND ((RESAA AND AA) OR (RESP1 AND GT))
[answer] SN_14 {
@ N+AA resistor or N+POLY resistor minimum enclosure by SN is 0.14. The resistor here: (SN AND ((RESAA AND AA) OR (RESP1 AND GT))
ENC (AAR AND SN) SN < 0.14 ABUT<90 SINGULAR REGION
ENC (GTR AND SN) SN < 0.14 ABUT<90 SINGULAR REGION
}

[question] SN and AA minimum overlap is 0.10
[answer] SN_15 {
@ SN and AA minimum overlap is 0.10
INT SN AA < 0.10 ABUT>0<90 SINGULAR REGION
}

[question] SN minimum area include the connected area within INST is 0.11
[answer] SN_16 {
@ SN minimum area include the connected area within INST is 0.11
AREA (SN OUT INST) < 0.11
}

[question] SN minimum area is 0.0823
[answer] SRSN_16 {
@ SN minimum area is 0.0823
X =AREA SN < 0.0823
X NOT OUTSIDE INST
}


[question] Minimum enclosed area of SN is 0.11
[answer] SN_18 {
@ Minimum enclosed area of SN is 0.11
AREA (((HOLES SN INNER) NOT SN) OUTSIDE INST) < 0.11
}

[question] Minimum enclosed area of SN is 0.0728
[answer] SRSN_18 {
@ Minimum enclosed area of SN is 0.0728
X = AREA ((HOLES SN INNER) NOT SN) < 0.0728
X NOT OUTSIDE INST
}

[question] Minimum enclosure of a SN beyond a N+ AA in PW is 0.02
[answer] SN_19 {
@ Minimum enclosure of a SN beyond a N+ AA in PW is 0.02
ENC ((NACT AND PW) NOT COIN EDGE PTAP) SN < 0.02 ABUT<90 REGION
}

[question] Minimum AA butted N-well contact enclosure by SN is 0.02
[answer] SN_20 {
@ Minimum AA butted N-well contact enclosure by SN is 0.02
ENC (NTAP NOT COIN EDGE PACT) SN < 0.02 ABUT<90 REGION
}

[question] N+ butted AA in N-well area(the area interact with CT)is >= 0.021
[answer] SN_20a {
@ N+ butted AA in N-well area(the area interact with CT)is >= 0.021
AREA (((((SN CUT AA ) NOT (SN ENCLOSE AA)) AND AA) AND NW) INTERACT CT) < 0.021
}

[question] AA butted p-well contact minimum extension of SN is 0.08
[answer] SN_21 {
@ AA butted p-well contact minimum extension of SN is 0.08
INT (PTAP COIN EDGE NACT) PTAP < 0.08 ABUT<90 REGION
}

[question] SN minimum width and length if the area touch with gate
[answer] SN_22 {
@ SN minimum width and length if the area touch with gate
error = INT SN < 0.28 ABUT<90 OPPOSITE REGION
error INTERACT GATE
}

[question] 45-degree edge length is >= 0.5um
[answer] SN_23 {
@ 45-degree edge length is >= 0.5um
X = ANGLE SN >=44.9 <=45.1
LENGTH X < 0.5
}

[question] SAB minimum width is 0.20um
[answer] SAB_1 {
@ SAB minimum width is 0.20um
INT SAB < 0.20 ABUT<90 SINGULAR REGION
}

[question] Minimum space between two SABs is 0.20um
[answer] SAB_2 {
@ Minimum space between two SABs is 0.20um
EXT SAB < 0.20 ABUT<90 SINGULAR REGION
}

[question] Minimum extension of related AA outside of SAB is 0.2um
[answer] SAB_3 {
@ Minimum extension of related AA outside of SAB is 0.2um
X =ENC SAB AA < 0.20 ABUT<90 SINGULAR REGION
X NOT OCOVL
}

[question] Minimum space between SAB and AA is 0.15um
[answer] SAB_4 {
@ Minimum space between SAB and AA is 0.15um
EXT SAB AA < 0.15 ABUT<90 SINGULAR REGION
}

[question] Minimum space between SAB and poly Real GATE is 0.24um.
[answer] SAB_5 {
@ Minimum space between SAB and poly Real GATE is 0.24um.
EXT SAB Real_GATE < 0.24 ABUT<90 SINGULAR REGION
}

[question] Minimum extension of SAB outside of poly is 0.15um.
[answer] SAB_6 {
@ Minimum extension of SAB outside of poly is 0.15um.
ENC GT SAB < 0.15 ABUT<90 SINGULAR REGION
}

[question] Minimum space between SAB and CT is 0.18
[answer] SAB_7 {
@ Minimum space between SAB and CT is 0.18
X= EXT SAB CT < 0.18 ABUT<90 SINGULAR REGION
X NOT OCOVL
(CT AND SAB) NOT OCOVL
}

[question] Minimum extension of SAB outside of AA is 0.15um.
[answer] SAB_8 {
@ Minimum extension of SAB outside of AA is 0.15um.
X = ENC AA SAB < 0.15 ABUT<90 SINGULAR REGION
X NOT OCOVL
}

[question] Extension of SAB outside of AA/poly when SAB width >10um is >= 0.25um.
[answer] SAB_8a {
@ Extension of SAB outside of AA/poly when SAB width >10um is >= 0.25um.
SAB_CHECK = SAB WITH WIDTH > 10
ENC AA SAB_CHECK < 0.25 SINGULAR ABUT < 90 REGION
ENC GT SAB_CHECK < 0.25 SINGULAR ABUT < 90 REGION
}

[question] Extension of SAB outside of AA/poly when SAB width < 0.43um is >= 0.25um.
[answer] SAB_8b {
@ Extension of SAB outside of AA/poly when SAB width < 0.43um is >= 0.25um.
SAB_CHECK = SAB WITH WIDTH < 0.43
ENC AA SAB_CHECK < 0.25 SINGULAR ABUT < 90 REGION
ENC GT SAB_CHECK < 0.25 SINGULAR ABUT < 90 REGION
}

[question] SAB overlap with SN/SP is 0.28
[answer] SAB_9 {
@ SAB overlap with SN/SP is 0.28
INT SN SAB < 0.28 ABUT<90 SINGULAR REGION
INT SP SAB < 0.28 ABUT<90 SINGULAR REGION
}

[question] SAB minimum area is 0.20
[answer] SAB_10 {
@ SAB minimum area is 0.20
AREA SAB < 0.20
}

[question] SAB minimum enclosed area is 0.37
[answer] SAB_10a {
@ SAB minimum enclosed area is 0.37
AREA ((HOLES SAB INNER) NOT SAB) < 0.37
}

[question] Minimum space between SAB and ((GT not interacting with SAB) on STI) is 0.2um.
[answer] SAB_11 {
@ Minimum space between SAB and ((GT not interacting with SAB) on STI) is 0.2um.
EXT SAB ((GT NOT INTERACT SAB) NOT AA) < 0.2 ABUT<90 SINGULAR REGION
}

[question] CT in SAB region is not allowed
[answer] SAB_12 {
@ CT in SAB region is not allowed
AND CT SAB
}

[question] Minimum resistor poly extension to SAB is 0.3. The resistor: GT interact RESP1
[answer] SAB_15 {
@ Minimum resistor poly extension to SAB is 0.3. The resistor: GT interact RESP1
ENC SAB (GT INTERACT RESP1) < 0.3 ABUT<90 SINGULAR REGION
}

[question] SAB overlap of GATE is not allowed(except ESDIO1,ESDIO2,ESDHV,OCOVL region).
[answer] SAB_16_R_OFF {
@ SAB overlap of GATE is not allowed(except ESDIO1,ESDIO2,ESDHV,OCOVL region).
(SAB AND GATE) NOT (OR ESDIO1 ESDIO2 ESDHV OCOVL)
}

[question] Fixed CT size (square shape)is 0.06.
[answer] CT_1 {
@CT.1 Fixed CT size (square shape)is 0.06.
X = RECTANGLE CTi ASPECT ==1
NOT RECTANGLE X == 0.060 BY == 0.060
}

[question] Non-square CT only allowed inside of [EFUSE, OCOVL, SRAM(INST)]
[answer] CT_1a {
@ Non-square CT only allowed inside of [EFUSE, OCOVL, SRAM(INST)]
X = RECTANGLE CTi ASPECT ==1
Y = CT NOT X
(Y NOT INSIDE (EFUSE OR INST)) NOT OCOVL
}

[question] Minimum space between two contacts is 0.080
[answer] CT_2 {
@ Minimum space between two contacts is 0.080
EXT SQCT < 0.080 ABUT<90 SINGULAR REGION
}

[question] Minimum space between two contacts on different net is 0.11
[answer] CT_2a {
@ Minimum space between two contacts on different net is 0.11
X = EXT SQCT < 0.11 ABUT<90 REGION NOT CONNECTED
X OUTSIDE INST
}

[question] Minimum space between two contacts on different net is 0.088
[answer] SRCT_2a {
@ Minimum space between two contacts on different net is 0.088
X = EXT SQCT < 0.088 ABUT<90 REGION NOT CONNECTED
X NOT OUTSIDE INST
}

[question] CT must be on AA or Poly
[answer] SRCT.101{
@ CT must be on AA or Poly
(SQCT NOT OUTSIDE INST) NOT (AA OR GT)
}

[question] CT min space to V1 on different net is 0.075
[answer] SRCT_102{
@ CT min space to V1 on different net is 0.075
X = EXT SQCT V1 <0.075 ABUT<90 REGION NOT CONNECTED
X NOT OUTSIDE INST
}

[question] CT touching INST distance to CT no touching INST is 0.10
[answer] SRCT_105 {
@ CT touching INST distance to CT no touching INST is 0.10
EXT (SQCT NOT OUTSIDE INST) (CT OUTSIDE INST) < 0.10 ABUT<90 SINGULAR REGION
}

[question] CT array minimum space to CT array for run length > 0.34um is 0.11.This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
[answer] CT_3 {
@ CT array minimum space to CT array for run length > 0.34um is 0.11
@ This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
X = EXT (CT_array OUTSIDE SRAM) < 0.11 ABUT<90 OPPOSITE REGION
X WITH EDGE (LENGTH X > 0.34)
}

[question] CT array space to CT array for run length > 0.34?m is >= 0.18um.CT array is formed by logic operation (((all CTs su0.09) sd0.3) su0.21).
[answer] CT_3_R_OFF {
@ CT array space to CT array for run length > 0.34?m is >= 0.18um.
@ CT array is formed by logic operation (((all CTs su0.09) sd0.3) su0.21).
X = EXT CT_array < 0.18 ABUT<90 OPPOSITE REGION
X WITH EDGE (LENGTH X > 0.34)
}

[question] CT array minimum space to CT array for run length > 0.000 um is 0.223
[answer] SRCT_3 {
@ CT array minimum space to CT array for run length > 0.000 um is 0.223
EXT (CT_array NOT OUTSIDE INST) < 0.223 ABUT<90 OPPOSITE REGION
}

[question] Minimum space between two contacts in CT array is 0.08: contact array is larger or equal to 4x4 CT.Two contact regions whose space is within 0.12um at same M1 are considered to be in the same array.This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
[answer] CT_3a {
@ Minimum space between two contacts in CT array is 0.08: contact array is larger or equal to 4x4 CT.
@ Two contact regions whose space is within 0.12um at same M1 are considered to be in the same array.
@ This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
X = (SIZE (CT OUTSIDE SRAM) BY 0.060 OVERUNDER) AND M1
Y = SIZE X BY 0.235 UNDEROVER
Z = CT INTERACT Y
ERR = (EXT Z < 0.08 ABUT<90 SINGULAR REGION) INSIDE M1
ERR NOT SRAM
}

[question] Minimum space between AA region and contact overlap poly is 0.040
[answer] CT_4 {
@ Minimum space between AA region and contact overlap poly is 0.040
EXT (INTERCT OUTSIDE INST) AA < 0.040 ABUT<90 SINGULAR REGION
}

[question] Space between AA region and contact overlap poly is >= 0.05um.
[answer] CT_4_R_OFF {
@ Space between AA region and contact overlap poly is >= 0.05um.
EXT (INTERCT OUTSIDE INST) AA < 0.050 ABUT<90 SINGULAR REGION
}

[question] Minimum space between AA region and contact overlap poly is 0.032
[answer] SRCT_4 {
@ Minimum space between AA region and contact overlap poly is 0.032
EXT ((SQCT NOT OUTSIDE INST) AND GT) AA < 0.032 ABUT<90 SINGULAR REGION
}

[question] 0.9/1.1/1.2V device minimum space between Real gate region and contact overlap AA is 0.040
[answer] CT_5 {
@ 0.9/1.1/1.2V device minimum space between Real gate region and contact overlap AA is 0.040
EXT (Real_GATE OUTSIDE INST) (ACT_CT OUTSIDE INST) < 0.040 ABUT<90 SINGULAR REGION
}

[question] 0.9/1.0/1.1/1.2V device space between Real Gate and contact overlap AA is >= 0.05um.
[answer] CT_5_R_OFF {
@ 0.9/1.0/1.1/1.2V device space between Real Gate and contact overlap AA is >= 0.05um.
EXT (Real_GATE OUTSIDE INST) (ACT_CT OUTSIDE INST) < 0.050 ABUT<90 SINGULAR REGION
}

[question] Minimum space between gate region and contact overlap AA is 0.028
[answer] SRCT_5 {
@ Minimum space between gate region and contact overlap AA is 0.028
X = EXT GATE (SQCT AND AA) < 0.028 ABUT<90 SINGULAR REGION
X NOT OUTSIDE INST
}

[question] 1.8/2.5V device minimum space between Real gate(enclosure by TG or DG) to contact overlap AA is 0.080
[answer] CT_5a {
@ 1.8/2.5V device minimum space between Real gate(enclosure by TG or DG) to contact overlap AA is 0.080
EXT (Real_GATE AND (DG OR TG)) ACT_CT < 0.080 ABUT<90 SINGULAR REGION
}

[question] Minimum enclosure of an AA region beyond an AA CT region is 0.005
[answer] CT_6 {
@ Minimum enclosure of an AA region beyond an AA CT region is 0.005
ENC (CT INTERACT AA) AA < 0.005 ABUT<90 SINGULAR OUTSIDE ALSO
}

[question] CT must be within AA (if CT touches AA), and must meet rule (CT.6a or (CT.6b, CT.6c)) and CT.6d. CT.6 CT.6a, CT.6b, CT.6c and CT.6d are not applicable for CT interacts with EFUSE(81;2).The CT here is interacted with M1 and AA intersection.CT enclosure by AA (four sides) >=0.01.CT enclosure by AA (exclude pick-up AA) for two opposite sides when either opposite sides<0.01um, >=0.005um >=0.03um.CT enclosure by AA >=0.005.
[answer] CT_6abd {
@ CT must be within AA (if CT touches AA), and must meet rule (CT.6a or (CT.6b, CT.6c)) and CT.6d.
@ CT.6 CT.6a, CT.6b, CT.6c and CT.6d are not applicable for CT interacts with EFUSE(81;2)
@The CT here is interacted with M1 and AA intersection.
@ CT enclosure by AA (four sides) >=0.01
@ CT enclosure by AA (exclude pick-up AA) for two opposite sides when either opposite sides<0.01um, >=0.005um >=0.03um.
@ CT enclosure by AA >=0.005
@ This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
(((CT OUTSIDE SRAM) INTERACT AA) NOT AA ) NOT EFUSE
AAandM1 = ((AA NOT GT) AND M1) INTERACT (CT OUTSIDE SRAM)
BadCT = RECTANGLE ENCLOSURE ((CT OUTSIDE SRAM) NOT TAP) AA OUTSIDE ALSO
GOOD 0.01 OPPOSITE 0.01 OPPOSITE 0.01 OPPOSITE 0.01 OPPOSITE
GOOD 0.03 OPPOSITE 0.005 OPPOSITE 0.03 OPPOSITE 0.005 OPPOSITE
(BadCT INTERACT AAandM1) NOT EFUSE
}

[question] CT enclosure by AA (four sides) >=0.01.CT enclosure by pick-up AA for two opposite sides when either opposite sides<0.01um, >=0.005um.>=0.02um.CT enclosure by AA >=0.005.
[answer] CT_6acd {
@ CT enclosure by AA (four sides) >=0.01
@ CT enclosure by pick-up AA for two opposite sides when either opposite sides<0.01um, >=0.005um.>=0.02um.
@ CT enclosure by AA >=0.005
@ This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
AAandM1 = ((AA NOT GT) AND M1) INTERACT (CT OUTSIDE SRAM)
BadCT = RECTANGLE ENCLOSURE ((CT OUTSIDE SRAM) AND TAP) AA OUTSIDE ALSO
GOOD 0.01 OPPOSITE 0.01 OPPOSITE 0.01 OPPOSITE 0.01 OPPOSITE
GOOD 0.02 OPPOSITE 0.005 OPPOSITE 0.02 OPPOSITE 0.005 OPPOSITE
(BadCT INTERACT AAandM1) NOT EFUSE
}

[question] CT touching INST, Minimum CT enclosure by AA is -0.011
[answer] SRCT_6a {
@ CT touching INST, Minimum CT enclosure by AA is -0.011
CTintAA = (SQCT NOT OUTSIDE INST) INTERACT AA
(SIZE CTintAA BY -0.011) NOT AA
}

[question] Minimum enclosure of a poly region beyond a poly CT region is 0.00
[answer] CT_7 {
@ Minimum enclosure of a poly region beyond a poly CT region is 0.00
(CT INTERACT GT) NOT GT
}

[question] CT must be within poly per M1 and poly intersection containing a CT, must meet rule CT.7a or CT.7b.Minimum CT enclosure by poly is 0.01.Minimum CT enclosure by poly for two opposite sides is 0.02 when either two opposite sides<=0.01um, >=0um, except EFUSE.This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
[answer] CT_7ab {
@ CT must be within poly
@ per M1 and poly intersection containing a CT, must meet rule CT.7a or CT.7b
@ Minimum CT enclosure by poly is 0.01
@ Minimum CT enclosure by poly for two opposite sides is 0.02 when either two opposite sides<=0.01um, >=0um, except EFUSE.
@ This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.
(((CT OUTSIDE SRAM) INTERACT GT) NOT GT) NOT EFUSE
GTandM1 = (GT AND M1) INTERACT (CT OUTSIDE SRAM)
BadCT = RECTANGLE ENCLOSURE (CT OUTSIDE SRAM) GT OUTSIDE ALSO
GOOD 0.01 OPPOSITE 0.01 OPPOSITE 0.01 OPPOSITE 0.01 OPPOSITE
GOOD 0.02 0.00 0.02 0.00
(BadCT INTERACT GTandM1) NOT EFUSE
}


[question] Minimum CT enclosure by Poly is -0.003
[answer] SRCT_7a {
@ Minimum CT enclosure by Poly is -0.003
CTintGT = (SQCT NOT OUTSIDE INST) INTERACT GT
(SIZE CTintGT BY -0.003) NOT GT
}

[question] Minimum CT(on AA) must be fully enclosed by (SN OR SP) is 0.03um.This rule is not applied for OCOVL region.
[answer] CT_8 {
@ Minimum CT(on AA) must be fully enclosed by (SN OR SP) is 0.03um.
@ This rule is not applied for OCOVL region.
(ENC ACT_CT (SN OR SP) < 0.030 ABUT<90 SINGULAR REGION OUTSIDE ALSO) NOT OCOVL
}

[question] Minimum CT(on AA) enclosure by SN is 0.03
[answer] CT_9 {
@ Minimum CT(on AA) enclosure by SN is 0.03
ENC ACT_CT SN < 0.030 ABUT<90 SINGULAR REGION
}

[question] CT overlap (gate or (STI not GT)) region is forbidden. Waive the CT overlap gate in (LOGO, INDMY, MOMDMY). Waive the CT overlap STI for (CT straddles STI in INST). Waive rectangle CT in ( INST or EFUSE) violation of this rule.
[answer] CT_10 {
@ CT overlap (gate or (STI not GT)) region is forbidden. Waive the CT overlap gate in (LOGO, INDMY, MOMDMY).
@ Waive the CT overlap STI for (CT straddles STI in INST). Waive rectangle CT in ( INST or EFUSE) violation of this rule.
X1 = (CT AND (AA AND GT)) OR (CT NOT ((AA OR AADUM) OR GT))
X2 = (CT AND GATE) AND ((LOGO OR INDMY) OR MOMDMY)
X3 = (CT NOT (AA OR AADUM) ) AND INST
((X1 NOT X2) NOT X3) NOT ((CT NOT SQCT) AND (INST OR EFUSE))
}

[question] AA contact located on SN/SP boundary is forbidden
[answer] CT_11 {
@ AA contact located on SN/SP boundary is forbidden
(ACT_CT INTERACT SN) INTERACT SP
}

[question] It is not allowed that (CT not outside AA) touches or straddles on (SN or SP) edge
[answer] CT_11 {
@ It is not allowed that (CT not outside AA) touches or straddles on (SN or SP) edge
X =CT NOT OUTSIDE AA
(X INTERACT SN) NOT (CT INSIDE SN)
(X INTERACT SP) NOT (CT INSIDE SP)
}

[question] Non-salicided contacts are not allowed
[answer] CT_12 {
@ Non-salicided contacts are not allowed
(CT AND SAB) NOT OCOVL
}

[question] 45 degree rotated contacts are not allowed.
[answer] CT_13 {
@ 45 degree rotated contacts are not allowed.
@ This rule is not applied for OCOVL region.
(CT WITH EDGE (ANGLE CT > 0 < 90)) NOT OCOVL
}

[question] Rectangle CT min space to Rectangle CT is 0.074
[answer] SRRCT_103 {
@ Rectangle CT min space to Rectangle CT is 0.074
EXT (RECT NOT OUTSIDE INST) < 0.074 ABUT<90 SINGULAR REGION
}

[question] Rectangle CT min space to CT no touching INST is 0.073
[answer] SRRCT_104 {
@ Rectangle CT min space to CT no touching INST is 0.073
EXT RECT (CT NOT INTERACT INST) < 0.073 ABUT<90 SINGULAR REGION
}

[question] Rectangle CT width is 0.06.Rectangle CT length is 0.16
[answer] SRRCT_101_102 {
@ Rectangle CT width is 0.06
@ Rectangle CT length is 0.16
((CT NOT OUTSIDE INST) NOT SQCT) NOT RECT
}

[question] Rectangle CT min space to CT INSIDE INST with touching prohibited is 0.07
[answer] SRRCT_104c {
@ Rectangle CT min space to CT INSIDE INST with touching prohibited is 0.07
EXT (RECT NOT OUTSIDE INST) (CT INSIDE INST) < 0.07 ABUT>0<90 SINGULAR REGION
}


[question] Recommend to have redundant CT to prevent high contact resistance:
On the resistor connection.
Gate Source/Drain, and poly.
For large transistor, spread the CT necessary for current all over the S/D area.
DRC highlight single CT connection.
[answer] CT_19_R {
@ Recommend to have redundant CT to prevent high contact resistance:
@ On the resistor connection.
@ Gate Source/Drain, and poly
@ For large transistor, spread the CT necessary for current all over the S/D area.
@ DRC highlight single CT connection
X = ((HRP AND HRPDMY) AND SAB) AND GT
X1 =((GT ENCLOSE X ) NOT X) ENCLOSE CT ==1 // HRP
Z = (RESP1 AND SAB) AND GT
X2 =((GT ENCLOSE Z ) NOT Z ) ENCLOSE CT ==1 //RESP1
Y = (SAB AND RESAA) AND AA
X3 =((AA ENCLOSE Y) NOT Y) ENCLOSE CT ==1 // RESAA
X4 =((AA ENCLOSE AAD) NOT AAD) ENCLOSE CT ==1 //DIFRES
X5 =(AA TOUCH NWRSTI) ENCLOSE CT ==1 // RESNWST
X6 =(HOLES (SAB ENCLOSE RESNWAA)) ENCLOSE CT ==1 // RESNWAA
X7= ((GT ENCLOSE GTP) NOT GTP) ENCLOSE CT ==1 //PLRES
X8=(NSD OR PSD) ENCLOSE CT==1
X9= ((GT ENCLOSE GATE) NOT GATE) ENCLOSE CT==1
((((((((X1 OR X2) OR X3) OR X4) OR X5) OR X6) OR X7) OR X8) OR X9 ) OUTSIDE SRAM
}
[question] CT must be fully covered by M1 and (AA OR GT).
This rule is not applied for (DNSRAM OR LRSRAM OR D2SRAM OR RFSRAM) covered region.
[answer] CT_20 {
@ CT must be fully covered by M1 and (AA OR GT).
@ This rule is not applied for (DNSRAM OR LRSRAM OR D2SRAM OR RFSRAM) covered region.
(CT NOT (M1 OR (AA OR GT))) NOT SRAM
}

[question] It's not allowed CT overlap with NW, AA, Poly, and M1 resistor.
For NW, AA, silicide poly resistor, please refer each resistor section definition.
Non-silicide poly resistor definition: ((GT AND RESP1) AND SAB)
M1 resistor definition: (M1 AND M1R).
[answer] CT_21 {
@ It's not allowed CT overlap with NW, AA, Poly, and M1 resistor.
@ For NW, AA, silicide poly resistor, please refer to each resistor section definition.
@ Non-silicide poly resistor definition: ((GT AND RESP1) AND SAB)
@ M1 resistor definition: (M1 AND M1R).
RES = OR RESNWAA NWRSTI AAR AAD (GTR AND SAB) GTP
CT AND (M1 AND M1R)
CT AND RES
}

[question] Rectangle CT end min space to AA is 0.133 (with run length>0)
[answer] SRRCT_106 {
@ Rectangle CT end min space to AA is 0.133 (with run length>0)
EXT (SCT_end NOT OUTSIDE EDGE INST) AA < 0.133 ABUT<90 REGION OPPOSITE
}

[question] Rectangle CT side min space to AA is 0.069
[answer] SRRCT_106a {
@ Rectangle CT side min space to AA is 0.069
EXT (SCT_side NOT OUTSIDE EDGE INST) AA < 0.069 ABUT<90 REGION
}


[question] Rectangle CT end min space to Poly is 0.037
[answer] SRRCT_107 {
@ Rectangle CT end min space to Poly is 0.037
EXT (SCT_end NOT OUTSIDE EDGE INST) GT < 0.037 ABUT<90 REGION
}

[question] Rectangle CT side min space to Poly is 0.082
[answer] SRRCT_107a {
@ Rectangle CT side min space to Poly is 0.082
EXT (SCT_side NOT OUTSIDE EDGE INST) GT < 0.082 ABUT<90 REGION
}

[question] Rectangle CT min space to M1 is 0.057
[answer] SRRCT_108 {
@ Rectangle CT min space to M1 is 0.057
EXT (RECT NOT OUTSIDE INST) M1 < 0.057 ABUT<90 SINGULAR REGION
}

[question] M1 minimum width is 0.07
[answer] M1_1 {
@ M1 minimum width is 0.07
INT M1_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] M1 minimum width is 0.08um.
[answer] M1_1_R_OFF {
@ M1 minimum width is 0.08um.
INT M1 < 0.08 ABUT<90 SINGULAR REGION
}


[question] M1 maximum width is 4.5
[answer] M1_2 {
@ M1 maximum width is 4.5
Y1 = M1_all NOT INDMY
Y2 = M1_all AND INDMY
Y1 WITH WIDTH >4.5
X0= INT Y2 < 4.501 REGION
X1= Y2 NOT X0
X2= Y2 WITH WIDTH >4.5
(X1 INTERACT X2) WITH WIDTH >4.5
}

[question] M1 minimum space is 0.07.
This rule is not applied for (DNSRAM OR LRSRAM OR D2SRAM OR RFSRAM) covered region.
[answer] M1_3 {
@ M1 minimum space is 0.07.
@ This rule is not applied for (DNSRAM OR LRSRAM OR D2SRAM OR RFSRAM) covered region.
X = EXT M1_all < 0.07 ABUT<89.99 SINGULAR REGION
X OUTSIDE SRAM
}

[question] M1 minimum space is 0.08
[answer] M1_3_R_OFF {
@ M1 minimum space is 0.08
X = EXT M1 < 0.08 ABUT<89.99 SINGULAR REGION
X OUTSIDE SRAM
}

[question] M1 outer vertex to outer vertex distance is 0.064
[answer] SRM1_3sa {
@ M1 outer vertex to outer vertex distance is 0.064
X = EXT M1 < 0.064 ABUT<90 SINGULAR REGION CORNER TO CORNER
X NOT OUTSIDE INST
}

[question] M1 minimum area (The INST connected area apply SRAM design rule) is 0.0196
[answer] M1_4 {
@ M1 minimum area (The INST connected area apply SRAM design rule) is 0.0196
AREA (M1_all OUT INST) < 0.0196
}


[question] Area when all of the M1 edge length < 0.17um is >= 0.055um2.
This rule is not applicable for (DNSRAM OR LRSRAM OR D2SRAM OR RFSRAM) covered region.
[answer] M1_4a {
@ Area when all of the M1 edge length < 0.17um is >= 0.055um2.
@ This rule is not applicable for (DNSRAM OR LRSRAM OR D2SRAM OR RFSRAM) covered region.
M1_ignore = M1_all WITH EDGE (length M1_all >= 0.17)
(AREA (M1_all NOT M1_ignore) < 0.055) NOT SRAM
}

[question] M1 minimum area is 0.0168
[answer] SRM1_4 {
@ M1 minimum area is 0.0168
X = AREA M1 < 0.0168
X NOT OUTSIDE INST
}

[question] M1 minimum enclosed area is 0.2
[answer] M1_5 {
@ M1 minimum enclosed area is 0.2
AREA ((HOLES M1_all INNER) NOT M1_all) < 0.2
}

[question] Minimum space between two run length > 0.3 parallel metal lines
with both metal line width is > 0.22 is 0.08
[answer] M1_6 {
@ Minimum space between two run length > 0.3 parallel metal lines
@ with both metal line width is > 0.22 is 0.08
CMACRO Mn_6 M1i_all 0.3 0.22 0.08
}

[question] Minimum space between two (run length > 0.3m) parallel metal lines is 0.12um.
with one or both metal line width is > 0.22m.
[answer] M1_6_R_OFF {
@ Minimum space between two (run length > 0.3m) parallel metal lines is 0.12um.
@ with one or both metal line width is > 0.22m.
CMACRO Mn_6a M1i 0.3 0.22 0.12
}

[question] Minimum space between two length > 0.6 parallel metal lines
with one or both metal line width is > 0.7 is 0.12
[answer] M1_6a {
@ Minimum space between two length > 0.6 parallel metal lines
@ with one or both metal line width is > 0.7 is 0.12
CMACRO Mn_6a M1i_all 0.6 0.7 0.12
}


[question] Minimum space between two length > 0.6 parallel metal lines with one metal line width is > 0.22 and other metal line width is >0.7um is 0.14
[answer] M1_6b {
@ Minimum space between two length > 0.6 parallel metal lines with one metal
@ line width is > 0.22 and other metal line width is >0.7um is 0.14
CMACRO Mn_6b M1i_all 0.6 0.22 0.7 0.14
}

[question] Minimum space between two length > 1.5 parallel metal lines with one or both metal line width is >1.5um is 0.3
[answer] M1_6c {
@ Minimum space between two length > 1.5 parallel metal lines with
@ one or both metal line width is >1.5um is 0.3
CMACRO Mn_6c M1i_all 1.5 1.5 0.3
}

[question] CT must be within M1.
This rule is not applied for OCOVL covered region.
[answer] M1_7a {
@ CT must be within M1.
@ This rule is not applied for OCOVL covered region.
((CT NOT M1) OUTSIDE INST) NOT OCOVL
}

[question] CT enclosed by M1 is >= 0.025um.
[answer] M1_7a_R_OFF {
@ CT enclosed by M1 is >= 0.025um.
ENC CT M1 < 0.025 ABUT<90 SINGULAR REGION OUTSIDE ALSO
}

[question] CT minimum within M1 is 0
M1 minimum overlap past CT for two opposite sides with either side >=0um and <0.015um is 0.012, not applicable to rectangle contact
[answer] SRM1_7ab {
@ CT minimum within M1 is 0
@ M1 minimum overlap past CT for two opposite sides with either side >=0um and <0.015um is 0.012, not applicable to rectangle contact
((CT NOT OUTSIDE INST) NOT RECT) NOT INSIDE M1
RECTANGLE ENCLOSURE ((CT NOT OUTSIDE INST) NOT RECT) M1 ABUT <90 SINGULAR
GOOD 0.0 0.012 0.0 0.012
}

[question] M1 density (%) in 125um * 125um window with step size 62.5um is 10%
[answer] M1_8_density {
@ M1 density (%) in 125um * 125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M1i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M1_8.log RDB density_report_M1_8.db
X NOT MARKS
}


[question] M1 maximum density (%) in 125um * 125um window with step size 62.5um is 85%
[answer] M1_8a_density {
@ M1 maximum density (%) in 125um *125um window with step size 62.5um is 85%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M1i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.85 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M1_8a.log RDB density_report_M1_8a.db
X NOT MARKS
}

[question] M1 maximum density difference (%) between any two 200um adjacent window (stepped without overlapping) is 50%
[answer] M1_8b_density {
@ M1 maximum density difference(%) between any two 200um adjacent window (stepped without overlapping) is 50%
X = DENSITY (M1i OR M1DUM) >= 0 WINDOW 200 GRADIENT > 0.5 ABSOLUTE BACKUP PRINT density_report_M1_8b.log RDB density_report_M1_8b.db
X NOT MARKS
}

[question] M1 maximum density (%) with 840um * 840um window is 70%
[answer] M1_8c_density {
@ M1 maximum density(%) with 840um*840um window is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M1i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 840 BACKUP PRINT density_report_M1_8c.log RDB density_report_M1_8c.db
X NOT MARKS
}

[question] M1 density over the whole chip is >=20%
[answer] M1_8d_density {
@ M1 density over the whole chip is >=20%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M1i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.2 PRINT density_report_M1_8d.log RDB density_report_M1_8d.db
X NOT MARKS
}

[question] (M1 at 45 degrees) minimum width (run length>0um) is 0.17
[answer] M1_9 {
@ (M1 at 45degree ) minimum width (run length>0um) is 0.17
M145 = ANGLE M1_all == 45
INT M145 < 0.17 OPPOSITE REGION
}

[question] (M1 at 45 degrees) minimum space to parallel M1 (run length>0um) is 0.17
[answer] M1_10 {
@ (M1 at 45degree) minimum space to parallel M1 (run length>0um) is 0.17
M145 = ANGLE M1_all == 45
EXT M145 M1_all < 0.17 OPPOSITE REGION PARALLEL ONLY
}


[question] Minimum space between an M1 line end to an M1 line (the parallel run length >0um) is 0.07
[answer] M1.11a {
@Minimum space between an M1 line end to an M1 line (the parallel run length >0um) is 0.07
EXT M1END M1<0.07 OPPOSITE REGION
}

[question] Minimum space between an M1 line end (with (CT or V1)) to an M1 (the parallel run length >0um) is 0.07, when this M1 line end extends Q from (CT or V1), 0.03 <= Q <0.05um
[answer] M1.11b{
@Minimum space between an M1 line end (with (CT or V1)) to an M1 (the parallel run length >0um) is 0.07, when this M1 line end extend Q from (CT or V1),0.03 <= Q <0.05um
X1 = EXT M1END M1 <0.07 OPPOSITE REGION
X2 = M1END COIN EDGE X1
X3 = ENC (CT OR V1) X2 <0.05 OPPOSITE REGION
X4 = ENC (CT OR V1) X2 <0.03 OPPOSITE REGION
X5 = (CT OR V1) INTERACT X3
X6 = (CT OR V1) INTERACT X4
X7 = X5 NOT X6
X1 TOUCH (X3 INTERACT X7)
}

[question] Minimum space between an M1 line end (with (CT or V1)) to an M1 (the parallel run length >0um) is 0.1, when this M1 line end extends Q from (CT or V1), 0 <= Q <0.03um
[answer] M1.11c {
@Minimum space between an M1 line end (with (CT or V1)) to an M1 (the parallel run length >0um) is 0.1, when this M1 line end extend Q from (CT or V1), 0 <= Q <0.03um
X1 = EXT M1END M1 <0.1 OPPOSITE REGION
X2 = M1END COIN EDGE X1
X3 = ENC (CT OR V1) X2 <0.03 ABUT<90 OPPOSITE REGION
X4 = (CT OR V1) INTERACT X3
X1 TOUCH (X3 INTERACT X4)
}

[question] M1.12 Minimum space between V1 (the V1 distance E to M1[A] line end, E <= 0.08um) to neighbouring metal M1[B] line is 0.14, the parallel run length of the V1 and the metal M1[B] line >0um
[answer] M1.12 {
@ M1.12 Minimum space between V1 (the V1 distance E to M1[A] line end, E <= 0.08um) to neighbouring metal M1[B] line is 0.14, the parallel run length of the V1 and the metal M1[B] line >0um;
@ Waive if there is redundant V1 in the M1[A] and M2 intersection.
X1 =ENC V1 M1END <=0.08 ABUT<90 REGION
X2 = V1 INTERACT X1
X3 = X2 INSIDE (M1 AND M2)
X4 = EXT X3 (M1 NOT COIN EDGE M1END) <0.14 ABUT<90 OPPOSITE REGION
X5 = V1 INTERACT X4
X6 = V1 NOT X5
X7 = ((M1 AND M2) ENCLOSE X5) ENCLOSE X6
(X4 NOT INTERACT X7) INTERACT (X1 AND X4 )
X8 = X3 TOUCH INSIDE EDGE M1END
X9 = EXT X8 (M1 NOT COIN EDGE M1END) <0.14 ABUT<90 OPPOSITE REGION
X10 = V1 INTERACT X9
X11 = V1 NOT X10
X12 = ((M1 AND M2) ENCLOSE X10) ENCLOSE X11
X9 NOT INTERACT X12
}


[question] Minimum space CT to M1 is 0.14, when the M1 and adjacent M1 meet the following conditions:1.M1(enclosed CT) width >=0.11um.2.M1(enclosed CT) to adjacent M1 space <=0.08um.3.The projection parallel run length of M1(enclosed CT) and adjacent M1 >=0.27um. For metal extrusion E < 0.12, the portion is treated as the same flat metal.
Waive if there is redundant CT in the same [(M1 and AA intersection) or (M1 and GT) intersection]
[answer] M1_13 {
@ Minimum space CT to M1 is 0.14, when the M1 and adjacent M1 meet the following conditions:
@ 1. M1(enclosed CT) width >=0.11um
@ 2. M1(enclosed CT) to adjacent M1 space <=0.08um
@ 3. The projection parallel run length of M1(enclosed CT) and adjacent M1 >=0.27um. For metal extrusion E < 0.12, the portion is treated as the same flat metal.
@ Waive if there is redundant CT in the same [(M1 and AA intersection) or (M1 and GT) intersection]
X0 = EXT M1 X1 <= 0.08 ABUT <90 opposite REGION
X1 = (M1 ENCLOSE CT) WITH WIDTH >=0.11
gaps = ext X1 M1 < 0.2 opposite region exclude shielded
gaps_edge = gaps COIN EDGE X1
edges_check1 = ext X1 M1 < 0.2 opposite exclude shielded
gap1 = dfm property gaps edges_check1 overlap abut also multi
[ wmax = max(ew(edges_check1)) ]
[ wmin = min(ew(edges_check1)) ]
[ l = sum(ec(edges_check1)) ]>=0.27
[ -= max(ew(edges_check1)) - min(ew(edges_check1)) ] <= 0.12
gap = gap1 OR ( X0 with edge (length X0 >=0.27 ))
X2 = (gap INTERACT X1) INTERACT X0
X3 = CT INSIDE ((M1 AND AA) OR (M1 AND GT))
X4 = EXT (X3 INSIDE X1) (M1 INTERACT X2) < 0.14 ABUT <90 OPPOSITE REGION measure all
X6 = X3 INTERACT X4
X7 = X3 NOT X6
X8 = ( ((M1 AND AA) OR (M1 AND GT)) ENCLOSE X6) ENCLOSE X7
X5 =((((X4 INTERACT M1) INTERACT (X2 AND X4) ) INTERACT X1) INTERACT (X0 AND X4)) NOT INTERACT X8
X5 OUTSIDE INST
}

[question] Minimum space CT to M1 is 0.085, when the M1 and adjacent M1 meet the following conditions:1.M1(enclosed CT) width >0.12um 2.M1(enclosed CT) to adjacent M1 space <=0.08um 3.The projected parallel run length R of M1[A] to M1[B]. R >= 0.27um.Waive if there is redundant CT in the same {(M1[A] and AA intersection) or (M1[A] and GT intersection)}
[answer] M1_13 {
@ Minimum space CT to M1 is 0.085, when the M1 and adjacent M1 meet the following conditions:
@ 1. M1(enclosed CT) width >0.12um
@ 2. M1(enclosed CT) to adjacent M1 space <=0.08um
@ 3. The projected parallel run length R of M1[A] to M1[B]. R >= 0.27um
@ Waive if there is redundant CT in the same {(M1[A] and AA intersection) or (M1[A] and GT intersection)}
X = EXT M1 [X1] <= 0.08 ABUT <90 OPPOSITE
X0 = EXT M1 X1 <= 0.08 ABUT <90 OPPOSITE REGION
X01= M1 ENCLOSE CT ==1
X1 = X01 WITH WIDTH >0.12
gap = X0 with edge (length X >0.27 )
X2 = (gap INTERACT X1) INTERACT X0
X3 = CT INSIDE ((M1 AND AA) OR (M1 AND GT))
X4 = EXT (X3 INSIDE X1) (M1 INTERACT X2) < 0.085 ABUT <90 OPPOSITE REGION measure all
Y = EXPAND EDGE (length X >0.27 ) OUTSIDE BY 0.001
X5 =((((X4 INTERACT M1) INTERACT (X2 AND X4) ) INTERACT X1) INTERACT (X0 AND X4) ) INTERACT (Y AND X4)
X5 OUTSIDE INST
}


[question] Minimum M1 to M1 space S at M1 line-end. Width W < W0. The minimum space can be line end head to other M1 or line end side to other M1. Rule check: S >= (Dh or Ds ). E1 =0.02, K1=0.065, W0=0.09um, Dh=Ds=0.08 in the illustration. Schematics Extension 1, Extension 2, and Extension 3: 1) Three extensions overlap with other M1 => NG 2) When Extension 1 and one of the (extension 2 or extension 3) overlap with other M1. The remaining side extension's Ds need to size up from 0.08 to 0.11um. If this remaining extension interacts with other M1 (includes touch edge), NG. Outside of SRAM(INST) area. Waive extrusion F < 0.07. Only Highlight either one of the situations: 1) There is only one CT in the same {(M1[A] and AA intersection) or (M1[A] and GT intersection) } and CT space to M1[B] Sh <0.10um. 2) there is only one V1 in the M1[A] and M2 intersection, and V1 space to M1[B] Sh<0.10um

[answer] M1_14 {
@ Minimum M1 to M1 space S at M1 line-end. Width W < W0. The minimum space can be line end head to other M1 or line end side to other M1. Rule check: S >= (Dh or Ds ). E1 =0.02, K1=0.065, W0=0.09um, Dh=Ds=0.08 in the illustration.
@ Schematics Extension 1, Extension 2, and Extension 3:
@ 1) Three extensions overlap with other M1 => NG
@ 2) When Extension 1 and one of the (extension 2 or extension 3) overlap with other M1. The remaining side extension's Ds need to size up from 0.08 to 0.11um. If this remaining extension interacts with other M1 (includes touch edge), NG.
@ Outside of SRAM(INST) area.
@ Waive extrusion F < 0.07.
@ Only Highlight either one of the situations:
@ 1) There is only one CT in the same {(M1[A] and AA intersection) or (M1[A] and GT intersection) } and CT space to M1[B] Sh <0.10um.
@ 2) there is only one V1 in the M1[A] and M2 intersection, and V1 space to M1[B] Sh<0.10um
INTER_MA= ((M1_all AND GT) OR (M1_all AND AA )) ENCLOSE CT==1
CT_INTER = CT INSIDE INTER_MA
CT_EDGE = ENC [CT_INTER] LINE_END <0.1 ABUT<90 OPPOSITE
CT_EDGE1 =EXT [CT_EDGE] M1_all <0.1 ABUT<90 OPPOSITE measure all
CT_SING =CT_INTER WITH EDGE CT_EDGE1

INTER_MT= (M1_all AND M2) ENCLOSE V1==1
V1_INTER = V1 INSIDE INTER_MT
V1_EDGE = ENC [V1_INTER] LINE_END <0.1 ABUT<90 OPPOSITE
V1_EDGE1 =EXT [V1_EDGE] M1_all <0.1 ABUT<90 OPPOSITE measure all
V1_SING =V1_INTER WITH EDGE V1_EDGE1

LINE_END = CONVEX EDGE (M1_all INTERACT (INTER_MA OR INTER_MT)) ANGLE1 ==90 LENGTH1 >=0.07 ANGLE2 ==90 LENGTH2 >=0.07 WITH LENGTH < 0.09
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.044
LINE_SIDE = (M1_all COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_END_EXP = EXPAND EDGE LINE_END INSIDE BY 0.001 EXTEND BY 0.021
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001 EXTEND BY 0.021
LINE_END_1 = LINE_END_EXP TOUCH EDGE LINE_END
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] M1_all < 0.08 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] M1_all < 0.08 OPPOSITE PERP ALSO OBTUSE ALSO
E3 = EXT [LINE_SIDE_1] M1_all <= 0.11 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
LINE_SIDE_E3 = LINE_SIDE_1 TOUCH EDGE E3
M1_CORNER = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
M2_CORNER = INT LINE_END_E1 LINE_SIDE_E3 <= 0.002 ABUT==90 REGION
M_CORNER2 = (EXPAND EDGE LINE_END OUTSIDE BY 0.001) INTERACT M1_CORNER ==2 // 0.08
M_CORNER3 = ((EXPAND EDGE LINE_END OUTSIDE BY 0.001) INTERACT (M2_CORNER NOT M1_CORNER)) INTERACT M1_CORNER // 0.08 0.11
((LINE_END_SHAPE INTERACT (M_CORNER2 OR M_CORNER3)) INTERACT (CT_SING OR V1_SING) ) OUTSIDE INST
}


[question] M1 density (including dummy) is >= 1%. Density check window size: 80um*80um, step size 40um. DRC only check the region with the width of the checking window >= 40um.

[answer] M1_15_density {
@ M1 density (including dummy) is >= 1%.
@ Density check window size: 80um*80um, step size 40um
@ DRC only check the region with width of checking window >= 40um
DENSITY_MARK = WITH WIDTH (BORDER NOT MARKS) >= 40
CHECK_LAYER = M1i_all AND DENSITY_MARK
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.01 WINDOW 80 STEP 40 BACKUP PRINT density_report_M1_15.log RDB density_report_M1_15.db
(X NOT MARKS) WITH WIDTH >= 40
}

[question] Maximum M1 area of merged low-density windows must follow item (1) and (2). The definition of low-density window: window size 10um*10um, step size: 5um, density <1%. (1) Maximum area of merged low-density window <= 6500um2, except merged low-density windows width ? 30um. (2) Maximum area of merged low-density window <= 18500um2. DRC doesn't check: DRC only check the region with a width of (checking window NOT above excluding region) >= 5um.

[answer] M1_16 {
@ Maximum M1 area of merged low-density windows must follow item (1) and (2).
@ The definition of low-density window: window size 10um*10um, step size: 5um, density <1%
@ (1) Maximum area of merged low-density window <= 6500um2, except merged low-density windows width ? 30um.
@ (2) Maximum area of merged low-density window <= 18500um2.
@ DRC don?t check:
@ DRC only check the region with width of (checking window NOT above excluding region) >= 5um
X = DENSITY M1i_all < 0.01 WINDOW 10 STEP 5 BACKUP PRINT density_report_M1_23.log RDB density_report_M1_23.rdb
Y = X NOT MARKS
(AREA Y > 6500) WITH WIDTH > 30
(AREA Y > 18500) WITH WIDTH >= 5
}

[question] Fixed V1 size is 0.07.

[answer] V1_1 {
@ Fixed V1 size is 0.07
NOT RECTANGLE V1 == 0.07 BY == 0.07
}

[question] Space between two V1 is 0.07.

[answer] V1_2 {
@ Space between two V1 is 0.07
EXT V1_all < 0.07 ABUT<90 SINGULAR REGION
}


[question] Min Space between two V1 regions is 0.09 (with run length>=0) at least in two sides, in case V1 array is larger than or equal to 3x3. Two via areas whose space is within 0.1 um are considered to be in the same array.

[answer] V1_3 {
@ Min Space between two V1 regions is 0.09 (with run length>=0) at least in two sides, in case V1 array is larger than or equal to 3x3.
@ Two via areas whose space is within 0.1 um are considered to be in the same array.
X = EXT (V1 INTERACT V1_array) V1< 0.090 OPPOSITE EXTENDED 0.001 REGION
Y =SIZE V1 BY 0.001
(Y INTERACT V1_array) INTERACT (X NOT Y) >2
}

[question] V1_array not touching MOMDMY maximum width is 0.85.

[answer] V1_4 {
@ V1_array not touching MOMDMY maximum width is 0.85
(WITH WIDTH V1_array > 0.85) NOT INTERACT MOMDMY
}

[question] V1 (different net)(outside of SRAM) minimum space for run length > 0um is 0.1.

[answer] V1_5 {
@ V1 (different net)(outside of SRAM) minimum space for run length > 0um is 0.1
X = EXT V1 < 0.1 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
(EXT V1DUM < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
(EXT V1DUM V1 < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
}

[question] V1 (different net) (outside of SRAM) space for run length > 0?m is >= 0.11um.

[answer] V1_5_R_OFF {
@ V1 (different net) (outside of SRAM) space for run length > 0?m is >= 0.11um.
X =EXT V1 < 0.11 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
}

[question] V1 (different net) minimum space is 0.09.

[answer] V1_5a {
@ V1 (different net) minimum space is 0.09
EXT V1 < 0.09 NOT CONNECTED REGION
EXT V1DUM < 0.09 ABUT<90 SINGULAR REGION
EXT V1DUM V1 < 0.09 ABUT<90 SINGULAR REGION
}

[question] V1 minimum space in different net inside of SRAM is 0.09.

[answer] V1.5b {
@ V1 minimum space in different net inside of SRAM is 0.09
EXT (V1 NOT OUTSIDE INST)< 0.09 NOT CONNECTED REGION
}

[question] V1 must be within M1. Per M1 and M2 intersection containing a V1, must meet rule V1.6a, V1.6b or V1.6c. V1.6a, V1 minimum within M1 is 0.015. V1.6b, M1 minimum overlap past V1 for two opposite sides with the other two sides >= 0.01um is 0.02. V1.6c, M1 minimum overlap past V1 for two opposite sides with the other two sides >= 0um is 0.03.

[answer] V1_6abc {
@ V1 must be within M1
@ per M1 and M2 intersection containing a V1, must meet rule V1.6a, V1.6b or V1.6c
@ V1.6a, V1 minimum within M1 is 0.015
@ V1.6b, M1 minimum overlap past V1 for two opposite sides with the other two sides >= 0.01um is 0.02
@ V1.6c, M1 minimum overlap past V1 for two opposite sides with the other two sides >= 0um is 0.03
V1_all NOT INSIDE M1_all
M1andM2 = (M1_all AND M2_all) INTERACT (V1_all OUTSIDE INST)
BadV1 = RECTANGLE ENCLOSURE (V1_all OUTSIDE INST) M1_all OUTSIDE ALSO
GOOD 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE
GOOD 0.02 OPPOSITE 0.01 OPPOSITE 0.02 OPPOSITE 0.01 OPPOSITE
GOOD 0.03 0 0.03 0
BadV1 INTERACT M1andM2
}


[question] M1 minimum overlap past V1 for two opposite sides with the other two sides >= 0um is 0.015.

[answer] SRV1_6ac {
@ M1 minimum overlap past V1 for two opposite sides with the other two sides >= 0um is 0.015
RECTANGLE ENCLOSURE (V1 NOT OUTSIDE INST) M1 ABUT <90 SINGULAR
GOOD 0.015 OPPOSITE 0.0 0.015 OPPOSITE 0.0
}

[question] V1 touching M1 with width > 0.14um, with at least one redundant V1. This rule only applies to that M1/M2 intersection area can enclose a rectangle of 0.07*0.27.

[answer] V1_6d {
@ V1 touching M1 with width > 0.14um, with at least one redundant V1.
@ This rule only applies to that M1/M2 intersection area can enclose a rectangle of 0.07*0.27.
CMACRO V67D V1 M1 M2
}

[question] V1 must be within M2. M1 and M2 intersection containing a V1, must meet rule V1.7a, V1.7b or V1.7c. V1.7a, V1 minimum within M2 is 0.015. V1.7b, M2 minimum overlap past V1 for two opposite sides with the other two sides >= 0.01um is 0.02. V1.7c, M2 minimum overlap past V1 for two opposite sides with the other two sides >= 0um is 0.03.

[answer] V1_7abc {
@ V1 must be within M2
@ M1 and M2 intersection containing a V1, must meet rule V1.7a, V1.7b or V1.7c
@ V1.7a, V1 minimum within M2 is 0.015
@ V1.7b, M2 minimum overlap past V1 for two opposite sides with the other two sides >= 0.01um is 0.02
@ V1.7c, M2 minimum overlap past V1 for two opposite sides with the other two sides >= 0um is 0.03
V1_all NOT M2_all
M1andM2 = (M1_all AND M2_all) INTERACT V1_all
BadV1 = RECTANGLE ENCLOSURE V1_all M2_all OUTSIDE ALSO
GOOD 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE
GOOD 0.02 OPPOSITE 0.01 OPPOSITE 0.02 OPPOSITE 0.01 OPPOSITE
GOOD 0.03 0 0.03 0
BadV1 INTERACT M1andM2
}

[question] M2 minimum overlap past V1 for two opposite sides with the other two sides >=0 is 0.025.

[answer] SRV1_7 {
@ M2 minimum overlap past V1 for two opposite sides with the other two sides >=0 is 0.025
RECTANGLE ENCLOSURE (V1 NOT OUTSIDE INST) M2 ABUT <90 SINGULAR
GOOD 0.025 0.0 0.025 0.0
}

[question] V1 touching M2 with width > 0.14um, with at least one redundant V1. This rule only applies to that M1/M2 intersection area can enclose a rectangle of 0.07*0.27.

[answer] V1_7d {
@ V1 touching M2 with width > 0.14um, with at least one redundant V1.
@ This rule only applies to that M1/M2 intersection area can enclose a rectangle of 0.07*0.27.
CMACRO V67D V1 M2 M1
}

[question] At least two V1 vias must connect M1 to M2 when the M1 or M2 width is > 0.26um.

[answer] V1_8 {
@ At least two V1 vias must connect M1 to M2 when the M1 or M2 width is > 0.26um
WM1 = WITH WIDTH M1 > 0.260
WM2 = WITH WIDTH M2 > 0.260
(M1 AND WM2) INTERACT V1 >0<2
(WM1 AND M2) INTERACT V1 >0<2
}


[question] At least two V1 vias must connect M1 to M2 when the M1 or M2 width is > 0.26um. This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region.

[answer] V1_8 {
@ At least two V1 vias must connect M1 to M2 when the M1 or M2 width is > 0.26um.
@ This rule is not applied for (DNSRAM OR LRSRAM) OR D2SRAM) OR RFSRAM) covered region
mx_wide = WITH WIDTH M1 > 0.260
my_wide = WITH WIDTH M2 > 0.260
mx_my_wide = mx_wide OR my_wide
vx_612 = (V1 OUTSIDE SRAM) INTERACT mx_my_wide
mx_my_612 = ((M1 AND M2) OUTSIDE SRAM) ENCLOSE vx_612
mx_my_612 ENCLOSE V1 < 2
}

[question] At least three V1 vias must connect M1 to M2 when the M1 or M2 width is > 0.55um.

[answer] V1_9 {
@ At least three V1 vias must connect M1 to M2 when the M1 or M2 width is > 0.55um
WM1 = WITH WIDTH M1 > 0.550
WM2 = WITH WIDTH M2 > 0.550
encVia = V1 INTERACT (WM1 OR WM2)
((M1 AND M2) ENCLOSE encVia) ENCLOSE V1 < 3
}

[question] At least four V1 vias must connect M1 to M2 when the M1 or M2 width is > 0.645um.

[answer] V1_10 {
@ At least four V1 vias must connect M1 to M2 when the M1 or M2 width is > 0.645um
WM1 = WITH WIDTH M1 > 0.645
WM2 = WITH WIDTH M2 > 0.645
encVia = V1 INTERACT (WM1 OR WM2)
((M1 AND M2) ENCLOSE encVia) ENCLOSE V1 < 4
}

[question] At least two V1s with space <=0.16um or three V1s with space <= 0.65um when one of M1 or M2 with both length and width > 0.24um. Exclude SRAM area to check.

[answer] V1_16 {
@ At least two V1s with space <=0.16um or three V1s with space <= 0.65um when one of M1 or M2 with both length and width > 0.24um. (exclude SRAM area to check)
X1a = WITH WIDTH M1 >0.24
X1b = WITH WIDTH M2 >0.24
WIDE = X1a OR X1b
X2 = (M1 AND M2) ENCLOSE V1
X3 = V1 INSIDE X2
X5c = EXT (V1_EMPTY INSIDE WIDE) V1_EMPTY <=0.16 ABUT<90 REGION CONNECTED // space of via <= 0.16
X6c = X2 ENCLOSE X5c // good intersection with space of Via <= 0.16
X7= ((SIZE X3 BY 0.325) AND X2) ENCLOSE V1 >2
X7c= X2 ENCLOSE X7
X = ((X2 NOT X6c) NOT X7c) ENCLOSE (V1 INSIDE WIDE) // Via_16
X OUTSIDE INST
}


[question] At least two V1s when either wide metal of M1 or M2 with both length L > 0.24um and width W > 0.24um, and the distance D <= 1.1um away from this wide metal. Exclude non-square Vn and SRAM area.

[answer] V1_17 {
@ At least two V1s when either wide metal of M1 or M2 with both length L > 0.24um and width W > 0.24um, and the distance D <= 1.1um away from this wide metal. Exclude non-square Vn and SRAM area.
WM1_L1 = ( M1 NOT WM1 ) TOUCH WM1
M1_ENCWM = (M1 INTERACT WM1) INTERACT V1_A
WM1_VEDGE = EXT [M1_ENCWM] < 1.1 ABUT <90 OPPOSITE NOTCH
WM1_EXT1 = EXT (WM1 COIN EDGE WM1_VEDGE) [V1_A] < 1.1 ABUT >=0 <90 OPPOSITE CONNECTED
WM1_EXT2 = (EXT WM1 V1_A < 1.1 ABUT >=0 <90 OPPOSITE REGION CONNECTED ) INSIDE M1
V1_B = V1_square WITH EDGE WM1_EXT1
X1 =(M1 AND M2) ENCLOSE V1_square >1
X2 = ((M1 AND M2) AND ( WM1_L1 AND WM1_EXP )) NOT X1
Y0=(M1 AND M2) ENCLOSE V1_square ==1
Y1 = SIZE (V1_square INTERACT Y0) BY 1.1 INSIDE OF M1 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM1)
VSING1= ((X2 INTERACT V1_B ==1) INTERACT Y2) OR ((X2 INTERACT WM1_EXT2) INTERACT V1_A)
VSING1 OUTSIDE INST

M2_ENCWM = (M2 INTERACT WM2) INTERACT V1_A2
WM2_VEDGE = EXT [M2_ENCWM] < 1.1 ABUT <90 OPPOSITE NOTCH
WM2_EXT1 = EXT (WM2_EMPTY COIN EDGE WM2_VEDGE) [V1_A2_EMPTY] < 1.1 ABUT >=0 <90 OPPOSITE CONNECTED
WM2_EXT2 = (EXT WM2_EMPTY V1_A2_EMPTY < 1.1 ABUT >=0 <90 OPPOSITE REGION CONNECTED ) INSIDE M2
V1_B2 = V1_square WITH EDGE WM2_EXT1
X3 = ((M1 AND M2) AND ( WM2_L1 AND WM2_EXP )) NOT X1
Y3 = SIZE (V1_square INTERACT Y0) BY 1.1 INSIDE OF M2 STEP 0.005
Y4= Y3 INTERACT (Y3 AND WM2)
VSING2= ((X3 INTERACT V1_B2 ==1) INTERACT Y4) OR (( X3 INTERACT WM2_EXT2) INTERACT V1_A2)
VSING2 OUTSIDE INST
}

[question] At least two V1s when either wide metal of M1 or M2 with both length L > 1.4um and width W > 1.4um, and the distance D <= 2.8um away from this wide metal. Exclude non-square Vn and SRAM area.

[answer] V1_17a {
@ At least two V1s when either wide metal of M1 or M2 with both length L > 1.4um and width W > 1.4um, and the distance D <= 2.8um away from this wide metal. Exclude non-square Vn and SRAM area.
WM1_L1_a = ( M1 NOT WM1_a ) TOUCH WM1_a
V1_B = COPY V1_square
X1 =(M1 AND M2) ENCLOSE V1_square >1
X2 = ((M1 AND M2) AND ( WM1_L1_a AND WM1_EXP_a )) NOT X1
Y0=(M1 AND M2) ENCLOSE V1_square ==1
Y1 = SIZE (V1_square INTERACT Y0) BY 2.8 INSIDE OF M1 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM1_a)
VSING1= (X2 INTERACT V1_B ==1) INTERACT Y2
VSING1 OUTSIDE INST
V1_B2 = COPY V1_square
X3 = ((M1 AND M2) AND ( WM2_L1_a AND WM2_EXP_a )) NOT X1
Y3 = SIZE (V1_square INTERACT Y0) BY 2.8 INSIDE OF M2 STEP 0.005
Y4= Y3 INTERACT (Y3 AND WM2_a)
VSING2= (X3 INTERACT V1_B2 ==1) INTERACT Y4
VSING2 OUTSIDE INST
}


[question] At least two V1s when either wide metal of M1 or M2 with both length L > 1.4um and width W > 1.4um, and the distance D <= 2.8um away from this wide metal. Exclude non-square Vn and SRAM area.

[answer] V1_17b {
@ At least two V1s when either wide metal of M1 or M2 with both length L > 1.4um and width W > 1.4um, and the distance D <= 2.8um away from this wide metal. Exclude non-square Vn and SRAM area.
WM1_L1_b = ( M1 NOT WM1_b ) TOUCH WM1_b
V1_B = COPY V1_square
X1 =(M1 AND M2) ENCLOSE V1_square >1
X2 = ((M1 AND M2) AND ( WM1_L1_b AND WM1_EXP_b )) NOT X1
Y0=(M1 AND M2) ENCLOSE V1_square ==1
Y1 = SIZE (V1_square INTERACT Y0) BY 7.1 INSIDE OF M1 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM1_b)
VSING1= (X2 INTERACT V1_B ==1) INTERACT Y2
VSING1 OUTSIDE INST
V1_B2 = COPY V1_square
X3 = ((M1 AND M2) AND ( WM2_L1_b AND WM2_EXP_b )) NOT X1
Y3 = SIZE (V1_square INTERACT Y0) BY 7.1 INSIDE OF M2 STEP 0.005
Y4= Y3 INTERACT (Y3 AND WM2_b)
VSING2= (X3 INTERACT V1_B2 ==1) INTERACT Y4
VSING2 OUTSIDE INST
}

[question] 45-degree rotated V1 is not allowed.

[answer] V1_18 {
@ 45-degree rotated V1 is not allowed.
(ANGLE V1_all >= 44.9 <= 45.1) NOT INSIDE EDGE MARKS
}

[question] Single V1 is not allowed in "H-shape" M2 when:
1.The M2 has "H-shape" interact with two metal holes: both two metal holes length ? 4.5um(L2) and two metal hole area ? 4.5um2.
2.The V1 overlaps on the center metal bar of this "H-shape" M2.
3.The center metal bar length ? 1um(L) and the metal bar width  0.2um.
[answer] V1_19 {
@ Single V1 is not allowed in "H-shape" M2 when:
@ 1. The M2 has "H-shape" interact with two metal holes: both two metal holes length ? 4.5um(L2) and two metal hole area ? 4.5um2.
@ 2. The V1 overlaps on the center metal bar of this "H-shape" M2.
@ 3. The center metal bar length ? 1um(L) and the metal bar width ? 0.2um.
M2_hole = RECTANGLE (AREA (HOLES M2 INNER) <= 4.5)
X = M2 COIN EDGE M2_hole
Y = INT X <= 0.2 OPPOSITE REGION
M2_bar_edge = LENGTH (M2_hole TOUCH EDGE Y) <= 1
M2_hole_tar = M2_hole NOT WITH EDGE (LENGTH (M2_hole WITH EDGE M2_bar_edge) > 4.5)
Z = Y INTERACT M2_hole_tar == 2
H = V1 NOT OUTSIDE Z
ERR = ((M1 AND M2) INTERACT H) NOT INTERACT (V1 NOT H)
((Z INTERACT H == 1) INTERACT ERR) NOT MARKS
}

[question] V1 connected to M1DUM, M2DUM is not allowed. This rule is not applied for LOGO covered region.

[answer] V1_20 {
@ V1 connected to M1DUM, M2DUM is not allowed.
@ This rule is not applied for LOGO covered region.
(V1 INTERACT (M1DUM OR M2DUM)) NOT LOGO
}

[question] V1 must be fully covered by M1 and M2.

[answer] V1_21 {
@ V1 must be fully covered by M1 and M2.
V1_all NOT (M1_all AND M2_all)
}


[question] It's not allowed V1 overlap with M1 and M2 resistor.

[answer] V1_22 {
@ It?s not allowed V1 overlap with M1 and M2 resistor.
V1 AND (M1 AND M1R)
V1 AND (M2 AND M2R)
}

[question] M2 minimum width is 0.07.

[answer] M2_1 {
@ M2 minimum width is 0.07
INT M2_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] M2 minimum width is 0.08um.

[answer] M2_1_R_OFF {
@ M2 minimum width is 0.08um.
INT M2 < 0.08 ABUT<90 SINGULAR REGION
}

[question] M2 maximum width is 4.5.

[answer] M2_2 {
@ M2 maximum width is 4.5
M2_all WITH WIDTH > 4.50
}

[question] M2 minimum space is 0.07.

[answer] M2_3 {
@ M2 minimum space is 0.07
X = EXT M2_all < 0.07 ABUT<90 SINGULAR REGION
X OUTSIDE INST
}

[question] M2 minimum space is 0.08um.

[answer] M2_3_R_OFF {
@ M2 minimum space is 0.08um.
X = EXT M2 < 0.08 ABUT<90 SINGULAR REGION
X OUTSIDE INST
}

[question] M2 minimum space is 0.065.

[answer] SRM2_3 {
@ M2 minimum space is 0.065
X =EXT M2 < 0.065 ABUT<90 SINGULAR REGION
X NOT OUTSIDE INST
}

[question] M2 minimum area (The INST connected area apply SRAM design rule) is 0.0196.

[answer] M2_4 {
@ M2 minimum area(The INST connected area apply SRAM design rule) is 0.0196
AREA (M2_all OUT INST) < 0.0196
}

[question] Area when all of the M2 edge length < 0.17m is >= 0.06um2. This rule is not applicable for the SRAM region.

[answer] M2_4a {
@ Area when all of the M2 edge length < 0.17m is >= 0.06um2.
@ This rule is not applicable for the SRAM region.
M2_ignore = M2_all WITH EDGE (LENGTH M2_all >= 0.17)
(AREA (M2_all NOT M2_ignore) < 0.06) NOT INST
}

[question] M2 minimum area is 0.0192.

[answer] SRM2_4 {
@ M2 minimum area is 0.0192
X =AREA M2 < 0.0192
X NOT OUTSIDE INST
}

[question] M2 minimum enclosed area is 0.2.

[answer] M2_5 {
@ M2 minimum enclosed area is 0.2
AREA ((HOLES M2_all INNER) NOT M2_all) < 0.2
}


[question] Minimum space between two run length > 0.3 parallel metal lines with both metal line width is > 0.22 is 0.10.

[answer] M2_6 {
@ Minimum space between two run length > 0.3 parallel metal lines
@ with both metal line width is > 0.22 is 0.10
CMACRO Mn_6 M2i_all 0.3 0.22 0.1
}

[question] Minimum space between two length > 0.3 parallel metal lines with both metal line width is > 0.22 is 0.10.

[answer] M2_6_R_OFF {
@ Minimum space between two length > 0.3 parallel metal lines
@ with both metal line width is > 0.22 is 0.10
CMACRO Mn_6a M2i 0.3 0.22 0.12
}

[question] Minimum space between two length > 0.6 parallel metal lines with one or both metal line width is > 0.7 is 0.12.

[answer] M2_6a {
@ Minimum space between two length > 0.6 parallel metal lines
@ with one or both metal line width is > 0.7 is 0.12
CMACRO Mn_6a M2i_all 0.6 0.7 0.12
}

[question] Minimum space between two length > 0.6 parallel metal lines with one metal line width is > 0.22 and other metal line width is >0.7um is 0.14.

[answer] M2_6b {
@ Minimum space between two length > 0.6 parallel metal lines with one metal
@ line width is > 0.22 and other metal line width is >0.7um is 0.14
CMACRO Mn_6b M2i_all 0.6 0.22 0.7 0.14
}

[question] Minimum space between two length > 1.5 parallel metal lines with one or both metal line width is > 1.5 is 0.30.

[answer] M2_6c {
@ Minimum space between two length > 1.5 parallel metal lines
@ with one or both metal line width is > 1.5 is 0.30
CMACRO Mn_6c M2i_all 1.5 1.5 0.3
}

[question] M2 density (%) in 125um x 125um window with step size 62.5um is 10%.

[answer] M2_7_density {
@ M2 density (%) in 125um x 125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M2i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M2_7.log RDB density_report_M2_7.db
X NOT MARKS
}

[question] M2 density (%) in 125um x 125um window with step size 62.5um is 85%.

[answer] M2_7a_density {
@ M2 density (%) in 125um x 125um window with step size 62.5um is 85%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M2i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.85 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M2_7a.log RDB density_report_M2_7a.db
X NOT MARKS
}

[question] M2 maximum density difference (%) between any two 200um adjacent window (stepped without overlapping) is 50%.

[answer] M2_7b_density {
@ M2 maximum density difference(%) between any two 200um adjacent window (stepped without overlapping) is 50%
X = DENSITY (M2i OR M2DUM) >= 0 WINDOW 200 GRADIENT > 0.5 ABSOLUTE BACKUP PRINT density_report_M2_7b.log RDB density_report_M2_7b.db
X NOT MARKS
}

[question] M2 maximum density (%) with 840um*840um window is 70%.

[answer] M2_7c_density {
@ M2 maximum density(%) with 840um*840um window is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M2i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 840 BACKUP PRINT density_report_M2_7c.log RDB density_report_M2_7c.db
X NOT MARKS
}

[question] [(M2 with width > 2.8um) over M1] maximum density(%) with 200um*200um step size 100um is 70%.

[answer] M2_7d_R_density_ON {
@ [(M2 with width > 2.8um) over M1] maximum density(%) with 200um*200um step size 100um is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = (((M2i WITH WIDTH > 2.800) OR (M2DUM WITH WIDTH > 2.800)) AND (M1i OR M1DUM)) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 200 STEP 100 BACKUP PRINT density_report_M2_7d.log RDB density_report_M2_7d.db
X NOT MARKS
}

[question] [(M1 with width > 2.8um) over M2] maximum density(%) with 200um*200um step size 100um is 70%.

[answer] M2_7e_R_density_ON {
@ [(M1 with width > 2.8um) over M2] maximum density(%) with 200um*200um step size 100um is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = ((M2i OR M2DUM) AND ((M1i WITH WIDTH > 2.80) OR (M1DUM WITH WIDTH > 2.80))) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 200 STEP 100 BACKUP PRINT density_report_M2_7e.log RDB density_report_M2_7e.db
X NOT MARKS
}

[question] M2 density over the whole chip is >=20%.

[answer] M2_7f_density {
@ Mn density over the whole chip is >=20%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M2i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X =DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.2 PRINT density_report_M2_7f.log RDB density_report_M2_7f.db
X NOT MARKS
}

[question] (M2 at 45degree) minimum width (run length>0um) is 0.17.

[answer] M2_8 {
@ (M2 at 45degree ) minimum width (run length>0um) is 0.17
M245 = ANGLE M2_all == 45
INT M245 < 0.17 OPPOSITE REGION
}

[question] (M2 at 45degree) minimum space to parallel M2 (run length>0um) is 0.17.

[answer] M2_9 {
@ (M2 at 45degree) minimum space to parallel M2 (run length>0um) is 0.17
M245 = ANGLE M2_all == 45
EXT M245 < 0.17 OPPOSITE REGION
}

[question] Space between a Mn line end to a Mn (the parallel run length >0m) Excluding checking SRAM area.

[answer] M2.10a {
@ Space between a Mn line end to a Mn (the parallel run length >0m)
@ Excluding checking SRAM area
X =EXT M2END M2<0.07 OPPOSITE REGION
X OUTSIDE INST
}

[question] Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um) is 0.07. The Mn line end extends Q from Vn, 0.03 <= Q < 0.05um.

[answer] M2.10b {
@ Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um) is 0.07. The Mn line end extends Q from Vn, 0.03 <= Q <0.05um
X1 = EXT M2END M2 <0.07 OPPOSITE REGION
X2 = M2END COIN EDGE X1
X3 = ENC V2 X2 <0.05 OPPOSITE REGION
X4 = ENC V2 X2 <0.03 OPPOSITE REGION
X5 = V2 INTERACT X3
X6 = V2 INTERACT X4
X7 = X5 NOT X6
X =X1 TOUCH (X3 INTERACT X7)
X OUTSIDE INST
}

[question] Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um) is 0.1. The Mn line end extends Q from Vn, 0 <= Q <0.03um.

[answer] M2.10c {
@ Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um ) is 0.1. The Mn line end extends Q from Vn, 0 <= Q <0.03um
X1 = EXT M2END M2 <0.1 OPPOSITE REGION
X2 = M2END COIN EDGE X1
X3 = ENC V2 X2 <0.03 ABUT<90 OPPOSITE REGION
X4 = V2 INTERACT X3
X1 TOUCH (X3 INTERACT X4)
}

[question] Space between Vn-1 (Vn-1 is enclosed by Mn[A]) to the neighboring metal line Mn[B], when the layout structures meet certain conditions:Mn[A] line end definition: 1.line width W <0.1m.
2.Vn-1 enclosure by Mn[A] line end: E < 0.05m.
3.The parallel run length of Mn[A] and Mn[B]: E1 >=-0.03m.
4.Space between Mn[A] to the neighboring parallel metal line: Ds<0.08m;
5.Any one edge distance from the corner of the two edges of Mn[A]: K1 <0.095m.
6.At least one Vn-1 in the Mn[A] and Mn-1 intersection meet this rule is ok.
This rule is not applicable for SRAM region DRC check. 0.12

[answer] M2_11 {
@ Space between Vn-1 (Vn-1 is enclosed by Mn[A]) to neighboring metal line Mn[B], when the layout structures meet the following conditions:
@Mn[A] line end definition: line width W <0.1m.
@Vn-1 enclosure by Mn[A] line end: E < 0.05m
@The parallel run length of Mn[A] and Mn[B]: E1 >=-0.03m
@Space between Mn[A] to the neighboring parallel metal line: Ds<0.08m;
@Any one edge distance from the corner of the two edges of Mn[A]: K1 <0.095m
@At least one Vn-1 in the Mn[A] and Mn-1 intersection meet this rule is ok.
@This rule is not applicable for SRAM region DRC check. 0.12
LINE_END = CONVEX EDGE M2 ANGLE1 ==90 LENGTH1 >=0.08 ANGLE2 ==90 LENGTH2 >=0.08 WITH LENGTH <0.1
X1 = ENC V1 LINE_END<0.05 ABUT<90 REGION OPPOSITE
X2 = V1 INTERACT X1
X3 = X2 INSIDE (M1 AND M2)
X8 = X3 TOUCH EDGE X1
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.095
LINE_SIDE = (M2 COIN EDGE LINE_END_SHAPE) NOT COIN EDGE LINE_END
LINE_SIDE1 = ENC X3 LINE_SIDE<0.03 REGION ABUT<90 OPPOSITE
V1_EDGE = (LINE_SIDE1 OR X3) TOUCH EDGE X8
LINE_END_EXP = EXPAND EDGE V1_EDGE INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001 EXTEND BY 0.031
LINE_END_1 = LINE_END_EXP TOUCH EDGE V1_EDGE
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] M2 < 0.12 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] M2 < 0.08 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
V42 = X3 WITH EDGE (X8 TOUCH EDGE LINE_END_E1)
X5 = V1 INTERACT V42
X6 = V1 NOT X5
X7 = ((M1 AND M2) ENCLOSE X5) ENCLOSE X6
M2_CORNER1 = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
(M2_CORNER1 NOT INTERACT X7) OUTSIDE INST
}
[question] Minimum Mn to Mn space S at Mn line-end 0.1. Width W < 0.1um. The minimum space can be line end head to other Mn or line end side to other M1.Rule check:S >= (Dh or Ds ). E1 =0.03, K1=0.095 , Dh=Ds=0.1 in the illustration.Outside of SRAM(INST) area.Waive extrusion F < 0.07.Waive the violation for MOM (within MOMDMY).

[answer] M2_12_R_OFF {
@ Minimum Mn to Mn space S at Mn line-end 0.1. Width W < 0.1um. The minimum space can be line end head to other Mn or line end side to other M1. Rule check:
@S >= (Dh or Ds ). E1 =0.03, K1=0.095 , Dh=Ds=0.1 in the illustration.
@Outside of SRAM(INST) area.
@Waive extrusion F < 0.07.
@Waive the violation for MOM (within MOMDMY).
LINE_END = CONVEX EDGE M2_all ANGLE1 ==90 LENGTH1 >=0.07 ANGLE2 ==90 LENGTH2 >=0.07 WITH LENGTH < 0.1
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.064
LINE_SIDE = (M2_all COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_END_EXP = EXPAND EDGE LINE_END INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001 EXTEND BY 0.031
LINE_END_1 = LINE_END_EXP TOUCH EDGE LINE_END
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] M2_all < 0.1 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] M2_all < 0.1 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
M2_CORNER = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
MOM = ((M1 OR M2) OR M3) INTERACT ( MnPIN INTERACT (SIZE MOMDMY BY 0.114))
((LINE_END_SHAPE INTERACT M2_CORNER) OUTSIDE INST) NOT (MOM OR MOMDMY)
}

[question] M2 density (including dummy) is >= 1%. Density check window size: 80um*80um, step size 40um.DRC only check the region with width of (checking window NOT above excluding region) >= 40um.
[answer] M2_14_density {
@ M2 density (including dummy) is >= 1%. Density check window size: 80um*80um, step size 40um.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 40um.
DENSITY_MARK = WITH WIDTH (BORDER NOT MARKS) >= 40
CHECK_LAYER = M2i_all AND DENSITY_MARK
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.01 WINDOW 80 STEP 40 BACKUP PRINT density_report_M2_14.log RDB density_report_M2_14.db
(X NOT MARKS) WITH WIDTH >= 40
}


[question] Maximum M2 area of merged low-density windows must follow item (1) and (2). The definition of a low-density window: window size 10um*10um, step size: 5um, density <1%.(1) Maximum area of merged low-density window ? 6500um2, except merged low-density windows width ? 30um.(2) Maximum area of merged low-density window ? 18500um2. DRC only check the region with width of (checking window NOT above excluding region) ? 5um

[answer] M2_15 {
@ Maximum M2 area of merged low-density windows must follow item (1) and (2).
@ The definition of a low-density window: window size 10um*10um, step size: 5um, density <1%
@ (1) Maximum area of merged low-density window ? 6500um2, except merged low-density windows width ? 30um.
@ (2) Maximum area of merged low-density window ? 18500um2.
@ DRC only check the region with width of (checking window NOT above excluding region) ? 5um
X = DENSITY M2i_all < 0.01 WINDOW 10 STEP 5 BACKUP PRINT density_report_M2_15.log RDB density_report_M2_15.rdb
Y = X NOT MARKS
(AREA Y > 6500) WITH WIDTH > 30
(AREA Y > 16000) WITH WIDTH >= 5
}

[question] M3 minimum width is 0.07.

[answer] M3_1 {
@ M3 minimum width is 0.07
INT M3_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] M3 minimum width is 0.08um.

[answer] M3_1_R_OFF {
@ M3 minimum width is 0.08um.
INT M3 < 0.08 ABUT<90 SINGULAR REGION
}

[question] M3 maximum width is 4.5.

[answer] M3_2 {
@ M3 maximum width is 4.5
M3_all WITH WIDTH > 4.50
}

[question] M3 maximum width is 4.5. When M3 used for TM-1, DRC waives the (M3 AND DUPMK1) region.

[answer] M3_2 {
@ M3 maximum width is 4.5. When M3 used for TM-1, DRC waives the (M3 AND DUPMK1) region.
(M3_all WITH WIDTH > 4.50) NOT (M3_all AND DUPMK1)
}

[question] M3 minimum space is 0.07.

[answer] M3_3 {
@ M3 minimum space is 0.07
EXT M3_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] M3 minimum space is 0.08um.

[answer] M3_3_R_OFF {
@ M3 minimum space is 0.08um.
EXT M3 < 0.08 ABUT<90 SINGULAR REGION
}

[question] M3 minimum area is 0.0196.

[answer] M3_4 {
@ M3 minimum area is 0.0196
AREA M3_all < 0.0196
}

[question] Area when all of the M3 edge length < 0.17 m is >= 0.06um2. This rule is not applicable for SRAM region.

[answer] M3_4a {
@ Area when all of the M3 edge length < 0.17 m is >= 0.06um2.
@ This rule is not applicable for SRAM region.
M3_ignore = M3_all WITH EDGE (LENGTH M3_all >= 0.17)
(AREA (M3_all NOT M3_ignore) < 0.06) NOT INST
}


[question] M3 minimum enclosed area is 0.2.

[answer] M3_5 {
@ M3 minimum enclosed area is 0.2
AREA ((HOLES M3_all INNER) NOT M3_all) < 0.2
}

[question] Minimum space between two run length > 0.3 parallel metal lines with both metal line width is > 0.22 is 0.10.

[answer] M3_6 {
@ Minimum space between two run length > 0.3 parallel metal lines
@ with both metal line width is > 0.22 is 0.10
CMACRO Mn_6 M3i_all 0.3 0.22 0.1
}

[question] Minimum space between two length > 0.3 parallel metal lines with both metal line width is > 0.22 is 0.12.

[answer] M3_6_R_OFF {
@ Minimum space between two length > 0.3 parallel metal lines
@ with both metal line width is > 0.22 is 0.12
CMACRO Mn_6a M3i 0.3 0.22 0.12
}

[question] Minimum space between two length > 0.6 parallel metal lines with one or both metal line width is > 0.7 is 0.12.

[answer] M3_6a {
@ Minimum space between two length > 0.6 parallel metal lines
@ with one or both metal line width is > 0.7 is 0.12
CMACRO Mn_6a M3i_all 0.6 0.7 0.12
}

[question] Minimum space between two length > 0.6 parallel metal lines with one metal line width is > 0.22 and other metal line width is >0.7um is 0.14.

[answer] M3_6b {
@ Minimum space between two length > 0.6 parallel metal lines with one metal
@ line width is > 0.22 and other metal line width is >0.7um is 0.14
CMACRO Mn_6b M3i_all 0.6 0.22 0.7 0.14
}

[question] Minimum space between two length > 1.5 parallel metal lines with one or both metal line width is > 1.5 is 0.30.

[answer] M3_6c {
@ Minimum space between two length > 1.5 parallel metal lines
@ with one or both metal line width is > 1.5 is 0.30
CMACRO Mn_6c M3i_all 1.5 1.5 0.3
}

[question] M3 minimum density(%) in 125um*125um window with step size 62.5um is 10%.

[answer] M3_7_density {
@ M3 minimum density(%) in 125um*125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M3i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M3_7.log RDB density_report_M3_7.db
X NOT MARKS
}

[question] M3 maximum density(%) in 125um*125um window with step size 62.5um is 85%.

[answer] M3_7a_density {
@ M3 maximum density(%) in 125um*125um window with step size 62.5um is 85%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M3i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.85 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M3_7a.log RDB density_report_M3_7a.db
X NOT MARKS
}

[question] M3 maximum density difference(%) between any two 200um adjacent windows (stepped without overlapping) is 50%.

[answer] M3_7b_density {
@ M3 maximum density difference(%) between any two 200um adjacent window (stepped without overlapping) is 50%
X = DENSITY (M3i OR M3DUM) >= 0 WINDOW 200 GRADIENT > 0.5 ABSOLUTE BACKUP PRINT density_report_M3_7b.log RDB density_report_M3_7b.db
X NOT MARKS
}

[question] M3 maximum density(%) with 840um*840um window is 70%.

[answer] M3_7c_density {
@ M3 maximum density(%) with 840um*840um window is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M3i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 840 BACKUP PRINT density_report_M3_7c.log RDB density_report_M3_7c.db
X NOT MARKS
}


[question] [(M3 with width > 2.8um) over M2] maximum density(%) with 200um*200um step size 100um is 70%.

[answer] M3_7d_R_density_ON {
@ [(M3 with width > 2.8um) over M2] maximum density(%) with 200um*200um step size 100um is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = (((M3i WITH WIDTH > 2.800) OR (M3DUM WITH WIDTH > 2.800)) AND (M2i OR M2DUM)) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 200 STEP 100 BACKUP PRINT density_report_M3_7d.log RDB density_report_M3_7d.db
X NOT MARKS
}

[question] [(M2 with width > 2.8um) over M3] maximum density(%) with 200um*200um step size 100um is 70%.

[answer] M3_7e_R_density_ON {
@ [(M2 with width > 2.8um) over M3] maximum density(%) with 200um*200um step size 100um is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = ((M3i OR M3DUM) AND ((M2i WITH WIDTH > 2.80) OR (M2DUM WITH WIDTH > 2.80))) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 200 STEP 100 BACKUP PRINT density_report_M3_7e.log RDB density_report_M3_7e.db
X NOT MARKS
}

[question] M3 density over the whole chip is >=20%.

[answer] M3_7f_density {
@ M3 density over the whole chip is >=20%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M3i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X =DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.2 PRINT density_report_M3_7f.log RDB density_report_M3_7f.db
X NOT MARKS
}

[question] (M3 at 45degree) minimum width (run length>0um) is 0.17.

[answer] M3_8 {
@ (M3 at 45degree ) minimum width (run length>0um) is 0.17
M345 = ANGLE M3_all == 45
INT M345 < 0.17 OPPOSITE REGION
}

[question] (M3 at 45degree) minimum space to parallel M3 (run length>0um) is 0.17.

[answer] M3_9 {
@ (M3 at 45degree) minimum space to parallel M3 (run length>0um) is 0.17
M345 = ANGLE M3_all == 45
EXT M345 < 0.17 OPPOSITE REGION
}

[question] Minimum space between an Mn line end to an Mn (the parallel run length >0um) is 0.07. Excluding checking SRAM area.

[answer] M3.10a {
@Minimum space between an Mn line end to an Mn (the parallel run length >0um) is 0.07.Excluding checking SRAM area
X =EXT M3END M3<0.07 OPPOSITE REGION
X OUTSIDE INST
}

[question] Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um) is 0.07. The Mn line end extend Q from Vn, 0.03 <= Q <0.05um Excluding checking SRAM area.

[answer] M3.10b{
@ Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um) is 0.07. The Mn line end extend Q from Vn, 0.03 <= Q <0.05um Excluding checking SRAM area
X1 = EXT M3END M3 <0.07 OPPOSITE REGION
X2 = M3END COIN EDGE X1
X3 = ENC V3 X2 <0.05 OPPOSITE REGION
X4 = ENC V3 X2 <0.03 OPPOSITE REGION
X5 = V3 INTERACT X3
X6 = V3 INTERACT X4
X7 = X5 NOT X6
X= X1 TOUCH (X3 INTERACT X7)
X OUTSIDE INST
}


[question] Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um ) is 0.1. The Mn line end extend Q from Vn, 0 <= Q <0.03um

[answer] M3.10c{
@ Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um ) is 0.1. The Mn line end extend Q from Vn, 0 <= Q <0.03um
X1 = EXT M3END M3 <0.1 OPPOSITE REGION
X2 = M3END COIN EDGE X1
X3 = ENC V3 X2 <0.03 ABUT<90 OPPOSITE REGION
X4 = V3 INTERACT X3
X1 TOUCH (X3 INTERACT X4)
}

[question] Space between Vn-1 (Vn-1 is enclosed by Mn[A]) to neighboring metal line Mn[B], when the layout structures meet the following conditions:
1.Mn[A] line end definition: line width W <0.1um.
2.Vn-1 enclosure by Mn[A] line end: E < 0.05um
3.The parallel run length of Mn[A] and Mn[B]:E1 >=-0.03um
4.Space between Mn[A] to the neighboring parallel metal line: Ds<0.08um;
5.Any one edge distance from the corner of the two edges of Mn[A]: K1 <0.095um
6.At least one Vn-1 in the Mn[A] and Mn-1 intersection meet this rule is ok.
This rule is not applicable for SRAM region DRC check. 0.12
[answer] M3_11 {
@ Space between Vn-1 (Vn-1 is enclosed by Mn[A]) to neighboring metal line Mn[B], when the layout structures meet the following conditions:
@ 1. Mn[A] line end definition: line width W <0.1um.
@ 2. Vn-1 enclosure by Mn[A] line end: E < 0.05um
@ 3. The parallel run length of Mn[A] and Mn[B]:E1 >=-0.03um
@ 4. Space between Mn[A] to the neighboring parallel metal line: Ds<0.08um;
@ 5. Any one edge distance from the corner of the two edges of Mn[A]: K1 <0.095um
@ At least one Vn-1 in the Mn[A] and Mn-1 intersection meet this rule is ok.
@ This rule is not applicable for SRAM region DRC check. 0.12
LINE_END = CONVEX EDGE M3 ANGLE1 ==90 LENGTH1 >=0.08 ANGLE2 ==90 LENGTH2 >=0.08 WITH LENGTH <0.1
X1 =ENC V2 LINE_END<0.05 ABUT<90 REGION OPPOSITE
X2 = V2 INTERACT X1
X3 = X2 INSIDE (M3 AND M2)
X8 =X3 TOUCH EDGE X1
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.095
LINE_SIDE = (M3 COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_SIDE1 = ENC X3 LINE_SIDE<0.03 REGION ABUT<90 OPPOSITE
V2_EDGE =(LINE_SIDE1 OR X3) TOUCH EDGE X8
LINE_END_EXP = EXPAND EDGE V2_EDGE INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001
LINE_END_1 = LINE_END_EXP TOUCH EDGE V2_EDGE
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] M3 < 0.12 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] M3 < 0.08 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
V42 =X3 WITH EDGE (X8 TOUCH EDGE LINE_END_E1)
X5 = V2 INTERACT V42
X6 = V2 NOT X5
X7 = ((M3 AND M2) ENCLOSE X5) ENCLOSE X6
M2_CORNER1 = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
(M2_CORNER1 NOT INTERACT X7) OUTSIDE INST
}

[question] Minimum Mn to Mn space S at Mn line-end 0.1. Width W < 0.1um . The minimum space can be line end head to other Mn or line end side to other M1. Rule check:
1.S >= (Dh or Ds ). E1 =0.03, K1=0.095 , Dh=Ds=0.1 in the illustration.
2.Outside of SRAM(INST) area.
3.Waive extrusion F < 0.07.
4.Waive the violation for MOM (within MOMDMY).

[answer] M3_12_R_OFF {
@ Minimum Mn to Mn space S at Mn line-end 0.1. Width W < 0.1um . The minimum space can be line end head to other Mn or line end side to other M1. Rule check:
@ S >= (Dh or Ds ). E1 =0.03, K1=0.095 , Dh=Ds=0.1 in the illustration.
@ Outside of SRAM(INST) area.
@ Waive extrusion F < 0.07.
@ Waive the violation for MOM (within MOMDMY).
LINE_END = CONVEX EDGE M3_all ANGLE1 ==90 LENGTH1 >=0.07 ANGLE2 ==90 LENGTH2 >=0.07 WITH LENGTH < 0.1
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.064
LINE_SIDE = (M3_all COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_END_EXP = EXPAND EDGE LINE_END INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001 EXTEND BY 0.031
LINE_END_1 = LINE_END_EXP TOUCH EDGE LINE_END
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] M3_all < 0.1 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] M3_all < 0.1 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
M3_CORNER = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
MOM =((M2 OR M3) OR M4) INTERACT ( MnPIN INTERACT (SIZE MOMDMY BY 0.114))
((LINE_END_SHAPE INTERACT M3_CORNER) OUTSIDE INST) NOT (MOM OR MOMDMY)
}

[question] It is not allowed to have local density > 85% of all 3 consecutive metal (1xMn, 1xMn+1 and 1xMn+2) over any window size 62.5*62.5um (stepping size 31.25um).
The metal layers include M1/1xMn and dummy metals.
DRC doesn't check: DUMBM, MARKS and (TM2 and PA) region

[answer] M3_13_M1M2M3_density_R_OFF {
@ It is not allowed to have local density > 85% of all 3 consecutive metal (1xMn, 1xMn+1 and 1xMn+2) over any window size 62.5*62.5um (stepping size 31.25um).
@ The metal layers include M1/1xMn and dummy metals.
@ DRC doesn't check: DUMBM, MARKS and (TM2 and PA) region
DENSITY_MARK = BORDER NOT (OR DUMBM MARKS (TM2i AND PA))
M2_TAR = M2i_all NOT (OR DUMBM MARKS (TM2i AND PA))
M3_TAR = M3i_all NOT (OR DUMBM MARKS (TM2i AND PA))
M1_TAR = M1i_all NOT (OR DUMBM MARKS (TM2i AND PA))
CHECK_REGION = COPY DENSITY_MARK
DENSITY M2_TAR M3_TAR M1_TAR CHECK_REGION > 0 WINDOW 62.5 STEP 31.25 BACKUP PRINT density_report_M2_13_M1M2M3.log RDB density_report_M2_13_M1M2M3.rdb [((AREA(M2_TAR)/AREA(CHECK_REGION) -0.85))&&((AREA(M3_TAR)/AREA(CHECK_REGION) -0.85))&&(~~(AREA(M1_TAR)/AREA(CHECK_REGION) -0.85))]
}


[question] M3 density (including dummy) is >= 1%. Density check window size: 80um*80um, step size 40um.
DRC only check the region with width of (checking window NOT above excluding region) >= 40um.

[answer] M3_14_density {
@ M3 density (including dummy) is >= 1%. Density check window size: 80um*80um, step size 40um.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 40um.
DENSITY_MARK = WITH WIDTH (BORDER NOT MARKS) >= 40
CHECK_LAYER = M3i_all AND DENSITY_MARK
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.01 WINDOW 80 STEP 40 BACKUP PRINT density_report_M3_14.log RDB density_report_M3_14.db
(X NOT MARKS) WITH WIDTH >= 40
}

[question] Maximum M3 area of merged low-density windows must follow item (1) and (2).The definition of low-density window: window size 10um*10um, step size: 5um, density <1%
(1) Maximum area of merged low-density window <= 6500um2, except merged low-density windows width <= 30um.
(2) Maximum area of merged low-density window <= 18500um2.
DRC only checks the region with a width of (checking window NOT above excluding region) >= 5um.

[answer] M3_15 {
@ Maximum M3 area of merged low-density windows must follow item (1) and (2).
@ The definition of low-density window: window size 10um*10um, step size: 5um, density <1%
@ (1) Maximum area of merged low-density window <= 6500um2, except merged low-density windows width <= 30um.
@ (2) Maximum area of merged low-density window <= 18500um2.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 5um
X = DENSITY M3i_all < 0.01 WINDOW 10 STEP 5 BACKUP PRINT density_report_M3_15.log RDB density_report_M3_15.rdb
Y = X NOT MARKS
(AREA Y > 6500) WITH WIDTH > 30
(AREA Y > 16000) WITH WIDTH >= 5
}

[question] It is not allowed to have local density < 5% of all 3 consecutive metal (Mn, Mn+1 and Mn+2) over any window 30*30um (stepping 15um).
The metal layers include M1/1xMn and dummy metals.
DRC only checks the region with a width of (checking window NOT above excluding region) >= 15um.

[answer] M3_16_M1M2M3_density {
@ It is not allowed to have local density < 5% of all 3 consecutive metal (Mn, Mn+1 and Mn+2) over any window 30*30um (stepping 15um).
@ The metal layers include M1/1xMn and dummy metals.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 15um
DENSITY_MARK = WITH WIDTH (BORDER NOT MARKS) >= 15
M2_TAR = M2i_all AND DENSITY_MARK
M3_TAR = M3i_all AND DENSITY_MARK
M1_TAR = M1i_all AND DENSITY_MARK
CHECK_REGION = COPY DENSITY_MARK
DENSITY M2_TAR M3_TAR M1_TAR CHECK_REGION > 0 WINDOW 30 STEP 15 BACKUP PRINT density_report_M2_16_M1M2M3.log RDB density_report_M2_16_M1M2M3.rdb [((0.05 -AREA(M2_TAR)/AREA(CHECK_REGION) ))&&((0.05 -AREA(M3_TAR)/AREA(CHECK_REGION) ))&&(~~(0.05 -AREA(M1_TAR)/AREA(CHECK_REGION) ))]
}

[question] M4 minimum width is 0.07.

[answer] M4_1 {
@ M4 minimum width is 0.07
INT M4_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] M4 minimum width is 0.08um.

[answer] M4_1_R_OFF {
@ M4 minimum width is 0.08um
INT M4 < 0.08 ABUT<90 SINGULAR REGION
}

[question] M4 maximum width is 4.5. When M4 used for TM-1, DRC waives the (M4 AND DUPMK1) region.

[answer] M4_2 {
@ M4 maximum width is 4.5
(M4_all WITH WIDTH > 4.50) NOT (M4_all AND DUPMK1)
}

[question] M4 maximum width is 4.5.

[answer] M4_2 {
@ M4 maximum width is 4.5
M4_all WITH WIDTH > 4.50
}

[question] M4 minimum space is 0.07.

[answer] M4_3 {
@ M4 minimum space is 0.07
EXT M4_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] M4 minimum space is 0.08um.

[answer] M4_3_R_OFF {
@ M4 minimum space is 0.08um.
EXT M4 < 0.08 ABUT<90 SINGULAR REGION
}

[question] M4 minimum area is 0.0196.

[answer] M4_4 {
@ M4 minimum area is 0.0196
AREA M4_all < 0.0196
}


[question] Area when all of the M4 edge length < 0.17 m is >= 0.06um2.
This rule is not applicable for SRAM region.

[answer] M4_4a {
@ Area when all of the M4 edge length < 0.17 m is >= 0.06um2.
@ This rule is not applicable for SRAM region.
M4_ignore = M4_all WITH EDGE (LENGTH M4_all >= 0.17)
(AREA (M4_all NOT M4_ignore) < 0.06) NOT INST
}

[question] M4 minimum enclosed area is 0.2.

[answer] M4_5 {
@ M4 minimum enclosed area is 0.2
AREA ((HOLES M4_all INNER) NOT M4_all) < 0.2
}

[question] Minimum space between two run length > 0.3 parallel metal lines with both metal line width is > 0.22 is 0.10.

[answer] M4_6 {
@ Minimum space between two run length > 0.3 parallel metal lines
@ with both metal line width is > 0.22 is 0.10
CMACRO Mn_6 M4i_all 0.3 0.22 0.1
}

[question] Minimum space between two length > 0.3 parallel metal lines with both metal line width is > 0.22 is 0.12um.

[answer] M4_6_R_OFF {
@ Minimum space between two length > 0.3 parallel metal lines
@ with both metal line width is > 0.22 is 0.12um.
CMACRO Mn_6a M4i 0.3 0.22 0.12
}

[question] Minimum space between two length > 0.6 parallel metal lines with one or both metal line width is > 0.7 is 0.12.

[answer] M4_6a {
@ Minimum space between two length > 0.6 parallel metal lines
@ with one or both metal line width is > 0.7 is 0.12
CMACRO Mn_6a M4i_all 0.6 0.7 0.12
}

[question] Minimum space between two length > 0.6 parallel metal lines with one metal line width is > 0.22 and other metal line width is >0.7um is 0.14.

[answer] M4_6b {
@ Minimum space between two length > 0.6 parallel metal lines with one metal
@ line width is > 0.22 and other metal line width is >0.7um is 0.14
CMACRO Mn_6b M4i_all 0.6 0.22 0.7 0.14
}

[question] Minimum space between two length > 1.5 parallel metal lines with one or both metal line width is > 1.5 is 0.30.

[answer] M4_6c {
@ Minimum space between two length > 1.5 parallel metal lines
@ with one or both metal line width is > 1.5 is 0.30
CMACRO Mn_6c M4i_all 1.5 1.5 0.3
}

[question] M4 minimum density(%) in 125um*125um window with step size 62.5um is 10%.

[answer] M4_7_density {
@ M4 minimum density(%) in 125um*125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M4i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M4_7.log RDB density_report_M4_7.db
X NOT MARKS
}

[question] M4 density over the whole chip is >=20%.

[answer] M4_7f_density {
@ M4 density over the whole chip is >=20%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M4i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X =DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.2 PRINT density_report_M4_7f.log RDB density_report_M4_7f.db
X NOT MARKS
}

[question] M4 minimum density(%) in 125um*125um window with step size 62.5um is 10%.

[answer] M4_7_density {
@ M4 minimum density(%) in 125um*125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M4i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M4_7.log RDB density_report_M4_7.db
X NOT MARKS
}


[question] Mn density over the whole chip is >=20%.

[answer] M4_7f_density {
@ Mn density over the whole chip is >=20%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M4i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X =DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.2 PRINT density_report_M4_7f.log RDB density_report_M4_7f.db
X NOT MARKS
}

[question] M4 minimum density(%) in 125um*125um window with step size 62.5um is 10%.

[answer] M4_7_density {
@ M4 minimum density(%) in 125um*125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M4i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M4_7.log RDB density_report_M4_7.db
X NOT MARKS
}

[question] Mn density over the whole chip is >=20%.

[answer] M4_7f_density {
@ Mn density over the whole chip is >=20%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M4i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X =DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.2 PRINT density_report_M4_7f.log RDB density_report_M4_7f.db
X NOT MARKS
}

[question] M4 minimum density(%) in 125um*125um window with step size 62.5um is 10%.

[answer] M4_7_density {
@ M4 minimum density(%) in 125um*125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M4i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M4_7.log RDB density_report_M4_7.db
X NOT MARKS
}

[question] Mn density over the whole chip is >=20%.

[answer] M4_7f_density {
@ Mn density over the whole chip is >=20%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M4i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X =DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.2 PRINT density_report_M4_7f.log RDB density_report_M4_7f.db
X NOT MARKS
}

[question] M4 minimum density(%) in 125um*125um window with step size 62.5um is 10%.

[answer] M4_7_density {
@ M4 minimum density(%) in 125um*125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M4i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M4_7.log RDB density_report_M4_7.db
X NOT MARKS
}

[question] M4 maximum density(%) in 125um*125um window with step size 62.5um is 85%.

[answer] M4_7a_density {
@ M4 maximum density(%) in 125um*125um window with step size 62.5um is 85%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M4i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.85 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M4_7a.log RDB density_report_M4_7a.db
X NOT MARKS
}

[question] M4 maximum density difference(%) between any two 200um adjacent window (stepped without overlapping) is 50%.

[answer] M4_7b_density {
@ M4 maximum density difference(%) between any two 200um adjacent window (stepped without overlapping) is 50%
X = DENSITY (M4i OR M4DUM) >= 0 WINDOW 200 GRADIENT > 0.5 ABSOLUTE BACKUP PRINT density_report_M4_7b.log RDB density_report_M4_7b.db
X NOT MARKS
}

[question] M4 maximum density(%) with 840um*840um window is 70%.

[answer] M4_7c_density {
@ M4 maximum density(%) with 840um*840um window is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M4i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 840 BACKUP PRINT density_report_M4_7c.log RDB density_report_M4_7c.db
X NOT MARKS
}


[question] [(M4 with width > 2.8um) over M3] maximum density(%) with 200um*200um step size 100um is 70%

[answer] M4_7d_R_density_ON {
@ [(M4 with width > 2.8um) over M3] maximum density(%) with 200um*200um step size 100um is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = (((M4i WITH WIDTH > 2.800) OR (M4DUM WITH WIDTH > 2.800)) AND (M3i OR M3DUM)) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 200 STEP 100 BACKUP PRINT density_report_M4_7d.log RDB density_report_M4_7d.db
X NOT MARKS
}

[question] [(M3 with width > 2.8um) over M4] maximum density(%) with 200um*200um step size 100um is 70%

[answer] M4_7e_R_density_ON {
@ [(M3 with width > 2.8um) over M4] maximum density(%) with 200um*200um step size 100um is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = ((M4i OR M4DUM) AND ((M3i WITH WIDTH > 2.80) OR (M3DUM WITH WIDTH > 2.80))) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 200 STEP 100 BACKUP PRINT density_report_M4_7e.log RDB density_report_M4_7e.db
X NOT MARKS
}

[question] (M4 at 45degree ) minimum width (run length>0um) is 0.17

[answer] M4_8 {
@ (M4 at 45degree ) minimum width (run length>0um) is 0.17
M445 = ANGLE M4_all == 45
INT M445 < 0.17 OPPOSITE REGION
}

[question] Minimum space between parallel M4 at 45 degrees (run length > 0um) is 0.17.

[answer] M4_9 {
@ (M4 at 45degree) minimum space to parallel M4 (run length>0um) is 0.17
M445 = ANGLE M4_all == 45
EXT M445 < 0.17 OPPOSITE REGION
}

[question] Minimum space between an M4 line end to an M4 (parallel run length > 0um) is 0.07, excluding checking SRAM area.

[answer] M4.10a {
@Minimum space between an Mn line end to an Mn (the parallel run length >0um) is 0.07.Excluding checking SRAM area
X =EXT M4END M4<0.07 OPPOSITE REGION
X OUTSIDE INST
}

[question] Minimum space between an M4 line end (with V4) to an M4 (parallel run length > 0um) is 0.07. The M4 line end extends Q from V4, 0.03 <= Q < 0.05um, excluding checking SRAM area.

[answer] M4.10b{
@ Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um) is 0.07. The Mn line end extend Q from Vn, 0.03 <= Q <0.05um Excluding checking SRAM area
X1 = EXT M4END M4 <0.07 OPPOSITE REGION
X2 = M4END COIN EDGE X1
X3 = ENC V4 X2 <0.05 OPPOSITE REGION
X4 = ENC V4 X2 <0.03 OPPOSITE REGION
X5 = V4 INTERACT X3
X6 = V4 INTERACT X4
X7 = X5 NOT X6
X=X1 TOUCH (X3 INTERACT X7)
X OUTSIDE INST
}


[question] Minimum space between an M4 line end (with V4) to an M4 (parallel run length > 0um ) is 0.1. The M4 line end extends Q from V4, 0 <= Q < 0.03um.

[answer] M4.10c{
@ Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um ) is 0.1. The Mn line end extend Q from Vn, 0 <= Q <0.03um
X1 = EXT M4END M4 <0.1 OPPOSITE REGION
X2 = M4END COIN EDGE X1
X3 = ENC V4 X2 <0.03 ABUT<90 OPPOSITE REGION
X4 = V4 INTERACT X3
X1 TOUCH (X3 INTERACT X4)
}

[question]Space between Vn-1 (Vn-1 is enclosed by Mn[A]) to neighbouring metal line Mn[B], when the layout structures meet the following conditions:
1. Mn[A] line end definition: line width W <0.1um.
2. Vn-1 enclosure by Mn[A] line end: E < 0.05um
3. The parallel run length of Mn[A] and Mn[B]:E1 >=-0.03um
4. Space between Mn[A] to the neighboring parallel metal line: Ds<0.08um;
5. Any one edge distance from the corner of the two edges of Mn[A]: K1 <0.095um
At least one Vn-1 in the Mn[A] and Mn-1 intersection meet this rule is ok.
This rule is not applicable for SRAM region DRC check. 0.12

[answer] M4_11 {
@ Space between Vn-1 (Vn-1 is enclosed by Mn[A]) to neighbouring metal line Mn[B], when the layout structures meet the following conditions:
@ 1. Mn[A] line end definition: line width W <0.1um.
@ 2. Vn-1 enclosure by Mn[A] line end: E < 0.05um
@ 3. The parallel run length of Mn[A] and Mn[B]:E1 >=-0.03um
@ 4. Space between Mn[A] to the neighboring parallel metal line: Ds<0.08um;
@ 5. Any one edge distance from the corner of the two edges of Mn[A]: K1 <0.095um
@ At least one Vn-1 in the Mn[A] and Mn-1 intersection meet this rule is ok.
@ This rule is not applicable for SRAM region DRC check. 0.12
LINE_END = CONVEX EDGE M4 ANGLE1 ==90 LENGTH1 >=0.08 ANGLE2 ==90 LENGTH2 >=0.08 WITH LENGTH <0.1
X1 =ENC V3 LINE_END<0.05 ABUT<90 REGION OPPOSITE
X2 = V3 INTERACT X1
X3 = X2 INSIDE (M3 AND M4)
X8 =X3 TOUCH EDGE X1
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.095
LINE_SIDE = (M4 COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_SIDE1 = ENC X3 LINE_SIDE<0.03 REGION ABUT<90 OPPOSITE
V3_EDGE =(LINE_SIDE1 OR X3) TOUCH EDGE X8
LINE_END_EXP = EXPAND EDGE V3_EDGE INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001
LINE_END_1 = LINE_END_EXP TOUCH EDGE V3_EDGE
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] M4 < 0.12 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] M4< 0.08 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
V42 =X3 WITH EDGE (X8 TOUCH EDGE LINE_END_E1)
X5 = V3 INTERACT V42
X6 = V3 NOT X5
X7 = ((M3 AND M4) ENCLOSE X5) ENCLOSE X6
M2_CORNER1 = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
(M2_CORNER1 NOT INTERACT X7) OUTSIDE INST
}

[question] Minimum Mn to Mn space S at Mn line-end is 0.1. Width W < 0.1um. The minimum space can be line end head to other Mn or line end side to other M1. Rule check:1. S >= (Dh or Ds ). E1 = 0.03, K1=0.095 , Dh=Ds=0.1 in the illustration.2.Outside of SRAM(INST) area.3.Waive extrusion F < 0.07.4.Waive the violation for MOM (within MOMDMY).

[answer] M4_12_R_OFF {
@ Minimum Mn to Mn space S at Mn line-end 0.1. Width W < 0.1um . The minimum space can be line end head to other Mn or line end side to other M1. Rule check:
@ S >= (Dh or Ds ). E1 =0.03, K1=0.095 , Dh=Ds=0.1 in the illustration.
@ Outside of SRAM(INST) area.
@ Waive extrusion F < 0.07.
@ Waive the violation for MOM (within MOMDMY).
LINE_END = CONVEX EDGE M4_all ANGLE1 ==90 LENGTH1 >=0.07 ANGLE2 ==90 LENGTH2 >=0.07 WITH LENGTH < 0.1
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.064
LINE_SIDE = (M4_all COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_END_EXP = EXPAND EDGE LINE_END INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001 EXTEND BY 0.031
LINE_END_1 = LINE_END_EXP TOUCH EDGE LINE_END
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] M4_all < 0.1 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] M4_all < 0.1 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
M4_CORNER = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
MOM =((M3 OR M4) OR M5) INTERACT ( MnPIN INTERACT (SIZE MOMDMY BY 0.114))
((LINE_END_SHAPE INTERACT M4_CORNER) OUTSIDE INST) NOT (MOM OR MOMDMY)
}


[question] It is not allowed to have local density > 85% of all 3 consecutive metal (1xMn, 1xMn+1, and 1xMn+2) over any window size 62.5*62.5um (stepping size 31.25um).The metal layers include M1/1xMn and dummy metals. DRC doesn't check: DUMBM, MARKS and (TM2 and PA) region

[answer] M4_13_M2M3M4_density_R_OFF {
@ It is not allowed to havel local density > 85% of all 3 consecutive metal (1xMn, 1xMn+1 and 1xMn+2) over any window size 62.5*62.5um (stepping size 31.25um).
@ The metal layers include M1/1xMn and dummy metals.
@ DRC doesn't check: DUMBM, MARKS and (TM2 and PA) region
DENSITY_MARK = BORDER NOT (OR DUMBM MARKS (TM2i AND PA))
M2_TAR = M2i_all NOT (OR DUMBM MARKS (TM2i AND PA))
M3_TAR = M3i_all NOT (OR DUMBM MARKS (TM2i AND PA))
M4_TAR = M4i_all NOT (OR DUMBM MARKS (TM2i AND PA))
CHECK_REGION = COPY DENSITY_MARK
DENSITY M2_TAR M3_TAR M4_TAR CHECK_REGION > 0 WINDOW 62.5 STEP 31.25 BACKUP PRINT density_report_M2_13_M2M3M4.log RDB density_report_M2_13_M2M3M4.rdb [((AREA(M2_TAR)/AREA(CHECK_REGION) -0.85))&&((AREA(M3_TAR)/AREA(CHECK_REGION) -0.85))&&(~~(AREA(M4_TAR)/AREA(CHECK_REGION) -0.85))]
}

[question] M4 density (including dummy) is >= 1%. Density check window size: 80um*80um, step size 40um.DRC only check the region with width of (checking window NOT above excluding region) >= 40um.

[answer] M4_14_density {
@ M4 density (including dummy) is >= 1%.Density check window size: 80um*80um, step size 40um.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 40um.
DENSITY_MARK = WITH WIDTH (BORDER NOT MARKS) >= 40
CHECK_LAYER = M4i_all AND DENSITY_MARK
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.01 WINDOW 80 STEP 40 BACKUP PRINT density_report_M4_14.log RDB density_report_M4_14.db
(X NOT MARKS) WITH WIDTH >= 40
}

[question] Maximum M4 area of merged low-density windows must follow item (1) and (2). The definition of low-density window: window size 10um*10um, step size: 5um, density <1%.
(1) Maximum area of merged low-density window <= 6500um2, except merged low-density windows width <= 30um.
(2) Maximum area of merged low-density window <= 18500um2.
DRC only check the region with width of (checking window NOT above excluding region) >= 5um
[answer] M4_15 {
@ Maximum M4 area of merged low density windows must follow item (1) and (2).
@ The definition of low density window: window size 10um*10um, step size: 5um, density <1%
@ (1) Maximum area of merged low-density window <= 6500um2, except merged low-density windows width <= 30um.
@ (2) Maximum area of merged low-density window <= 18500um2.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 5um
X = DENSITY M4i_all < 0.01 WINDOW 10 STEP 5 BACKUP PRINT density_report_M4_15.log RDB density_report_M4_15.rdb
Y = X NOT MARKS
(AREA Y > 6500) WITH WIDTH > 30
(AREA Y > 16000) WITH WIDTH >= 5
}

[question] It is not allowed to have local density < 5% of all 3 consecutive metal (Mn, Mn+1, and Mn+2) over any window 30*30um (stepping 15um).The metal layers include M1/1xMn and dummy metals.DRC only check the region with width of (checking window NOT above excluding region) >= 15um

[answer] M4_16_M2M3M4_density {
@ It is not allowed to havel local density < 5% of all 3 consecutive metal (Mn, Mn+1 and Mn+2) over any window 30*30um (stepping 15um).
@ The metal layers include M1/1xMn and dummy metals.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 15um
DENSITY_MARK = WITH WIDTH (BORDER NOT MARKS) >= 15
M2_TAR = M2i_all AND DENSITY_MARK
M3_TAR = M3i_all AND DENSITY_MARK
M4_TAR = M4i_all AND DENSITY_MARK
CHECK_REGION = COPY DENSITY_MARK
DENSITY M2_TAR M3_TAR M4_TAR CHECK_REGION > 0 WINDOW 30 STEP 15 BACKUP PRINT density_report_M2_16_M2M3M4.log RDB density_report_M2_16_M2M3M4.rdb [((0.05 -AREA(M2_TAR)/AREA(CHECK_REGION) ))&&((0.05 -AREA(M3_TAR)/AREA(CHECK_REGION) ))&&(~~(0.05 -AREA(M4_TAR)/AREA(CHECK_REGION) ))]
}

[question] M5 minimum width is 0.07.

[answer] M5_1 {
@ M5 minimum width is 0.07
INT M5_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] M5 minimum width is 0.08um.

[answer] M5_1_R_OFF {
@ M5 minimum width is 0.08um.
INT M5 < 0.08 ABUT<90 SINGULAR REGION
}

[question] M5 maximum width is 4.5. When M5 used for TM-1, DRC waives the (M5 AND DUPMK1) region.

[answer] M5_2 {
@ M5 maximum width is 4.5.
@ When M5 used for TM-1,DRC waive the (M5 AND DUPMK1) region
(M5_all WITH WIDTH > 4.50) NOT (M5_all AND DUPMK1)
}


[question] M5 maximum width is 4.5.

[answer] M5_2 {
@ M5 maximum width is 4.5
M5_all WITH WIDTH > 4.50
}

[question] M5 minimum space is 0.07.

[answer] M5_3 {
@ M5 minimum space is 0.07
EXT M5_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] M5 minimum space is 0.08um.

[answer] M5_3_R_OFF {
@ M5 minimum space is 0.08um.
EXT M5 < 0.08 ABUT<90 SINGULAR REGION
}

[question] M5 minimum area is 0.0196.

[answer] M5_4 {
@ M5 minimum area is 0.0196
AREA M5_all < 0.0196
}

[question] Area when all of the M5 edge length < 0.17 m is >= 0.06um2. This rule is not applicable for SRAM region.

[answer] M5_4a {
@ Area when all of the M5 edge length < 0.17 m is >= 0.06um2.
@ This rule is not applicable for SRAM region.
M5_ignore = M5_all WITH EDGE (LENGTH M5_all >= 0.17)
(AREA (M5_all NOT M5_ignore) < 0.06) NOT INST
}

[question] M5 minimum enclosed area is 0.2.

[answer] M5_5 {
@ M5 minimum enclosed area is 0.2
AREA ((HOLES M5_all INNER) NOT M5_all) < 0.2
}

[question] Minimum space between two run length > 0.3 parallel metal lines with both metal line width is > 0.22 is 0.10.

[answer] M5_6 {
@ Minimum space between two run length > 0.3 parallel metal lines
@ with both metal line width is > 0.22 is 0.10
CMACRO Mn_6 M5i_all 0.3 0.22 0.1
}

[question] Minimum space between two length > 0.3 parallel metal lines with both metal line width is > 0.22 is 0.12um.

[answer] M5_6_R_OFF {
@ Minimum space between two length > 0.3 parallel metal lines
@ with both metal line width is > 0.22 is 0.12um.
CMACRO Mn_6a M5i 0.3 0.22 0.12
}

[question] Minimum space between two length > 0.6 parallel metal lines with one or both metal line width is > 0.7 is 0.12.

[answer] M5_6a {
@ Minimum space between two length > 0.6 parallel metal lines
@ with one or both metal line width is > 0.7 is 0.12
CMACRO Mn_6a M5i_all 0.6 0.7 0.12
}

[question] Minimum space between two length > 0.6 parallel metal lines with one metal line width is > 0.22 and the other metal line width is >0.7um is 0.14.

[answer] M5_6b {
@ Minimum space between two length > 0.6 parallel metal lines with one metal
@ line width is > 0.22 and the other metal line width is >0.7um is 0.14
CMACRO Mn_6b M5i_all 0.6 0.22 0.7 0.14
}

[question] Minimum space between two length > 1.5 parallel metal lines with one or both metal line width is > 1.5 is 0.30.

[answer] M5_6c {
@ Minimum space between two length > 1.5 parallel metal lines
@ with one or both metal line width is > 1.5 is 0.30
CMACRO Mn_6c M5i_all 1.5 1.5 0.3
}

[question] M5 minimum density(%) in 125um*125um window with step size 62.5um is 10%.

[answer] M5_7_density {
@ M5 minimum density(%) in 125um*125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M5i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M5_7.log RDB density_report_M5_7.db
X NOT MARKS
}

[question] M5 density over the whole chip is >=20%.

[answer] M5_7f_density {
@ M5 density over the whole chip is >=20%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M5i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X =DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.2 PRINT density_report_M5_7f.log RDB density_report_M5_7f.db
X NOT MARKS
}

[question] M5 minimum density(%) in 125um*125um window with step size 62.5um is 10%.

[answer] M5_7_density {
@ M5 minimum density(%) in 125um*125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M5i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M5_7.log RDB density_report_M5_7.db
X NOT MARKS
}

[question] M5 density over the whole chip is >=20%.

[answer] M5_7f_density {
@ M5 density over the whole chip is >=20%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M5i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X =DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.2 PRINT density_report_M5_7f.log RDB density_report_M5_7f.db
X NOT MARKS
}

[question] M5 minimum density(%) in 125um*125um window with step size 62.5um is 10%.

[answer] M5_7_density {
@ M5 minimum density(%) in 125um*125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M5i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M5_7.log RDB density_report_M5_7.db
X NOT MARKS
}

[question] M5 density over the whole chip is >=20%.

[answer] M5_7f_density {
@ M5 density over the whole chip is >=20%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M5i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X =DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.2 PRINT density_report_M5_7f.log RDB density_report_M5_7f.db
X NOT MARKS
}

[question] M5 minimum density(%) in 125um*125um window with step size 62.5um is 10%.

[answer] M5_7_density {
@ M5 minimum density(%) in 125um*125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M5i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M5_7.log RDB density_report_M5_7.db
X NOT MARKS
}


[question] M5 density over the whole chip is >=20%.

[answer] M5_7f_density {
@ M5 density over the whole chip is >=20%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M5i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X =DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.2 PRINT density_report_M5_7f.log RDB density_report_M5_7f.db
X NOT MARKS
}

[question] M5 maximum density(%) in 125um*125um window with step size 62.5um is 85%.

[answer] M5_7a_density {
@ M5 maximum density(%) in 125um*125um window with step size 62.5um is 85%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M5i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.85 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M5_7a.log RDB density_report_M5_7a.db
X NOT MARKS
}

[question] M5 maximum density difference(%) between any two 200um adjacent window (stepped without overlapping) is 50%.

[answer] M5_7b_density {
@ M5 maximum density difference(%) between any two 200um adjacent window (stepped without overlapping) is 50%
X = DENSITY (M5i OR M5DUM) >= 0 WINDOW 200 GRADIENT > 0.5 ABSOLUTE BACKUP PRINT density_report_M5_7b.log RDB density_report_M5_7b.db
X NOT MARKS
}

[question] M5 maximum density(%) with 840um*840um window is 70%.

[answer] M5_7c_density {
@ M5 maximum density(%) with 840um*840um window is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M5i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 840 BACKUP PRINT density_report_M5_7c.log RDB density_report_M5_7c.db
X NOT MARKS
}

[question] [(M5 with width > 2.8um) over M4] maximum density(%) with 200um*200um step size 100um is 70%.

[answer] M5_7d_R_density_ON {
@ [(M5 with width > 2.8um) over M4] maximum density(%) with 200um*200um step size 100um is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = (((M5i WITH WIDTH > 2.800) OR (M5DUM WITH WIDTH > 2.800)) AND (M4i OR M4DUM)) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 200 STEP 100 BACKUP PRINT density_report_M5_7d.log RDB density_report_M5_7d.db
X NOT MARKS
}

[question] [(M4 with width > 2.8um) over M5] maximum density(%) with 200um*200um step size 100um is 70%.

[answer] M5_7e_R_density_ON {
@ [(M4 with width > 2.8um) over M5] maximum density(%) with 200um*200um step size 100um is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = ((M5i OR M5DUM) AND ((M4i WITH WIDTH > 2.80) OR (M4DUM WITH WIDTH > 2.80))) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 200 STEP 100 BACKUP PRINT density_report_M5_7e.log RDB density_report_M5_7e.db
X NOT MARKS
}

[question] (M5 at 45degree ) minimum width (run length>0um) is 0.17.

[answer] M5_8 {
@ (M5 at 45degree ) minimum width (run length>0um) is 0.17
M545 = ANGLE M5_all == 45
INT M545 < 0.17 OPPOSITE REGION
}

[question] (M5 at 45degree) minimum space to parallel M5 (run length>0um) is 0.17.

[answer] M5_9 {
@ (M5 at 45degree) minimum space to parallel M5 (run length>0um) is 0.17
M545 = ANGLE M5_all == 45
EXT M545 < 0.17 OPPOSITE REGION
}


[question] Minimum space between an Mn line end to an Mn (the parallel run length >0um) is 0.07. Excluding checking SRAM area.

[answer] M5.10a {
@ Minimum space between an Mn line end to an Mn (the parallel run length >0um) is 0.07 Excluding checking SRAM area
X=EXT M5END M5<0.07 OPPOSITE REGION
X OUTSIDE INST
}

[question] Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um) is 0.07. The Mn line end extends Q from Vn, 0.03 <= Q < 0.05um. Excluding checking SRAM area.

[answer] M5.10b{
@ Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um) is 0.07. The Mn line end extend Q from Vn, 0.03 <= Q <0.05um. Excluding checking SRAM area
X1 = EXT M5END M5 <0.07 OPPOSITE REGION
X2 = M5END COIN EDGE X1
X3 = ENC V5 X2 <0.05 OPPOSITE REGION
X4 = ENC V5 X2 <0.03 OPPOSITE REGION
X5 = V5 INTERACT X3
X6 = V5 INTERACT X4
X7 = X5 NOT X6
X =X1 TOUCH (X3 INTERACT X7)
X OUTSIDE INST
}

[question] Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um) is 0.1. The Mn line end extends Q from Vn, 0 <= Q < 0.03um.

[answer] M5.10c{
@ Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um ) is 0.1. The Mn line end extend Q from Vn, 0 <= Q <0.03um
X1 = EXT M5END M5 <0.1 OPPOSITE REGION
X2 = M5END COIN EDGE X1
X3 = ENC V5 X2 <0.03 ABUT<90 OPPOSITE REGION
X4 = V5 INTERACT X3
X1 TOUCH (X3 INTERACT X4)
}

[question] Space between Vn-1 (Vn-1 is enclosed by Mn[A]) and neighboring metal line Mn[B], considering specific conditions:1. Mn[A] line end definition: line width W <0.1um.
2. Vn-1 enclosure by Mn[A] line end: E < 0.05um
3. The parallel run length of Mn[A] and Mn[B]:E1 >=-0.03um
4. Space between Mn[A] to the neighboring parallel metal line: Ds<0.08um;
5. Any one edge distance from the corner of the two edges of Mn[A]: K1 <0.095um
At least one Vn-1 in the Mn[A] and Mn-1 intersection meet this rule is ok.
This rule is not applicable for SRAM region DRC check. 0.12

[answer] M5_11 {
@ Space between Vn-1 (Vn-1 is enclosed by Mn[A]) to neighbouring metal line Mn[B], when the layout structures meet the following conditions:
@ 1. Mn[A] line end definition: line width W <0.1um.
@ 2. Vn-1 enclosure by Mn[A] line end: E < 0.05um
@ 3. The parallel run length of Mn[A] and Mn[B]:E1 >=-0.03um
@ 4. Space between Mn[A] to the neighboring parallel metal line: Ds<0.08um;
@ 5. Any one edge distance from the corner of the two edges of Mn[A]: K1 <0.095um
@ At least one Vn-1 in the Mn[A] and Mn-1 intersection meet this rule is ok.
@ This rule is not applicable for SRAM region DRC check. 0.12
LINE_END = CONVEX EDGE M5 ANGLE1 ==90 LENGTH1 >=0.08 ANGLE2 ==90 LENGTH2 >=0.08 WITH LENGTH <0.1
X1 =ENC V4 LINE_END<0.05 ABUT<90 REGION OPPOSITE
X2 = V4 INTERACT X1
X3 = X2 INSIDE (M5 AND M4)
X8 =X3 TOUCH EDGE X1
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.095
LINE_SIDE = (M5 COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_SIDE1 = ENC X3 LINE_SIDE<0.03 REGION ABUT<90 OPPOSITE
V4_EDGE =(LINE_SIDE1 OR X3) TOUCH EDGE X8
LINE_END_EXP = EXPAND EDGE V4_EDGE INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001
LINE_END_1 = LINE_END_EXP TOUCH EDGE V4_EDGE
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] M5 < 0.12 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] M5< 0.08 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
V42 =X3 WITH EDGE (X8 TOUCH EDGE LINE_END_E1)
X5 = V4 INTERACT V42
X6 = V4 NOT X5
X7 = ((M5 AND M4) ENCLOSE X5) ENCLOSE X6
M2_CORNER1 = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
(M2_CORNER1 NOT INTERACT X7) OUTSIDE INST
}


[question] Minimum Mn to Mn space S at Mn line-end is 0.1. Width W < 0.1um. The minimum space can be line end head to other Mn or line end side to other M1. Rule check: S >= (Dh or Ds ). E1 = 0.03, K1 = 0.095 , Dh = Ds = 0.1 in the illustration. Outside of SRAM (INST) area. Waive extrusion F < 0.07. Waive the violation for MOM (within MOMDMY).

[answer] M5_12_R_OFF {
@ Minimum Mn to Mn space S at Mn line-end 0.1. Width W < 0.1um . The minimum space can be line end head to other Mn or line end side to other M1. Rule check:
@ S >= (Dh or Ds ). E1 =0.03, K1=0.095 , Dh=Ds=0.1 in the illustration.
@ Outside of SRAM(INST) area.
@ Waive extrusion F < 0.07.
@ Waive the violation for MOM (within MOMDMY).
LINE_END = CONVEX EDGE M5_all ANGLE1 ==90 LENGTH1 >=0.07 ANGLE2 ==90 LENGTH2 >=0.07 WITH LENGTH < 0.1
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.064
LINE_SIDE = (M5_all COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_END_EXP = EXPAND EDGE LINE_END INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001 EXTEND BY 0.031
LINE_END_1 = LINE_END_EXP TOUCH EDGE LINE_END
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] M5_all < 0.1 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] M5_all < 0.1 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
M5_CORNER = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
MOM =((M4 OR M5) OR M6) INTERACT ( MnPIN INTERACT (SIZE MOMDMY BY 0.114))
((LINE_END_SHAPE INTERACT M5_CORNER) OUTSIDE INST) NOT (MOM OR MOMDMY)
}

[question] Maximum M5 area of merged low-density windows must follow item (1) and (2). The definition of low-density window: window size 10um*10um, step size: 5um, density <1%. (1) Maximum area of merged low-density window <= 6500um2, except merged low-density windows width <= 30um. (2) Maximum area of merged low-density window <= 18500um2.DRC only check the region with width of (checking window NOT above excluding region) >= 5um

[answer] M5_15 {
@ Maximum M5 area of merged low-density windows must follow item (1) and (2).
@ The definition of low-density window: window size 10um*10um, step size: 5um, density <1%
@ (1) Maximum area of merged low-density window <= 6500um2, except merged low-density windows width <= 30um.
@ (2) Maximum area of merged low-density window <= 18500um2.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 5um
X = DENSITY M5i_all < 0.01 WINDOW 10 STEP 5 BACKUP PRINT density_report_M5_15.log RDB density_report_M5_15.rdb
Y = X NOT MARKS
(AREA Y > 6500) WITH WIDTH > 30
(AREA Y > 16000) WITH WIDTH >= 5
}


[question] It is not allowed to have local density < 5% of all 3 consecutive metal (Mn, Mn+1, and Mn+2) over any window 30*30um (stepping 15um). The metal layers include M1/1xMn and dummy metals. DRC only checks the region with a width of (checking window NOT above excluding region) >= 15um.

[answer] M5_16_M3M4M5_density {
@ It is not allowed to have local density < 5% of all 3 consecutive metal (Mn, Mn+1 and Mn+2) over any window 30*30um (stepping 15um).
@ The metal layers include M1/1xMn and dummy metals.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 15um
DENSITY_MARK = WITH WIDTH (BORDER NOT MARKS) >= 15
M3_TAR = M3i_all AND DENSITY_MARK
M4_TAR = M4i_all AND DENSITY_MARK
M5_TAR = M5i_all AND DENSITY_MARK
CHECK_REGION = COPY DENSITY_MARK
DENSITY M3_TAR M4_TAR M5_TAR CHECK_REGION > 0 WINDOW 30 STEP 15 BACKUP PRINT density_report_M3_16_M3M4M5.log RDB density_report_M3_16_M3M4M5.rdb [((0.05 -AREA(M3_TAR)/AREA(CHECK_REGION) ))&&((0.05 -AREA(M4_TAR)/AREA(CHECK_REGION) ))&&(~~(0.05 -AREA(M5_TAR)/AREA(CHECK_REGION) ))]
}

[question] M6 minimum width is 0.07.

[answer] M6_1 {
@ M6 minimum width is 0.07
INT M6_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] M6 minimum width is 0.08um.

[answer] M6_1_R_OFF {
@ M6 minimum width is 0.08um.
INT M6 < 0.08 ABUT<90 SINGULAR REGION
}

[question] M6 maximum width is 4.5. When M6 used for TM-1, DRC waives the (M6 AND DUPMK1) region.

[answer] M6_2 {
@ M6 maximum width is 4.5.
@ When M6 used for TM-1,DRC waive the (M6 AND DUPMK1) region.
(M6_all WITH WIDTH > 4.50) NOT (M6_all AND DUPMK1)
}

[question] M6 maximum width is 4.5.

[answer] M6_2 {
@ M6 maximum width is 4.5
M6_all WITH WIDTH > 4.50
}

[question] M6 minimum space is 0.07.

[answer] M6_3 {
@ M6 minimum space is 0.07
EXT M6_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] M6 minimum space is 0.08.

[answer] M6_3_R_OFF {
@ M6 minimum space is 0.08
EXT M6 < 0.08 ABUT<90 SINGULAR REGION
}

[question] M6 minimum area is 0.0196.

[answer] M6_4 {
@ M6 minimum area is 0.0196
AREA M6_all < 0.0196
}

[question] Area when all of the M6 edge length < 0.17 m is >= 0.06um2. This rule is not applicable for SRAM region.

[answer] M6_4a {
@ Area when all of the M6 edge length < 0.17 m is >= 0.06um2.
@ This rule is not applicable for SRAM region.
M6_ignore = M6_all WITH EDGE (LENGTH M6_all >= 0.17)
(AREA (M6_all NOT M6_ignore) < 0.06) NOT INST
}

[question] M6 minimum enclosed area is 0.2.

[answer] M6_5 {
@ M6 minimum enclosed area is 0.2
AREA ((HOLES M6_all INNER) NOT M6_all) < 0.2
}

[question] Minimum space between two run length > 0.3 parallel metal lines with both metal line width is > 0.22 is 0.10.

[answer] M6_6 {
@ Minimum space between two run length > 0.3 parallel metal lines
@ with both metal line width is > 0.22 is 0.10
CMACRO Mn_6 M6i_all 0.3 0.22 0.1
}


[question] Minimum space between two length > 0.3 parallel metal lines with both metal line width is > 0.22 is 0.12um.

[answer] M6_6_R_OFF {
@ Minimum space between two length > 0.3 parallel metal lines
@ with both metal line width is > 0.22 is 0.12um.
CMACRO Mn_6a M6i 0.3 0.22 0.12
}

[question] Minimum space between two length > 0.6 parallel metal lines with one or both metal line width is > 0.7 is 0.12.

[answer] M6_6a {
@ Minimum space between two length > 0.6 parallel metal lines
@ with one or both metal line width is > 0.7 is 0.12
CMACRO Mn_6a M6i_all 0.6 0.7 0.12
}

[question] Minimum space between two length > 0.6 parallel metal lines with one metal line width is > 0.22 and the other metal line width is >0.7um is 0.14.

[answer] M6_6b {
@ Minimum space between two length > 0.6 parallel metal lines with one metal
@ line width is > 0.22 and the other metal line width is >0.7um is 0.14
CMACRO Mn_6b M6i_all 0.6 0.22 0.7 0.14
}

[question] Minimum space between two length > 1.5 parallel metal lines with both metal line width is > 1.5 is 0.30.

[answer] M6_6c {
@ Minimum space between two length > 1.5 parallel metal lines
@ with both metal line width is > 1.5 is 0.30
CMACRO Mn_6c M6i_all 1.5 1.5 0.3
}

[question] M6 minimum density(%) in 125um*125um window with a step size of 62.5um is 10%.

[answer] M6_7_density {
@ M6 minimum density(%) in 125um*125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M6i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M6_7.log RDB density_report_M6_7.db
X NOT MARKS
}

[question] M6 density over the whole chip is >=20%.

[answer] M6_7f_density {
@ M6 density over the whole chip is >=20%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M6i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X =DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.2 PRINT density_report_M6_7f.log RDB density_report_M6_7f.db
X NOT MARKS
}

[question] M6 minimum density(%) in 125um*125um window with step size 62.5um is 10%.

[answer] M6_7_density {
@ M6 minimum density(%) in 125um*125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M6i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M6_7.log RDB density_report_M6_7.db
X NOT MARKS
}

[question] M6 density over the whole chip is >=20%.

[answer] M6_7f_density {
@ M6 density over the whole chip is >=20%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M6i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X =DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.2 PRINT density_report_M6_7f.log RDB density_report_M6_7f.db
X NOT MARKS
}

[question] M6 maximum density(%) in 125um*125um window with step size 62.5um is 85%.

[answer] M6_7a_density {
@ M6 maximum density(%) in 125um*125um window with step size 62.5um is 85%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M6i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.85 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M6_7a.log RDB density_report_M6_7a.db
X NOT MARKS
}

[question] M6 maximum density difference(%) between any two 200um adjacent window (stepped without overlapping) is 50%.

[answer] M6_7b_density {
@ M6 maximum density difference(%) between any two 200um adjacent window (stepped without overlapping) is 50%
X = DENSITY (M6i OR M6DUM) >= 0 WINDOW 200 GRADIENT > 0.5 ABSOLUTE BACKUP PRINT density_report_M6_7b.log RDB density_report_M6_7b.db
X NOT MARKS
}

[question] M6 maximum density(%) with 840um*840um window is 70%.

[answer] M6_7c_density {
@ M6 maximum density(%) with 840um*840um window is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M6i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 840 BACKUP PRINT density_report_M6_7c.log RDB density_report_M6_7c.db
X NOT MARKS
}

[question] [(M6 with width > 2.8um) over M5] maximum density(%) with 200um*200um step size 100um is 70%.

[answer] M6_7d_R_density_ON {
@ [(M6 with width > 2.8um) over M5] maximum density(%) with 200um*200um step size 100um is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = (((M6i WITH WIDTH > 2.800) OR (M6DUM WITH WIDTH > 2.800)) AND (M5i OR M5DUM)) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 200 STEP 100 BACKUP PRINT density_report_M6_7d.log RDB density_report_M6_7d.db
X NOT MARKS
}

[question] [(M5 with width > 2.8um) over M6] maximum density(%) with 200um*200um step size 100um is 70%.

[answer] M6_7e_R_density_ON {
@ [(M5 with width > 2.8um) over M6] maximum density(%) with 200um*200um step size 100um is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = ((M6i OR M6DUM) AND ((M5i WITH WIDTH > 2.80) OR (M5DUM WITH WIDTH > 2.80))) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 200 STEP 100 BACKUP PRINT density_report_M6_7e.log RDB density_report_M6_7e.db
X NOT MARKS
}


[question] (M6 at 45 degrees) minimum width (run length > 0um) is 0.17.

[answer] M6_8 {
@ (M6 at 45 degrees) minimum width (run length>0um) is 0.17
M645 = ANGLE M6_all == 45
INT M645 < 0.17 OPPOSITE REGION
}

[question] (M6 at 45 degrees) minimum space to parallel M6 (run length > 0um) is 0.17.

[answer] M6_9 {
@ (M6 at 45 degrees) minimum space to parallel M6 (run length>0um) is 0.17
M645 = ANGLE M6_all == 45
EXT M645 < 0.17 OPPOSITE REGION
}

[question] Minimum space between an M6 line end to an M6 (the parallel run length > 0um) is 0.07. Excluding checking SRAM area.

[answer] M6.10a {
@ Minimum space between an M6 line end to an M6 (the parallel run length > 0um) is 0.07. Excluding checking SRAM area
X =EXT M6END M6 <0.07 OPPOSITE REGION
X OUTSIDE INST
}

[question] Minimum space between an M6 line end (with Vn) to an M6 (the parallel run length > 0um) is 0.07. The M6 line end extends Q from Vn, 0.03 <= Q < 0.05um. Excluding checking SRAM area.

[answer] M6.10b{
@ Minimum space between an M6 line end (with Vn) to an M6 (the parallel run length > 0um) is 0.07. The M6 line end extends Q from Vn, 0.03 <= Q < 0.05um. Excluding checking SRAM area
X1 = EXT M6END M6 < 0.07 OPPOSITE REGION
X2 = M6END COIN EDGE X1
X3 = ENC V6 X2 < 0.05 OPPOSITE REGION
X4 = ENC V6 X2 < 0.03 OPPOSITE REGION
X5 = V6 INTERACT X3
X6 = V6 INTERACT X4
X7 = X5 NOT X6
X =X1 TOUCH (X3 INTERACT X7)
X OUT INST
}

[question] Minimum space between an M6 line end (with Vn) to an M6 (the parallel run length > 0um) is 0.1. The M6 line end extends Q from Vn, 0 <= Q < 0.03um.

[answer] M6.10c{
@ Minimum space between an M6 line end (with Vn) to an M6 (the parallel run length > 0um) is 0.1. The M6 line end extends Q from Vn, 0 <= Q < 0.03um
X1 = EXT M6END M6 < 0.1 OPPOSITE REGION
X2 = M6END COIN EDGE X1
X3 = ENC V6 X2 < 0.03 ABUT<90 OPPOSITE REGION
X4 = V6 INTERACT X3
X1 TOUCH (X3 INTERACT X4)
}

[question] Space between Vn-1 (Vn-1 is enclosed by Mn[A]) to the neighboring metal line Mn[B], when the layout structures meet the following conditions:
1.Mn[A] line end definition: line width W < 0.1um.
2.Vn-1 enclosed by Mn[A] line end: E < 0.05um
3.The parallel run length of Mn[A] and Mn[B]: E1 >= -0.03um
4.Space between Mn[A] to the neighboring parallel metal line: Ds < 0.08um;
5.Any one edge distance from the corner of the two edges of Mn[A]: K1 < 0.095um
At least one Vn-1 in the Mn[A] and Mn-1 intersection meet this rule is ok.
This rule is not applicable for SRAM region. 0.12.
[answer] M6_11 {
@ Space between Vn-1 (Vn-1 is enclosed by Mn[A]) to the neighboring metal line Mn[B], when the layout structures meet the following conditions:
@ 1. Mn[A] line end definition: line width W <0.1um.
@ 2. Vn-1 enclosed by Mn[A] line end: E < 0.05um
@ 3. The parallel run length of Mn[A] and Mn[B]:E1 >=-0.03um
@ 4. Space between Mn[A] to the neighboring parallel metal line: Ds<0.08um;
@ 5. Any one edge distance from the corner of the two edges of Mn[A]: K1 <0.095um
@ At least one Vn-1 in the Mn[A] and Mn-1 intersection meet this rule is ok.
@ This rule is not applicable for SRAM region DRC check. 0.12
LINE_END = CONVEX EDGE M6 ANGLE1 ==90 LENGTH1 >=0.08 ANGLE2 ==90 LENGTH2 >=0.08 WITH LENGTH <0.1
X1 =ENC V5 LINE_END<0.05 ABUT<90 REGION OPPOSITE
X2 = V5 INTERACT X1
X3 = X2 INSIDE (M5 AND M6)
X8 =X3 TOUCH EDGE X1
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.095
LINE_SIDE = (M6 COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_SIDE1 = ENC X3 LINE_SIDE<0.03 REGION ABUT<90 OPPOSITE
V5_EDGE =(LINE_SIDE1 OR X3) TOUCH EDGE X8
LINE_END_EXP = EXPAND EDGE V5_EDGE INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001
LINE_END_1 = LINE_END_EXP TOUCH EDGE V5_EDGE
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] M6 < 0.12 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] M6< 0.08 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
V42 =X3 WITH EDGE (X8 TOUCH EDGE LINE_END_E1)
X5 = V5 INTERACT V42
X6 = V5 NOT X5
X7 = ((M5 AND M6) ENCLOSE X5) ENCLOSE X6
M2_CORNER1 = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
(M2_CORNER1 NOT INTERACT X7) OUTSIDE INST
}

[question] Minimum Mn to Mn space S at Mn line-end 0.1. Width W < 0.1um. The minimum space can be line end head to other Mn or line end side to other M1. Rule check: S >= (Dh or Ds). E1 = 0.03, K1 = 0.095, Dh = Ds = 0.1 in the illustration. Outside of SRAM (INST) area. Waive extrusion F < 0.07. Waive the violation for MOM (within MOMDMY).

[answer] M6_12_R_OFF {
@ Minimum Mn to Mn space S at Mn line-end 0.1. Width W < 0.1um . The minimum space can be line end head to other Mn or line end side to other M1. Rule check:
@ S >= (Dh or Ds ). E1 =0.03, K1=0.095 , Dh=Ds=0.1 in the illustration.
@ Outside of SRAM(INST) area.
@ Waive extrusion F < 0.07.
@ Waive the violation for MOM (within MOMDMY).
LINE_END = CONVEX EDGE M6_all ANGLE1 ==90 LENGTH1 >=0.07 ANGLE2 ==90 LENGTH2 >=0.07 WITH LENGTH < 0.1
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.064
LINE_SIDE = (M6_all COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_END_EXP = EXPAND EDGE LINE_END INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001 EXTEND BY 0.031
LINE_END_1 = LINE_END_EXP TOUCH EDGE LINE_END
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] M6_all < 0.1 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] M6_all < 0.1 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
M6_CORNER = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
MOM =((M5 OR M6) OR M7) INTERACT ( MnPIN INTERACT (SIZE MOMDMY BY 0.114))
((LINE_END_SHAPE INTERACT M6_CORNER) OUTSIDE INST) NOT (MOM OR MOMDMY)
}

[question] It is not allowed to have local density > 85% of all 3 consecutive metal (1xMn, 1xMn+1 and 1xMn+2) over any window size 62.5*62.5um (stepping size 31.25um). The metal layers include M1/1xMn and dummy metals. DRC doesn't check: DUMBM, MARKS and (TM2 and PA) region.

[answer] M6_13_M4M5M6_density_R_OFF {
@ It is not allowed to havel local density > 85% of all 3 consecutive metal (1xMn, 1xMn+1 and 1xMn+2) over any window size 62.5*62.5um (stepping size 31.25um).
@ The metal layers include M1/1xMn and dummy metals.
@ DRC doesn't check: DUMBM, MARKS and (TM2 and PA) region
DENSITY_MARK = BORDER NOT (OR DUMBM MARKS (TM2i AND PA))
M4_TAR = M4i_all NOT (OR DUMBM MARKS (TM2i AND PA))
M5_TAR = M5i_all NOT (OR DUMBM MARKS (TM2i AND PA))
M6_TAR = M6i_all NOT (OR DUMBM MARKS (TM2i AND PA))
CHECK_REGION = COPY DENSITY_MARK
DENSITY M4_TAR M5_TAR M6_TAR CHECK_REGION > 0 WINDOW 62.5 STEP 31.25 BACKUP PRINT density_report_M4_13_M4M5M6.log RDB density_report_M4_13_M4M5M6.rdb [((AREA(M4_TAR)/AREA(CHECK_REGION) -0.85))&&((AREA(M5_TAR)/AREA(CHECK_REGION) -0.85))&&(~~(AREA(M6_TAR)/AREA(CHECK_REGION) -0.85))]
}

[question] M6 density (including dummy) is >= 1%. Density check window size: 80um*80um, step size 40um.DRC only check the region with width of (checking window NOT above excluding region) >= 40um.

[answer] M6_14_density {
@ M6 density (including dummy) is >= 1%.Density check window size: 80um*80um, step size 40um.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 40um.
DENSITY_MARK = WITH WIDTH (BORDER NOT MARKS) >= 40
CHECK_LAYER = M6i_all AND DENSITY_MARK
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.01 WINDOW 80 STEP 40 BACKUP PRINT density_report_M6_14.log RDB density_report_M6_14.db
(X NOT MARKS) WITH WIDTH >= 40
}

[question] Maximum M6 area of merged low-density windows must follow item (1) and (2). The definition of low-density window: window size 10um*10um, step size: 5um, density < 1%. (1) Maximum area of merged low-density window <= 6500um2, except merged low-density windows width <= 30um. (2) Maximum area of merged low-density window <= 18500um2. DRC only checks the region with width of (checking window NOT above excluding region) >= 5um.

[answer] M6_15 {
@ Maximum M6 area of merged low density windows must follow item (1) and (2).
@ The definition of low density window: window size 10um*10um, step size: 5um, density <1%
@ (1) Maximum area of merged low density window <= 6500um2, except merged low density windows width <= 30um.
@ (2) Maximum area of merged low density window <= 18500um2.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 5um
X = DENSITY M6i_all < 0.01 WINDOW 10 STEP 5 BACKUP PRINT density_report_M6_15.log RDB density_report_M6_15.rdb
Y = X NOT MARKS
(AREA Y > 6500) WITH WIDTH > 30
(AREA Y > 16000) WITH WIDTH >= 5
}

[question] It is not allowed to have local density < 5% of all 3 consecutive metal (Mn, Mn+1, and Mn+2) over any window 30*30um (stepping 15um). The metal layers include M1/1xMn and dummy metals. DRC only checks the region with width of (checking window NOT above excluding region) >= 15um.

[answer] M6_16_M4M5M6_density {
@ It is not allowed to havel local density < 5% of all 3 consecutive metal (Mn, Mn+1 and Mn+2) over any window 30*30um (stepping 15um).
@ The metal layers include M1/1xMn and dummy metals.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 15um
DENSITY_MARK = WITH WIDTH (BORDER NOT MARKS) >= 15
M4_TAR = M4i_all AND DENSITY_MARK
M5_TAR = M5i_all AND DENSITY_MARK
M6_TAR = M6i_all AND DENSITY_MARK
CHECK_REGION = COPY DENSITY_MARK
DENSITY M4_TAR M5_TAR M6_TAR CHECK_REGION > 0 WINDOW 30 STEP 15 BACKUP PRINT density_report_M4_16_M4M5M6.log RDB density_report_M4_16_M4M5M6.rdb [((0.05 -AREA(M4_TAR)/AREA(CHECK_REGION) ))&&((0.05 -AREA(M5_TAR)/AREA(CHECK_REGION) ))&&(~~(0.05 -AREA(M6_TAR)/AREA(CHECK_REGION) ))]
}



[question] M7 minimum width is 0.07.

[answer] M7_1 {
@ M7 minimum width is 0.07
INT M7_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] M7 minimum width is 0.08um.

[answer] M7_1_R_OFF {
@ M7 minimum width is 0.08um.
INT M7 < 0.08 ABUT<90 SINGULAR REGION
}

[question] M7 maximum width is 4.5. When M7 used for TM-1, DRC waives the (M7 AND DUPMK1) region.

[answer] M7_2 {
@ M7 maximum width is 4.5.
(M7_all WITH WIDTH > 4.50) NOT (M7_all AND DUPMK1)
}

[question] M7 maximum width is 4.5.

[answer] M7_2 {
@ M7 maximum width is 4.5
M7_all WITH WIDTH > 4.50
}

[question] M7 minimum space is 0.07.

[answer] M7_3 {
@ M7 minimum space is 0.07
EXT M7_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] M7 minimum space is 0.08um.

[answer] M7_3_R_OFF {
@ M7 minimum space is 0.08um.
EXT M7 < 0.08 ABUT<90 SINGULAR REGION
}

[question] M7 minimum area is 0.0196.

[answer] M7_4 {
@ M7 minimum area is 0.0196
AREA M7_all < 0.0196
}

[question] Area when all of the M7 edge length < 0.17 m is >= 0.06um2. This rule is not applicable for SRAM region.

[answer] M7_4a {
@ Area when all of the M7 edge length < 0.17 m is >= 0.06um2.
@ This rule is not applicable for SRAM region.
M7_ignore = M7_all WITH EDGE (LENGTH M7_all >= 0.17)
(AREA (M7_all NOT M7_ignore) < 0.06) NOT INST
}

[question] M7 minimum enclosed area is 0.2.

[answer] M7_5 {
@ M7 minimum enclosed area is 0.2
AREA ((HOLES M7_all INNER) NOT M7_all) < 0.2
}

[question] Minimum space between two run length > 0.3 parallel metal lines with both metal line width is > 0.22 is 0.10.

[answer] M7_6 {
@ Minimum space between two run length > 0.3 parallel metal lines
@ with both metal line width is > 0.22 is 0.10
CMACRO Mn_6 M7i_all 0.3 0.22 0.1
}

[question] Minimum space between two length > 0.3 parallel metal lines with both metal line width is > 0.22 is 0.12um.

[answer] M7_6_R_OFF {
@ Minimum space between two length > 0.3 parallel metal lines
@ with both metal line width is > 0.22 is 0.12um.
CMACRO Mn_6a M7i 0.3 0.22 0.12
}


[question] Minimum space between two length > 0.6 parallel metal lines with one or both metal line width is > 0.7 is 0.12.

[answer] M7_6a {
@ Minimum space between two length > 0.6 parallel metal lines
@ with one or both metal line width is > 0.7 is 0.12
CMACRO Mn_6a M7i_all 0.6 0.7 0.12
}

[question] Minimum space between two length > 0.6 parallel metal lines with one metal line width is > 0.22 and other metal line width is >0.7um is 0.14.

[answer] M7_6b {
@ Minimum space between two length > 0.6 parallel metal lines with one metal
@ line width is > 0.22 and other metal line width is >0.7um is 0.14
CMACRO Mn_6b M7i_all 0.6 0.22 0.7 0.14
}

[question] Minimum space between two length > 1.5 parallel metal lines with one or both metal line width is > 1.5 is 0.30.

[answer] M7_6c {
@ Minimum space between two length > 1.5 parallel metal lines
@ with one or both metal line width is > 1.5 is 0.30
CMACRO Mn_6c M7i_all 1.5 1.5 0.3
}

[question] M7 minimum density(%) in 125um*125um window with step size 62.5um is 10%.

[answer] M7_7_density {
@ M7 minimum density(%) in 125um*125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M7i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M7_7.log RDB density_report_M7_7.db
X NOT MARKS
}

[question] M7 density over the whole chip is >=20%.

[answer] M7_7f_density {
@ M7 density over the whole chip is >=20%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M7i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X =DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.2 PRINT density_report_M7_7f.log RDB density_report_M7_7f.db
X NOT MARKS
}


[question] M7 maximum density(%) in 125um*125um window with step size 62.5um is 85%.

[answer] M7_7a_density {
@ M7 maximum density(%) in 125um*125um window with step size 62.5um is 85%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M7i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.85 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M7_7a.log RDB density_report_M7_7a.db
X NOT MARKS
}

[question] M7 maximum density difference(%) between any two 200um adjacent windows (stepped without overlapping) is 50%.

[answer] M7_7b_density {
@ M7 maximum density difference(%) between any two 200um adjacent window (stepped without overlapping) is 50%
X = DENSITY (M7i OR M7DUM) >= 0 WINDOW 200 GRADIENT > 0.5 ABSOLUTE BACKUP PRINT density_report_M7_7b.log RDB density_report_M7_7b.db
X NOT MARKS
}

[question] M7 maximum density(%) in 840um*840um window is 70%.

[answer] M7_7c_density {
@ M7 maximum density(%) in 840um*840um window is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M7i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 840 BACKUP PRINT density_report_M7_7c.log RDB density_report_M7_7c.db
X NOT MARKS
}

[question] [(M7 with width > 2.8um) over M6] maximum density(%) with 200um*200um step size 100um is 70%.

[answer] M7_7d_R_density_ON {
@ [(M7 with width > 2.8um) over M6] maximum density(%) with 200um*200um step size 100um is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = (((M7i WITH WIDTH > 2.800) OR (M7DUM WITH WIDTH > 2.800)) AND (M6i OR M6DUM)) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 200 STEP 100 BACKUP PRINT density_report_M7_7d.log RDB density_report_M7_7d.db
X NOT MARKS
}

[question] [(M6 with width > 2.8um) over M7] maximum density(%) with 200um*200um step size 100um is 70%.

[answer] M7_7e_R_density_ON {
@ [(M6 with width > 2.8um) over M7] maximum density(%) with 200um*200um step size 100um is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = ((M7i OR M7DUM) AND ((M6i WITH WIDTH > 2.80) OR (M6DUM WITH WIDTH > 2.80))) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 200 STEP 100 BACKUP PRINT density_report_M7_7e.log RDB density_report_M7_7e.db
X NOT MARKS
}

[question] (M7 at 45 degrees) minimum width (run length > 0um) is 0.17.

[answer] M7_8 {
@ (M7 at 45 degrees) minimum width (run length>0um) is 0.17
M745 = ANGLE M7_all == 45
INT M745 < 0.17 OPPOSITE REGION
}

[question] (M7 at 45 degrees) minimum space to parallel M7 (run length > 0um) is 0.17.

[answer] M7_9 {
@ (M7 at 45 degrees) minimum space to parallel M7 (run length>0um) is 0.17
M745 = ANGLE M7_all == 45
EXT M745 < 0.17 OPPOSITE REGION
}

[question] Minimum space between an Mn line end to an Mn (the parallel run length >0um) is 0.07. Excluding checking SRAM area.

[answer] M7.10a {
@Minimum space between an Mn line end to an Mn (the parallel run length >0um) is 0.07. Excluding checking SRAM area
X= EXT M7END M7 <0.07 OPPOSITE REGION
X OUT INST
}

[question] Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um) is 0.07. The Mn line end extends Q from Vn, 0.03 <= Q <0.05um. Excluding checking SRAM area.

[answer] M7.10b{
@ Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um) is 0.07. The Mn line end extend Q from Vn, 0.03 <= Q <0.05um. Excluding checking SRAM area
X1 = EXT M7END M7 <0.07 OPPOSITE REGION
X2 = M7END COIN EDGE X1
X3 = ENC V7 X2 <0.05 OPPOSITE REGION
X4 = ENC V7 X2 <0.03 OPPOSITE REGION
X5 = V7 INTERACT X3
X6 = V7 INTERACT X4
X7 = X5 NOT X6
X =X1 TOUCH (X3 INTERACT X7)
X OUTSIDE INST
}

[question] Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um) is 0.1. The Mn line end extends Q from Vn, 0 <= Q <0.03um.

[answer] M7.10c{
@ Minimum space between an Mn line end (with Vn) to an Mn (the parallel run length >0um ) is 0.1. The Mn line end extend Q from Vn, 0 <= Q <0.03um
X1 = EXT M7END M7 <0.1 OPPOSITE REGION
X2 = M7END COIN EDGE X1
X3 = ENC V7 X2 <0.03 ABUT<90 OPPOSITE REGION
X4 = V7 INTERACT X3
X1 TOUCH (X3 INTERACT X4)
}

[question] Space between Vn-1 (Vn-1 is enclosed by Mn[A]) to the neighboring metal line Mn[B], when the layout structures meet the following conditions:

1.Mn[A] line end definition: line width W <0.1um.
2.Vn-1 enclosure by Mn[A] line end: E < 0.05um
3.The parallel run length of Mn[A] and Mn[B]: E1 >=-0.03um
4.Space between Mn[A] to the neighboring parallel metal line: Ds<0.08um;
5.Any one edge distance from the corner of the two edges of Mn[A]: K1 <0.095um
At least one Vn-1 in the Mn[A] and Mn-1 intersection meet this rule is ok. This rule is not applicable for SRAM region DRC check. 0.12
[answer] M7_11 {
@ Space between Vn-1 (Vn-1 is enclosed by Mn[A]) to neighbouring metal line Mn[B], when the layout structures meet the following conditions:
@ 1. Mn[A] line end definition: line width W <0.1um.
@ 2. Vn-1 enclosure by Mn[A] line end: E < 0.05um
@ 3. The parallel run length of Mn[A] and Mn[B]:E1 >=-0.03um
@ 4. Space between Mn[A] to the neighbouring parallel metal line: Ds<0.08um;
@ 5. Any one edge distance from the corner of the two edges of Mn[A]: K1 <0.095um
@ At least one Vn-1 in the Mn[A] and Mn-1 intersection meet this rule is ok.
@ This rule is not applicable for SRAM region DRC check. 0.12
LINE_END = CONVEX EDGE M7 ANGLE1 ==90 LENGTH1 >=0.08 ANGLE2 ==90 LENGTH2 >=0.08 WITH LENGTH <0.1
X1 =ENC V6 LINE_END<0.05 ABUT<90 REGION OPPOSITE
X2 = V6 INTERACT X1
X3 = X2 INSIDE (M7 AND M6)
X8 =X3 TOUCH EDGE X1
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.095
LINE_SIDE = (M7 COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_SIDE1 = ENC X3 LINE_SIDE<0.03 REGION ABUT<90 OPPOSITE
V6_EDGE =(LINE_SIDE1 OR X3) TOUCH EDGE X8
LINE_END_EXP = EXPAND EDGE V6_EDGE INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001
LINE_END_1 = LINE_END_EXP TOUCH EDGE V6_EDGE
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] M7 < 0.12 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] M7< 0.08 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
V42 =X3 WITH EDGE (X8 TOUCH EDGE LINE_END_E1)
X5 = V6 INTERACT V42
X6 = V6 NOT X5
X7 = ((M7 AND M6) ENCLOSE X5) ENCLOSE X6
M2_CORNER1 = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
(M2_CORNER1 NOT INTERACT X7) OUTSIDE INST
}


[question] Minimum Mn to Mn space S at Mn line-end 0.1. Width W < 0.1um. The minimum space can be line end head to other Mn or line end side to other M1. Rule check: S >= (Dh or Ds ). E1 = 0.03, K1 = 0.095, Dh = Ds = 0.1 in the illustration. Outside of SRAM(INST) area. Waive extrusion F < 0.07. Waive the violation for MOM (within MOMDMY).

[answer] M7_12_R_OFF {
@ Minimum Mn to Mn space S at Mn line-end 0.1. Width W < 0.1um . The minimum space can be line end head to other Mn or line end side to other M1. Rule check:
@ S >= (Dh or Ds ). E1 =0.03, K1=0.095 , Dh=Ds=0.1 in the illustration.
@ Outside of SRAM(INST) area.
@ Waive extrusion F < 0.07.
@ Waive the violation for MOM (within MOMDMY).
LINE_END = CONVEX EDGE M7_all ANGLE1 ==90 LENGTH1 >=0.07 ANGLE2 ==90 LENGTH2 >=0.07 WITH LENGTH < 0.1
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.064
LINE_SIDE = (M7_all COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_END_EXP = EXPAND EDGE LINE_END INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001 EXTEND BY 0.031
LINE_END_1 = LINE_END_EXP TOUCH EDGE LINE_END
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] M7_all < 0.1 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] M7_all < 0.1 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
M7_CORNER = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
MOM =((M6 OR M7) OR M8) INTERACT ( MnPIN INTERACT (SIZE MOMDMY BY 0.114))
((LINE_END_SHAPE INTERACT M7_CORNER) OUTSIDE INST) NOT (MOM OR MOMDMY)
}

[question] It is not allowed to have local density > 85% of all 3 consecutive metal (1xMn, 1xMn+1, and 1xMn+2) over any window size 62.5*62.5um (stepping size 31.25um). The metal layers include M1/1xMn and dummy metals. DRC doesn't check: DUMBM, MARKS, and (TM2 and PA) region.

[answer] M7_13_M5M6M7_density_R_OFF {
@ It is not allowed to have local density > 85% of all 3 consecutive metal (1xMn, 1xMn+1, and 1xMn+2) over any window size 62.5*62.5um (stepping size 31.25um).
@ The metal layers include M1/1xMn and dummy metals.
@ DRC doesn't check: DUMBM, MARKS and (TM2 and PA) region
DENSITY_MARK = BORDER NOT (OR DUMBM MARKS (TM2i AND PA))
M5_TAR = M5i_all NOT (OR DUMBM MARKS (TM2i AND PA))
M6_TAR = M6i_all NOT (OR DUMBM MARKS (TM2i AND PA))
M7_TAR = M7i_all NOT (OR DUMBM MARKS (TM2i AND PA))
CHECK_REGION = COPY DENSITY_MARK
DENSITY M5_TAR M6_TAR M7_TAR CHECK_REGION > 0 WINDOW 62.5 STEP 31.25 BACKUP PRINT density_report_M5_13_M5M6M7.log RDB density_report_M5_13_M5M6M7.rdb [((AREA(M5_TAR)/AREA(CHECK_REGION) -0.85))&&((AREA(M6_TAR)/AREA(CHECK_REGION) -0.85))&&(~~(AREA(M7_TAR)/AREA(CHECK_REGION) -0.85))]
}

[question] M7 density (including dummy) is >= 1%. Density check window size: 80um*80um, step size 40um. DRC only checks the region with a width of (checking window NOT above excluding region) >= 40um.

[answer] M7_14_density {
@ M7 density (including dummy) is >= 1%.Density check window size: 80um*80um, step size 40um.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 40um.
DENSITY_MARK = WITH WIDTH (BORDER NOT MARKS) >= 40
CHECK_LAYER = M7i_all AND DENSITY_MARK
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.01 WINDOW 80 STEP 40 BACKUP PRINT density_report_M7_14.log RDB density_report_M7_14.db
(X NOT MARKS) WITH WIDTH >= 40
}

[question] Maximum M7 area of merged low-density windows must follow item (1) and (2). The definition of low-density window: window size 10um*10um, step size: 5um, density < 1%. (1) Maximum area of merged low-density window <= 6500um2, except merged low-density windows width <= 30um. (2) Maximum area of merged low-density window <= 18500um2. DRC only checks the region with a width of (checking window NOT above excluding region) >= 5um.

[answer] M7_15 {
@ Maximum M7 area of merged low density windows must follow item (1) and (2).
@ The definition of low density window: window size 10um*10um, step size: 5um, density <1%
@ (1) Maximum area of merged low density window <= 6500um2, except merged low density windows width <= 30um.
@ (2) Maximum area of merged low density window <= 18500um2.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 5um
X = DENSITY M7i_all < 0.01 WINDOW 10 STEP 5 BACKUP PRINT density_report_M7_15.log RDB density_report_M7_15.rdb
Y = X NOT MARKS
(AREA Y > 6500) WITH WIDTH > 30
(AREA Y > 16000) WITH WIDTH >= 5
}

[question] It is not allowed to have a local density < 5% of all 3 consecutive metal (Mn, Mn+1, and Mn+2) over any window 30*30um (stepping 15um). The metal layers include M1/1xMn and dummy metals. DRC only checks the region with a width of (checking window NOT above excluding region) >= 15um.

[answer] M7_16_M5M6M7_density {
@ It is not allowed to have local density < 5% of all 3 consecutive metal (Mn, Mn+1, and Mn+2) over any window 30*30um (stepping 15um).
@ The metal layers include M1/1xMn and dummy metals.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 15um
DENSITY_MARK = WITH WIDTH (BORDER NOT MARKS) >= 15
M5_TAR = M5i_all AND DENSITY_MARK
M6_TAR = M6i_all AND DENSITY_MARK
M7_TAR = M7i_all AND DENSITY_MARK
CHECK_REGION = COPY DENSITY_MARK
DENSITY M5_TAR M6_TAR M7_TAR CHECK_REGION > 0 WINDOW 30 STEP 15 BACKUP PRINT density_report_M5_16_M5M6M7.log RDB density_report_M5_16_M5M6M7.rdb [((0.05 -AREA(M5_TAR)/AREA(CHECK_REGION) ))&&((0.05 -AREA(M6_TAR)/AREA(CHECK_REGION) ))&&(~~(0.05 -AREA(M7_TAR)/AREA(CHECK_REGION) ))]
}


[question] M8 minimum width is 0.07

[answer] M8_1 {
@ M8 minimum width is 0.07
INT M8_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] M8 minimum width is 0.08um.
[answer] M8_1_R_OFF {
@ M8 minimum width is 0.08um.
INT M8 < 0.08 ABUT<90 SINGULAR REGION
}

[question] M8 maximum width is 4.5.When M8 used for TM-1,DRC waive the (M8 AND DUPMK1) region.

[answer] M8_2 {
@ M8 maximum width is 4.5.
@ When M8 used for TM-1,DRC waive the (M8 AND DUPMK1) region.
(M8_all WITH WIDTH > 4.50) NOT (M8_all AND DUPMK1)
}

[question] M8 maximum width is 4.5

[answer] M8_2 {
@ M8 maximum width is 4.5
M8_all WITH WIDTH > 4.50
}

[question] M8 minimum space is 0.07
[answer] M8_3 {
@ M8 minimum space is 0.07
EXT M8_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] M8 minimum space is 0.08um.
[answer] M8_3_R_OFF {
@ M8 minimum space is 0.08um.
EXT M8 < 0.08 ABUT<90 SINGULAR REGION
}

[question] M8 minimum area is 0.0196

[answer] M8_4 {
@ M8 minimum area is 0.0196
AREA M8_all < 0.0196
}

[question] Area when all of the M8 edge length < 0.17 m is >= 0.06um2. This rule is not applicable for SRAM region.

[answer] M8_4a {
@ Area when all of the M8 edge length < 0.17 m is >= 0.06um2.
@ This rule is not applicable for SRAM region.
M8_ignore = M8_all WITH EDGE (LENGTH M8_all >= 0.17)
(AREA (M8_all NOT M8_ignore) < 0.06) NOT INST
}

[question] M8 minimum enclosed area is 0.2

[answer] M8_5 {
@ M8 minimum enclosed area is 0.2
AREA ((HOLES M8_all INNER) NOT M8_all) < 0.2
}

[question] Minimum space between two run length > 0.3 parallel metal lines with both metal line width is > 0.22 is 0.10

[answer] M8_6 {
@ Minimum space between two run length > 0.3 parallel metal lines
@ with both metal line width is > 0.22 is 0.10
CMACRO Mn_6 M8i_all 0.3 0.22 0.1
}

[question] Minimum space between two length > 0.6 parallel metal lines with one or both metal line width is > 0.7 is 0.12

[answer] M8_6a {
@ Minimum space between two length > 0.6 parallel metal lines
@ with one or both metal line width is > 0.7 is 0.12
CMACRO Mn_6a M8i_all 0.6 0.7 0.12
}

[question] Minimum space between two length > 0.6 parallel metal lines with one metal line width is > 0.22 and other metal line width is >0.7um is 0.14

[answer] M8_6b {
@ Minimum space between two length > 0.6 parallel metal lines with one metal
@ line width is > 0.22 and other metal line width is >0.7um is 0.14
CMACRO Mn_6b M8i_all 0.6 0.22 0.7 0.14
}

[question] Minimum space between two length > 1.5 parallel metal lines with one or both metal line width is > 1.5 is 0.30

[answer] M8_6c {
@ Minimum space between two length > 1.5 parallel metal lines
@ with one or both metal line width is > 1.5 is 0.30
CMACRO Mn_6c M8i_all 1.5 1.5 0.3
}

[question] M8 minimum density(%) in 125um*125um window with step size 62.5um is 10%

[answer] M8_7_density {
@ M8 minimum density(%) in 125um*125um window with step size 62.5um is 10%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M8i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.10 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M8_7.log RDB density_report_M8_7.db
X NOT MARKS
}

[question] M8 density over the whole chip is >=20%

[answer] M8_7f_density {
@ M8 density over the whole chip is >=20%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M8i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X =DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.2 PRINT density_report_M8_7f.log RDB density_report_M8_7f.db
X NOT MARKS
}

[question] M8 maximum density(%) in 125um*125um window with step size 62.5um is 85%

[answer] M8_7a_density {
@ M8 maximum density(%) in 125um*125um window with step size 62.5um is 85%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M8i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.85 WINDOW 125 STEP 62.5 BACKUP PRINT density_report_M8_7a.log RDB density_report_M8_7a.db
X NOT MARKS
}

[question] M8 maximum density difference(%) between any two 200um adjacent window (stepped without overlapping) is 50%

[answer] M8_7b_density {
@ M8 maximum density difference(%) between any two 200um adjacent window (stepped without overlapping) is 50%
X = DENSITY (M8i OR M8DUM) >= 0 WINDOW 200 GRADIENT > 0.5 ABSOLUTE BACKUP PRINT density_report_M8_7b.log RDB density_report_M8_7b.db
X NOT MARKS
}

[question] M8 maximum density(%) with 840um*840um window is 70%

[answer] M8_7c_density {
@ M8 maximum density(%) with 840um*840um window is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = M8i_all NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 840 BACKUP PRINT density_report_M8_7c.log RDB density_report_M8_7c.db
X NOT MARKS
}

[question] [(M8 with width > 2.8um) over M7] maximum density(%) with 200um*200um step size 100um is 70%

[answer] M8_7d_R_density_ON {
@ [(M8 with width > 2.8um) over M7] maximum density(%) with 200um*200um step size 100um is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = (((M8i WITH WIDTH > 2.800) OR (M8DUM WITH WIDTH > 2.800)) AND (M7i OR M7DUM)) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 200 STEP 100 BACKUP PRINT density_report_M8_7d.log RDB density_report_M8_7d.db
X NOT MARKS
}

[question] [(M7 with width > 2.8um) over M8] maximum density(%) with 200um*200um step size 100um is 70%

[answer] M8_7e_R_density_ON {
@ [(M7 with width > 2.8um) over M8] maximum density(%) with 200um*200um step size 100um is 70%
DENSITY_MARK = BORDER NOT MARKS
CHECK_LAYER = ((M8i OR M8DUM) AND ((M7i WITH WIDTH > 2.80) OR (M7DUM WITH WIDTH > 2.80))) NOT MARKS
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] > 0.7 WINDOW 200 STEP 100 BACKUP PRINT density_report_M8_7e.log RDB density_report_M8_7e.db
X NOT MARKS
}

[question] (M8 at 45degree ) minimum width (run length>0um) is 0.17

[answer] M8_8 {
@ (M8 at 45degree ) minimum width (run length>0um) is 0.17
M845 = ANGLE M8_all == 45
INT M845 < 0.17 OPPOSITE REGION
}

[question] (M8 at 45degree) minimum space to parallel M8 (run length>0um) is 0.17

[answer] M8_9 {
@ (M8 at 45degree) minimum space to parallel M8 (run length>0um) is 0.17
M845 = ANGLE M8_all == 45
EXT M845 < 0.17 OPPOSITE REGION
}

[question] Minimum space between an Mn line end to an Mn (the parallel run length >0um) is 0.07. Excluding checking SRAM area
[answer] M8.10a {
@Minimum space between an Mn line end to an Mn (the parallel run length >0um) is 0.07.Excluding checking SRAM area
X= EXT M8END M8<0.07 OPPOSITE REGION
X OUT INST
}

[question] Space between Vn-1 (Vn-1 is enclosed by Mn[A]) to neighboring metal line Mn[B], when the layout structures meet the following conditions:
1.Mn[A] line end definition: line width W <0.1um.
2.Vn-1 enclosure by Mn[A] line end: E < 0.05um
3.The parallel run length of Mn[A] and Mn[B]:E1 >=-0.03um
4.Space between Mn[A] to the neighboring parallel metal line: Ds<0.08um;
5.Any one edge distance from the corner of the two edges of Mn[A]: K1 <0.095um
At least one Vn-1 in the Mn[A] and Mn-1 intersection meet this rule is ok.
This rule is not applicable for SRAM region DRC check. 0.12
[answer] M8_11 {
@ Space between Vn-1 (Vn-1 is enclosed by Mn[A]) to neighboring metal line Mn[B], when the layout structures meet the following conditions:
@ 1. Mn[A] line end definition: line width W <0.1um.
@ 2. Vn-1 enclosure by Mn[A] line end: E < 0.05um
@ 3. The parallel run length of Mn[A] and Mn[B]:E1 >=-0.03um
@ 4. Space between Mn[A] to the neighboring parallel metal line: Ds<0.08um;
@ 5. Any one edge distance from the corner of the two edges of Mn[A]: K1 <0.095um
@ At least one Vn-1 in the Mn[A] and Mn-1 intersection meet this rule is ok.
@ This rule is not applicable for SRAM region DRC check. 0.12
LINE_END = CONVEX EDGE M8 ANGLE1 ==90 LENGTH1 >=0.08 ANGLE2 ==90 LENGTH2 >=0.08 WITH LENGTH <0.1
X1 =ENC V7 LINE_END<0.05 ABUT<90 REGION OPPOSITE
X2 = V7 INTERACT X1
X3 = X2 INSIDE (M7 AND M8)
X8 =X3 TOUCH EDGE X1
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.095
LINE_SIDE = (M8 COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_SIDE1 = ENC X3 LINE_SIDE<0.03 REGION ABUT<90 OPPOSITE
V7_EDGE =(LINE_SIDE1 OR X3) TOUCH EDGE X8
LINE_END_EXP = EXPAND EDGE V7_EDGE INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001
LINE_END_1 = LINE_END_EXP TOUCH EDGE V7_EDGE
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] M8 < 0.12 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] M8< 0.08 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
V42 =X3 WITH EDGE (X8 TOUCH EDGE LINE_END_E1)
X5 = V7 INTERACT V42
X6 = V7 NOT X5
X7 = ((M7 AND M8) ENCLOSE X5) ENCLOSE X6
M2_CORNER1 = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
(M2_CORNER1 NOT INTERACT X7) OUTSIDE INST
}


[question] Minimum Mn to Mn space S at Mn line-end 0.1. Width W < 0.1um. The minimum space can be line end head to other Mn or line end side to other M1. Rule check: S >= (Dh or Ds ). E1 =0.03, K1=0.095 , Dh=Ds=0.1 in the illustration. Outside of SRAM(INST) area. Waive extrusion F < 0.07. Waive the violation for MOM (within MOMDMY).

[answer] M8_12_R_OFF {
@ Minimum Mn to Mn space S at Mn line-end 0.1. Width W < 0.1um. The minimum space can be line end head to other Mn or line end side to other M1. Rule check: S >= (Dh or Ds ). E1 =0.03, K1=0.095 , Dh=Ds=0.1 in the illustration. Outside of SRAM(INST) area. Waive extrusion F < 0.07. Waive the violation for MOM (within MOMDMY).
LINE_END = CONVEX EDGE M8_all ANGLE1 ==90 LENGTH1 >=0.07 ANGLE2 ==90 LENGTH2 >=0.07 WITH LENGTH < 0.1
LINE_END_SHAPE = EXPAND EDGE LINE_END INSIDE BY 0.064
LINE_SIDE = (M8_all COIN EDGE LINE_END_SHAPE ) NOT COIN EDGE LINE_END
LINE_END_EXP = EXPAND EDGE LINE_END INSIDE BY 0.001 EXTEND BY 0.031
LINE_SIDE_EXP = EXPAND EDGE LINE_SIDE INSIDE BY 0.001 EXTEND BY 0.031
LINE_END_1 = LINE_END_EXP TOUCH EDGE LINE_END
LINE_SIDE_1 = LINE_SIDE_EXP TOUCH EDGE LINE_SIDE
E1 = EXT [LINE_END_1] M8_all < 0.1 OPPOSITE PERP ALSO OBTUSE ALSO
E2 = EXT [LINE_SIDE_1] M8_all < 0.1 OPPOSITE PERP ALSO OBTUSE ALSO
LINE_END_E1 = LINE_END_1 TOUCH EDGE E1
LINE_SIDE_E2 = LINE_SIDE_1 TOUCH EDGE E2
M8_CORNER = INT LINE_END_E1 LINE_SIDE_E2 <= 0.002 ABUT==90 REGION
MOM =(M7 OR M8) INTERACT ( MnPIN INTERACT (SIZE MOMDMY BY 0.114))
((LINE_END_SHAPE INTERACT M8_CORNER) OUTSIDE INST ) NOT (MOM OR MOMDMY)
}

[question] It is not allowed to have local density > 85% of all 3 consecutive metal (1xMn, 1xMn+1 and 1xMn+2) over any window size 62.5*62.5um (stepping size 31.25um). The metal layers include M1/1xMn and dummy metals. DRC doesn't check: DUMBM, MARKS and (TM2 and PA) region

[answer] M8_13_M6M7M8_density_R_OFF {
@ It is not allowed to havel local density > 85% of all 3 consecutive metal (1xMn, 1xMn+1 and 1xMn+2) over any window size 62.5*62.5um (stepping size 31.25um).
@ The metal layers include M1/1xMn and dummy metals.
@ DRC doesn't check: DUMBM, MARKS and (TM2 and PA) region
DENSITY_MARK = BORDER NOT (OR DUMBM MARKS (TM2i AND PA))
M6_TAR = M6i_all NOT (OR DUMBM MARKS (TM2i AND PA))
M7_TAR = M7i_all NOT (OR DUMBM MARKS (TM2i AND PA))
M8_TAR = M8i_all NOT (OR DUMBM MARKS (TM2i AND PA))
CHECK_REGION = COPY DENSITY_MARK
DENSITY M6_TAR M7_TAR M8_TAR CHECK_REGION > 0 WINDOW 62.5 STEP 31.25 BACKUP PRINT density_report_M6_13_M6M7M8.log RDB density_report_M6_13_M6M7M8.rdb [((AREA(M6_TAR)/AREA(CHECK_REGION) -0.85))&&((AREA(M7_TAR)/AREA(CHECK_REGION) -0.85))&&(~~(AREA(M8_TAR)/AREA(CHECK_REGION) -0.85))]
}

[question] M8 density (including dummy) is >= 1%. Density check window size: 80um*80um, step size 40um.DRC only check the region with width of (checking window NOT above excluding region) >= 40um.

[answer] M8_14_density {
@ M8 density (including dummy) is >= 1%.Density check window size: 80um*80um, step size 40um.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 40um.
DENSITY_MARK = WITH WIDTH (BORDER NOT MARKS) >= 40
CHECK_LAYER = M8i_all AND DENSITY_MARK
CHECK_REGION = COPY DENSITY_MARK
X = DENSITY CHECK_LAYER CHECK_REGION [area(CHECK_LAYER)/area(CHECK_REGION)] < 0.01 WINDOW 80 STEP 40 BACKUP PRINT density_report_M8_14.log RDB density_report_M8_14.db
(X NOT MARKS) WITH WIDTH >= 40
}

[question] Maximum M8 area of merged low density windows must follow item (1) and (2). The definition of low density window: window size 10um*10um, step size: 5um, density <1%. (1) Maximum area of merged low density window <= 6500um2, except merged low density windows width <= 30um. (2) Maximum area of merged low density window <= 18500um2.DRC only check the region with width of (checking window NOT above excluding region) >= 5um

[answer] M8_15 {
@ Maximum M8 area of merged low density windows must follow item (1) and (2).
@ The definition of low density window: window size 10um*10um, step size: 5um, density <1%.
@ (1) Maximum area of merged low density window <= 6500um2, except merged low density windows width <= 30um.
@ (2) Maximum area of merged low density window <= 18500um2.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 5um
X = DENSITY M8i_all < 0.01 WINDOW 10 STEP 5 BACKUP PRINT density_report_M8_15.log RDB density_report_M8_15.rdb
Y = X NOT MARKS
(AREA Y > 6500) WITH WIDTH > 30
(AREA Y > 16000) WITH WIDTH >= 5
}

[question] It is not allowed to have local density < 5% of all 3 consecutive metal (Mn, Mn+1 and Mn+2) over any window 30*30um (stepping 15um). The metal layers include M1/1xMn and dummy metals. DRC only check the region with width of (checking window NOT above excluding region) >= 15um

[answer] M8_16_M6M7M8_density {
@ It is not allowed to havel local density < 5% of all 3 consecutive metal (Mn, Mn+1 and Mn+2) over any window 30*30um (stepping 15um).
@ The metal layers include M1/1xMn and dummy metals.
@ DRC only check the region with width of (checking window NOT above excluding region) >= 15um
DENSITY_MARK = WITH WIDTH (BORDER NOT MARKS) >= 15
M6_TAR = M6i_all AND DENSITY_MARK
M7_TAR = M7i_all AND DENSITY_MARK
M8_TAR = M8i_all AND DENSITY_MARK
CHECK_REGION = COPY DENSITY_MARK
DENSITY M6_TAR M7_TAR M8_TAR CHECK_REGION > 0 WINDOW 30 STEP 15 BACKUP PRINT density_report_M6_16_M6M7M8.log RDB density_report_M6_16_M6M7M8.rdb [((0.05 -AREA(M6_TAR)/AREA(CHECK_REGION) ))&&((0.05 -AREA(M7_TAR)/AREA(CHECK_REGION) ))&&(~~(0.05 -AREA(M8_TAR)/AREA(CHECK_REGION) ))]
}

[question] Fixed V2 size is 0.07

[answer] V2_1 {
@ Fixed V2 size is 0.07
NOT RECTANGLE V2 == 0.07 BY == 0.07
}

[question] Space between two V2 is 0.07

[answer] V2_2 {
@ Space between two V2 is 0.07
EXT V2_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] Space between Vns (with run length>=0um) at least two least two sides is 0.09, when array equal to or greater than 3x3. Two Via areas whose space is within 0.10um are considered to be in the same array. An array does not have both row and column greater than or equal to 3 can apply smaller spacing Vn.2 instead of Vn.3

[answer] V2_3 {
@Space between Vns (with run length>=0um) at least two least two sides is 0.09, when array equal to or greater than 3x3.
@Two Via areas whose space is within 0.10um are considered to be in the same array. An array does
@ not have both row and column greater than or equal to 3 can apply smaller spacing Vn.2 instead of Vn.3
X = EXT (V2 INTERACT V2_array) V2< 0.090 OPPOSITE EXTENDED 0.001 REGION
Y =SIZE V2 BY 0.001
(Y INTERACT V2_array) INTERACT (X NOT Y) >2
}

[question] V2_array not touching MOMDMY maximum width is 0.85

[answer] V2_4 {
@ V2_array not touching MOMDMY maximum width is 0.85
(WITH WIDTH V2_array > 0.85) NOT INTERACT MOMDMY
}

[question] V2 (different net) minimum space for run length > 0um is 0.1 (outside of SRAM)

[answer] V2_5 {
@ V2 (different net) minimum space for run length > 0um is 0.1 (outside of SRAM)
X = EXT V2 < 0.1 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
(EXT V2DUM < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
(EXT V2DUM V2 < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
}

[question] V2 (different net) minimum space for run length > 0um is 0.11um. (outside of SRAM)

[answer] V2_5_R_OFF {
@ V2 (different net) minimum space for run length > 0um is 0.11um. (outside of SRAM)
X = EXT V2 < 0.11 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
}

[question] V2 (different net) minimum space is 0.09

[answer] V2_5a {
@ V2 (different net) minimum space is 0.09
EXT V2 < 0.09 NOT CONNECTED REGION
EXT V2DUM < 0.09 ABUT<90 SINGULAR REGION
EXT V2DUM V2 < 0.09 ABUT<90 SINGULAR REGION
}

[question] Vn minimum space in different net inside of SRAM is 0.09

[answer] V2.5b {
@ Vn minimum space in different net inside of SRAM is 0.09
EXT (V2 NOT OUTSIDE INST) < 0.09 NOT CONNECTED REGION
}

[question] V2 must be within M2. Per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.6a, Vn.6b or Vn.6c. V2.6a, V2 minimum within M2 is 0.015. Vn.6b Mn overlap past Vn for two opposite sides with either side >=0.01um, and < 0.015um 0.02. Vn.6c Mn overlap past Vn for two opposite sides with either side >= 0um, and < 0.01um 0.03

[answer] V2_6abc {
@ V2 must within M2
@ per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.6a, Vn.6b or Vn.6c
@ V2.6a, V2 minimum within M2 is 0.015
@ Vn.6b Mn overlap past Vn for two opposite sides with either side >=0.01um, and < 0.015um 0.02
@ Vn.6c Mn overlap past Vn for two opposite sides with either side >= 0um, and < 0.01um 0.03
V2_all NOT M2_all
M2andM3 = (M2_all AND M3_all) INTERACT (V2_all OUTSIDE INST)
BadV2 = RECTANGLE ENCLOSURE (V2_all OUTSIDE INST) M2_all OUTSIDE ALSO
GOOD 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE
GOOD 0.02 OPPOSITE 0.01 OPPOSITE 0.02 OPPOSITE 0.01 OPPOSITE
GOOD 0.03 0.0 0.03 0.0
BadV2 INTERACT M2andM3
}


[question] Vn minimum within Mn is 0.0

[answer] SRV2_6 {
@ Vn minimum within Mn is 0.0
(V2 NOT OUTSIDE INST) NOT INSIDE M2
}

[question] V2 inside M2 with width > 0.14um, with at least one redundant V2. This rule only applies to that M2/M3 intersection area can enclose a rectangle of 0.07*0.27.

[answer] V2_6d {
@ V2 inside M2 with width > 0.14um, with at least one redundant V2.
@ This rule only applies to that M2/M3 intersection area can enclose a rectangle of 0.07*0.27.
CMACRO V67D V2 M2 M3
}

[question] V2 must be within M3. Per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.7a, Vn.7b or Vn.7c. V2.7a, V2 minimum within M3 is 0.015. V2.7b, M3 minimum overlap past V2 for two opposite sides with either side >=0.01um, and < 0.015m is 0.02. V2.7c, M3 minimum overlap past V2 for two opposite sides with the either side >=0um, and < 0.01m is 0.03

[answer] V2_7abc {
@ V2 must within M3
@ per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.7a, Vn.7b or Vn.7c
@ V2.7a, V2 minimum within M3 is 0.015
@ V2.7b, M3 minimum overlap past V2 for two opposite sides with either side >=0.01um, and < 0.015m is 0.02
@ V2.7c, M3 minimum overlap past V2 for two opposite sides with the either side >=0um, and < 0.01m is 0.03
V2_all NOT M3_all
M2andM3 = (M2_all AND M3_all) INTERACT V2_all
BadV2 = RECTANGLE ENCLOSURE V2_all M3_all OUTSIDE ALSO
GOOD 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE
GOOD 0.02 OPPOSITE 0.01 OPPOSITE 0.02 OPPOSITE 0.01 OPPOSITE
GOOD 0.03 0.0 0.03 0.0
BadV2 INTERACT M2andM3
}

[question] V2 inside M3 with width > 0.14um, with at least one redundant V2. This rule only applies to that M2/M3 intersection area can enclose a rectangle of 0.07*0.27.

[answer] V2_7d {
@ V2 inside M3 with width > 0.14um, with at least one redundant V2.
@ This rule only applies to that M2/M3 intersection area can enclose a rectangle of 0.07*0.27.
CMACRO V67D V2 M3 M2
}

[question] At least two Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.26um

[answer] V2_8 {
@ At least two Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.26um
WM2 = WITH WIDTH M2 > 0.260
WM3 = WITH WIDTH M3 > 0.260
encVia = V2 INTERACT (WM2 OR WM3)
((M2 AND M3) ENCLOSE encVia) ENCLOSE V2 < 2
}

[question] At least three Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.55um

[answer] V2_9 {
@ At least three Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.55um
WM2 = WITH WIDTH M2 > 0.550
WM3 = WITH WIDTH M3 > 0.550
encVia = V2 INTERACT (WM2 OR WM3)
((M2 AND M3) ENCLOSE encVia) ENCLOSE V2 < 3
}

[question] At least four Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.645um

[answer] V2_10 {
@ At least four Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.645um
WM2 = WITH WIDTH M2 > 0.645
WM3 = WITH WIDTH M3 > 0.645
encVia = V2 INTERACT (WM2 OR WM3)
((M2 AND M3) ENCLOSE encVia) ENCLOSE V2 < 4
}

[question] At least two Vns with space <=0.16m when one of Mn or Mn+1 with both length and width >0.24um. Exclude non-square Vn and SRAM area.

[answer] V2_16 {
@At least two Vns with space <=0.16m when one of Mn or Mn+1 with both length and width >0.24um.
@Exclude non-square Vn and SRAM area.
X1a = WITH WIDTH M2 >0.24
X1b = WITH WIDTH M3 >0.24
WIDE = X1a OR X1b
X2 = (M3 AND M2) ENCLOSE V2_square
X3 = V2_square INSIDE X2
X5c = EXT (V2_EMPTY INSIDE WIDE ) V2_EMPTY <=0.16 ABUT<90 REGION CONNECTED // space of via <= 0.16
X6c = X2 ENCLOSE X5c // good intersection with space of Via <= 0.16
X7= ((SIZE X3 BY 0.325) AND X2) ENCLOSE V2 >2
X7c=X2 ENCLOSE X7
X =((X2 NOT X6c) NOT X7c) ENCLOSE ( V2_square INSIDE WIDE ) // Via_16
X OUTSIDE INST
}


[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>0.24um and width W>0.24um, and the distance D<=1.1um away from this wide metal. Exclude non-square Vn.

[answer] V2_17 {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>0.24um and width W>0.24um, and the distance D<=1.1um away from this wide metal.
@ Exclude non-square Vn
WM2_L1 = ( M2 NOT WM2 ) TOUCH WM2
M2_ENCWM = (M2 INTERACT WM2) INTERACT V2_A
WM2_VEDGE = EXT [M2_ENCWM] <1.1 ABUT<90 OPPOSITE NOTCH
WM2_EXT1 = EXT (WM2 COIN EDGE WM2_VEDGE) [V2_A] < 1.1 ABUT>=0 <90 OPPOSITE CONNECTED
WM2_EXT2 = (EXT WM2 V2_A < 1.1 ABUT>=0 <90 OPPOSITE REGION CONNECTED ) INSIDE M2
V2_B = V2_square WITH EDGE WM2_EXT1
X1 =(M2 AND M3) ENCLOSE V2_square >1
X2 = ((M2 AND M3) AND ( WM2_L1 AND WM2_EXP )) NOT X1

Y0=(M2 AND M3) ENCLOSE V2_square ==1
Y1 = SIZE (V2_square INTERACT Y0) BY 1.1 INSIDE OF M2 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM2)

VSING1= ((X2 INTERACT V2_B ==1) INTERACT Y2) OR ((X2 INTERACT WM2_EXT2) INTERACT V2_A)
VSING1 OUTSIDE INST

M3_ENCWM = (M3 INTERACT WM3) INTERACT V2_A2
WM3_VEDGE = EXT [M3_ENCWM] <1.1 ABUT<90 OPPOSITE NOTCH
WM3_EXT1 = EXT (WM3_EMPTY COIN EDGE WM3_VEDGE) [V2_A2_EMPTY] < 1.1 ABUT>=0 <90 OPPOSITE CONNECTED
WM3_EXT2 = (EXT WM3_EMPTY V2_A2_EMPTY < 1.1 ABUT>=0 <90 OPPOSITE REGION CONNECTED ) INSIDE M3
V2_B2 = V2_square WITH EDGE WM3_EXT1
X3 = ((M2 AND M3) AND ( WM3_L1 AND WM3_EXP )) NOT X1
Y3 = SIZE (V2_square INTERACT Y0) BY 1.1 INSIDE OF M3 STEP 0.005
Y4 = Y3 INTERACT (Y3 AND WM3)

VSING2= ((X3 INTERACT V2_B2 ==1) INTERACT Y4) OR ((X3 INTERACT WM3_EXT2) INTERACT V2_A2)
VSING2 OUTSIDE INST
}

[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>1.4um and width W>1.4um, and the distance D<=2.8um away from this wide metal. Exclude non-square Vn.

[answer] V2_17a {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>1.4um and width W>1.4um, and the distance D<=2.8um away from this wide metal.
@ Exclude non-square Vn
WM2_L1_a = ( M2 NOT WM2_a ) TOUCH WM2_a

V2_B = COPY V2_square
X1 =(M2 AND M3) ENCLOSE V2_square >1
X2 = ((M2 AND M3) AND ( WM2_L1_a AND WM2_EXP_a )) NOT X1

Y0=(M2 AND M3) ENCLOSE V2_square ==1
Y1 = SIZE (V2_square INTERACT Y0) BY 2.8 INSIDE OF M2 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM2_a)

VSING1= (X2 INTERACT V2_B ==1) INTERACT Y2
VSING1 OUTSIDE INST

V2_B2 = COPY V2_square
X3 = ((M2 AND M3) AND ( WM3_L1_a AND WM3_EXP_a )) NOT X1
Y3 = SIZE (V2_square INTERACT Y0) BY 2.8 INSIDE OF M3 STEP 0.005
Y4 = Y3 INTERACT (Y3 AND WM3_a)

VSING2= (X3 INTERACT V2_B2 ==1) INTERACT Y4
VSING2 OUTSIDE INST
}

[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>7um and width W>2.1um, and the distance D<=7.1um away from this wide metal. Exclude non-square Vn.

[answer] V2_17b {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>7um and width W>2.1um, and the distance D<=7.1um away from this wide metal.
@ Exclude non-square Vn
WM2_L1_b = ( M2 NOT WM2_b ) TOUCH WM2_b
V2_B = COPY V2_square
X1 =(M2 AND M3) ENCLOSE V2_square >1
X2 = ((M2 AND M3) AND ( WM2_L1_b AND WM2_EXP_b )) NOT X1

Y0=(M2 AND M3) ENCLOSE V2_square ==1
Y1 = SIZE (V2_square INTERACT Y0) BY 7.1 INSIDE OF M2 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM2_b)

VSING1= (X2 INTERACT V2_B ==1) INTERACT Y2
VSING1 OUTSIDE INST

V2_B2 = COPY V2_square
X3 = ((M2 AND M3) AND ( WM3_L1_b AND WM3_EXP_b )) NOT X1
Y3 = SIZE (V2_square INTERACT Y0) BY 7.1 INSIDE OF M3 STEP 0.005
Y4 = Y3 INTERACT (Y3 AND WM3_b)

VSING2= (X3 INTERACT V2_B2 ==1) INTERACT Y4
VSING2 OUTSIDE INST
}

[question] 45-degree rotated V2 is not allowed.

[answer] V2_18 {
@ 45-degree rotated V2 is not allowed.
(ANGLE V2_all >= 44.9 <= 45.1) NOT INSIDE EDGE MARKS
}

[question]  Single V2 is not allowed in "H-shape" M3 when:
1. The M3 has "H-shape" interact with two metal holes: both two metal holes length <= 4.5um(L2) and two metal hole area <= 4.5um2.
2. The V2 overlaps on the center metal bar of this "H-shape" M3.
3. The center metal bar length <= 1um(L) and the metal bar width <= 0.2um.

[answer] V2_19 {
@ Single V2 is not allowed in "H-shape" M3 when:
@ 1. The M3 has "H-shape" interact with two metal holes: both two metal holes length <= 4.5um(L2) and two metal hole area <= 4.5um2.
@ 2. The V2 overlaps on the center metal bar of this "H-shape" M3.
@ 3. The center metal bar length <= 1um(L) and the metal bar width <= 0.2um.
M3_hole = RECTANGLE (AREA (HOLES M3 INNER) <= 4.5)
X = M3 COIN EDGE M3_hole
Y = INT X <= 0.2 OPPOSITE REGION
M3_bar_edge = LENGTH (M3_hole TOUCH EDGE Y) <= 1
M3_hole_tar = M3_hole NOT WITH EDGE (LENGTH (M3_hole WITH EDGE M3_bar_edge) > 4.5)
Z = Y INTERACT M3_hole_tar == 2
H = V2 NOT OUTSIDE Z

scss
Copy code
ERR = ((M2 AND M3) INTERACT H) NOT INTERACT (V2 NOT H) 
((Z INTERACT H == 1) INTERACT ERR) NOT MARKS    
}

[question] V2 connected to M2DUM, M3DUM is not allowed. This rule is not applied for LOGO covered region.
[answer] V2_20 {
@ V2 connected to M2DUM, M3DUM is not allowed.
@ This rule is not applied for LOGO covered region.
(V2 INTERACT (M2DUM OR M3DUM)) NOT LOGO
}

[question] V2 must be fully covered by M2 and M3. 

[answer] V2_21 {
@ V2 must be fully covered by M2 and M3.
V2_all NOT (M2_all AND M3_all)
}

[question] Insert one V2 if single V2 and (W2 >= 5W3, or W3 >= 5W2) at enclosure. 

[answer] V2_22_R_OFF {
@ Insert one V2 if single V2 and (W2 >= 5W3, or W3 >= 5W2) at enclosure.
CMACRO DFM4 M2 M3 V2
}

[question] At least two vias (Vn, TV1, TV2, n=17) in Mn and Mn+1 (M1, Mn, n=28, TM1, TM2) intersection area. (This rule is not applicable for SRAM region, but SRAM region should follow main rule: V1.17, Vn.17, TV1.13, TV2.13, TV2.14)

[answer] V2_23_R_OFF {
@ At least two vias (Vn, TV1, TV2, n=17) in Mn and Mn+1 (M1, Mn, n=28, TM1, TM2) intersection area.
@ (This rule is not applicable for SRAM region,
@ but SRAM region should follow main rule: V1.17, Vn.17, TV1.13, TV2.13, TV2.14)
V2_INTER= V2 INSIDE (M2 AND M3)
X = (M2 AND M3) INTERACT V2_INTER <2
X OUTSIDE INST
}

[question] It's not allowed V2 overlap with M2 and M3 resistor. 

[answer] V2_24 {
@ It?s not allowed V2 overlap with M2 and M3 resistor.
V2 AND (M2 AND M2R)
V2 AND (M3 AND M3R)
}

[question] Fixed V3 size is 0.07

[answer] V3_1 {
@ Fixed V3 size is 0.07
NOT RECTANGLE V3 == 0.07 BY == 0.07
}

[question] Space between two V3 is 0.07

[answer] V3_2 {
@ Space between two V3 is 0.07
EXT V3_all < 0.07 ABUT<90 SINGULAR REGION
}


[question] Space between Vns (with run length>=0) at least two least two sides is 0.09, when array equal to or greater than 3x3. Two Via areas whose space is within 0.10um are considered to be in the same array. An array does not have both row and column greater than or equal to 3 can apply smaller spacing Vn.2 instead of Vn.3

[answer] V3_3 {
@Space between Vns (with run length>=0) at least two least two sides is 0.09, when array equal to or greater than 3x3.
@Two Via areas whose space is within 0.10um are considered to be in the same array. An array does
@ not have both row and column greater than or equal to 3 can apply smaller spacing Vn.2 instead of Vn.3
X = EXT (V3 INTERACT V3_array) V3< 0.090 OPPOSITE EXTENDED 0.001 REGION
Y =SIZE V3 BY 0.001
(Y INTERACT V3_array) INTERACT (X NOT Y) >2
}

[question] V3_array not touching MOMDMY maximum width is 0.85

[answer] V3_4 {
@ V3_array not touching MOMDMY maximum width is 0.85
(WITH WIDTH V3_array > 0.85) NOT INTERACT MOMDMY
}

[question] V3 (different net) minimum space for run length > 0um is 0.1 (outside of SRAM)

[answer] V3_5 {
@ V3 (different net) minimum space for run length > 0um is 0.1(outside of SRAM)
X = EXT V3 < 0.1 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
(EXT V3DUM < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
(EXT V3DUM V3 < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
}

[question] Vn space in different net for run length>0um (outside of SRAM) is >= 0.11um.

[answer] V3_5_R_OFF {
@ Vn space in different net for run length>0um (outside of SRAM) is >= 0.11um.
X = EXT V3 < 0.11 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
}

[question] V3 (different net) minimum space is 0.09

[answer] V3_5a {
@ V3 (different net) minimum space is 0.09
EXT V3 < 0.09 NOT CONNECTED REGION
EXT V3DUM < 0.09 ABUT<90 SINGULAR REGION
EXT V3DUM V3 < 0.09 ABUT<90 SINGULAR REGION
}

[question] Vn minimum space in different net inside of SRAM is 0.09

[answer] V3_5b {
@ Vn minimum space in different net inside of SRAM is 0.09
X = EXT (V3 AND INST) < 0.09 NOT CONNECTED REGION
X NOT OUTSIDE INST
}

[question] V3 (different net) minimum space for run length > 0um is 0.1 (outside of SRAM)
[answer] V3_5 {
@ V3 (different net) minimum space for run length > 0um is 0.1(outside of SRAM)
X = EXT V3 < 0.1 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
(EXT V3DUM < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
(EXT V3DUM V3 < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
}

[question] Vn space in different net for run length > 0um (outside of SRAM) is >= 0.11um.
[answer] V3_5_R_OFF {
@ Vn space in different net for run length>0um (outside of SRAM) is >= 0.11um.
X = EXT V3 < 0.11 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
}

[question] V3 (different net) minimum space is 0.09
[answer] V3_5a {
@ V3 (different net) minimum space is 0.09
EXT V3 < 0.09 NOT CONNECTED REGION
EXT V3DUM < 0.09 ABUT<90 SINGULAR REGION
EXT V3DUM V3 < 0.09 ABUT<90 SINGULAR REGION
}

[question] Vn minimum space in different net inside of SRAM is 0.09
[answer] V3_5b {
@ Vn minimum space in different net inside of SRAM is 0.09
EXT (V3 NOT OUTSIDE INST) < 0.09 NOT CONNECTED REGION
}


[question] V3 (different net) minimum space is 0.09
[answer] V3_5a {
@ V3 (different net) minimum space is 0.09
EXT V3 < 0.09 NOT CONNECTED REGION
EXT V3DUM < 0.09 ABUT<90 SINGULAR REGION
EXT V3DUM V3 < 0.09 ABUT<90 SINGULAR REGION
}


[question] Vn minimum space in different net inside of SRAM is 0.09
[answer] V3_5b {
@ Vn minimum space in different net inside of SRAM is 0.09
EXT (V3 NOT OUTSIDE INST) < 0.09 NOT CONNECTED REGION
}

[question] V3 (different net) minimum space for run length > 0um is 0.1(outside of SRAM)
[answer] V3_5 {
@ V3 (different net) minimum space for run length > 0um is 0.1(outside of SRAM)
X = EXT V3 < 0.1 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
(EXT V3DUM < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
(EXT V3DUM V3 < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
}


[question] Vn space in different net for run length>0um (outside of SRAM) is >= 0.11um.
[answer] V3_5_R_OFF {
@ Vn space in different net for run length>0um (outside of SRAM) is >= 0.11um.
X = EXT V3 < 0.11 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
}

[question] V3 (different net) minimum space is 0.09
[answer] V3_5a {
@ V3 (different net) minimum space is 0.09
EXT V3 < 0.09 NOT CONNECTED REGION
EXT V3DUM < 0.09 ABUT<90 SINGULAR REGION
EXT V3DUM V3 < 0.09 ABUT<90 SINGULAR REGION
}

[question] Vn minimum space in different net inside of SRAM is 0.09
[answer] V3_5b {
@ Vn minimum space in different net inside of SRAM is 0.09
EXT (V3 NOT OUTSIDE INST) < 0.09 NOT CONNECTED REGION
}


[question] V2 must within M2
per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.6a, Vn.6b or Vn.6c
V2.6a, V2 minimum within M2 is 0.015
Vn.6b Mn overlap past Vn for two opposite sides with either side >=0.01um, and < 0.015m 0.02
Vn.6c Mn overlap past Vn for two opposite sides with either side >= 0um, and < 0.01m 0.03
[answer] V3_6abc {
@ V2 must within M2
@ per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.6a, Vn.6b or Vn.6c
@ V2.6a, V2 minimum within M2 is 0.015
@ Vn.6b Mn overlap past Vn for two opposite sides with either side >=0.01um, and < 0.015m 0.02
@ Vn.6c Mn overlap past Vn for two opposite sides with either side >= 0um, and < 0.01m 0.03
V3_all NOT M3_all
M3andM4 = (M3_all AND M4_all) INTERACT V3_all
BadV3 = RECTANGLE ENCLOSURE V3_all M3_all OUTSIDE ALSO
GOOD 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE
GOOD 0.02 OPPOSITE 0.01 OPPOSITE 0.02 OPPOSITE 0.01 OPPOSITE
GOOD 0.03 0.0 0.03 0.0
BadV3 INTERACT M3andM4
}

[question] Vn inside Mn with width > 0.14um, with at least one redundant Vn.This rule only applies to that M3/M4 intersection area can enclose a rectangle of 0.07*0.27.
[answer] V3_6d {
@ Vn inside Mn with width > 0.14um, with at least one redundant Vn.
@ This rule only applies to that M3/M4 intersection area can enclose a rectangle of 0.07*0.27.
CMACRO V67D V3 M3 M4
}


[question] V2 must within M3
per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.7a, Vn.7b or Vn.7c
V2.7a, V2 minimum within M3 is 0.015
V2.7b, M3 minimum overlap past V2 for two opposite sides with either side >=0.01um, and < 0.015m is 0.02
V2.7c, M3 minimum overlap past V2 for two opposite sides with the either side >=0um, and < 0.01m is 0.03
[answer] V3_7abc {
@ V2 must within M3
@ per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.7a, Vn.7b or Vn.7c
@ V2.7a, V2 minimum within M3 is 0.015
@ V2.7b, M3 minimum overlap past V2 for two opposite sides with either side >=0.01um, and < 0.015m is 0.02
@ V2.7c, M3 minimum overlap past V2 for two opposite sides with the either side >=0um, and < 0.01m is 0.03
V3_all NOT M4_all
M3andM4 = (M3_all AND M4_all) INTERACT V3_all
BadV3 = RECTANGLE ENCLOSURE V3_all M4_all OUTSIDE ALSO
GOOD 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE
GOOD 0.02 OPPOSITE 0.01 OPPOSITE 0.02 OPPOSITE 0.01 OPPOSITE
GOOD 0.03 0.0 0.03 0.0
BadV3 INTERACT M3andM4
}

[question] Vn inside Mn+1 with width > 0.14um, with at least one redundant Vn.This rule only applies to that M3/M4 intersection area can enclose a rectangle of 0.07*0.27.
[answer] V3_7d {
@ Vn inside Mn+1 with width > 0.14um, with at least one redundant Vn.
@ This rule only applies to that M3/M4 intersection area can enclose a rectangle of 0.07*0.27.
CMACRO V67D V3 M4 M3
}

[question] At least two Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.26um
[answer] V3_8 {
@ At least two Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.26um
WM3 = WITH WIDTH M3 > 0.260
WM4 = WITH WIDTH M4 > 0.260
encVia = V3 INTERACT (WM3 OR WM4)
((M3 AND M4) ENCLOSE encVia) ENCLOSE V3 < 2
}


[question] At least three Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.55um
[answer] V3_9 {
@ At least three Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.55um
WM3 = WITH WIDTH M3 > 0.550
WM4 = WITH WIDTH M4 > 0.550
encVia = V3 INTERACT (WM3 OR WM4)
((M3 AND M4) ENCLOSE encVia) ENCLOSE V3 < 3
}

[question] At least four Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.645um
[answer] V3_10 {
@ At least four Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.645um
WM3 = WITH WIDTH M3 > 0.645
WM4 = WITH WIDTH M4 > 0.645
encVia = V3 INTERACT (WM3 OR WM4)
((M3 AND M4) ENCLOSE encVia) ENCLOSE V3 < 4
}

[question] At least two Vns with space <=0.16um when one of Mn or Mn+1 with both length and width >0.24um.Exclude non-square Vn and SRAM area.
[answer] V3_16 {
@At least two Vns with space <=0.16um when one of Mn or Mn+1 with both length and width >0.24um.
@Exclude non-square Vn and SRAM area.
X1a = WITH WIDTH M3 >0.24
X1b = WITH WIDTH M4 >0.24
WIDE = X1a OR X1b
X2 = (M3 AND M4) ENCLOSE V3_square
X3 = V3_square INSIDE X2
X5c = EXT (V3_EMPTY INSIDE WIDE ) V3_EMPTY<=0.16 ABUT<90 REGION CONNECTED // space of via <= 0.16
X6c = X2 ENCLOSE X5c // good intersection with space of Via <= 0.16
X7= ((SIZE X3 BY 0.325) AND X2) ENCLOSE V3 >2
X7c=X2 ENCLOSE X7
X=((X2 NOT X6c) NOT X7c) ENCLOSE (V3_square INSIDE WIDE) // Via_16
X OUTSIDE INST
}


[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>0.24um and width W>0.24um, and the distance D<=1.1um away from this wide metal.
 Exclude non-square Vn
[answer] V3_17 {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>0.24um and width W>0.24um, and the distance D<=1.1um away from this wide metal.
@ Exclude non-square Vn
WM3_L1 = ( M3 NOT WM3 ) TOUCH WM3
M3_ENCWM = (M3 INTERACT WM3) INTERACT V3_A
WM3_VEDGE = EXT [M3_ENCWM] <1.1 ABUT<90 OPPOSITE NOTCH
WM3_EXT1 = EXT (WM3 COIN EDGE WM3_VEDGE) [V3_A] < 1.1 ABUT>=0 <90 OPPOSITE CONNECTED
WM3_EXT2 = (EXT WM3 V3_A < 1.1 ABUT>=0 <90 OPPOSITE REGION CONNECTED ) INSIDE M3
V3_B = V3_square WITH EDGE WM3_EXT1
X1 =(M3 AND M4) ENCLOSE V3_square >1
X2 = ((M3 AND M4) AND ( WM3_L1 AND WM3_EXP )) NOT X1

Y0=(M3 AND M4) ENCLOSE V3_square ==1
Y1 = SIZE (V3_square INTERACT Y0) BY 1.1 INSIDE OF M3 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM3)

VSING1= ((X2 INTERACT V3_B ==1) INTERACT Y2) OR ((X2 INTERACT WM3_EXT2) INTERACT V3_A)
VSING1 OUTSIDE INST

M4_ENCWM = (M4 INTERACT WM4) INTERACT V3_A2
WM4_VEDGE = EXT [M4_ENCWM] <1.1 ABUT<90 OPPOSITE NOTCH
WM4_EXT1 = EXT (WM4_EMPTY COIN EDGE WM4_VEDGE) [V3_A2_EMPTY] < 1.1 ABUT>=0 <90 OPPOSITE CONNECTED
WM4_EXT2 = (EXT WM4_EMPTY V3_A2_EMPTY < 1.1 ABUT>=0 <90 OPPOSITE REGION CONNECTED ) INSIDE M4
V3_B2 = V3_square WITH EDGE WM4_EXT1
X3 = ((M3 AND M4) AND ( WM4_L1 AND WM4_EXP )) NOT X1
Y3 = SIZE (V3_square INTERACT Y0) BY 1.1 INSIDE OF M4 STEP 0.005
Y4= Y3 INTERACT (Y3 AND WM4)

VSING2= ((X3 INTERACT V3_B2 ==1) INTERACT Y4) OR (( X3 INTERACT WM4_EXT2) INTERACT V3_A2)
VSING2 OUTSIDE INST
}

[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>1.4um and width W>1.4um, and the distance D<=2.8um away from this wide metal.
 Exclude non-square Vn
[answer] V3_17a {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>1.4um and width W>1.4um, and the distance D<=2.8um away from this wide metal.
@ Exclude non-square Vn
WM3_L1_a = ( M3 NOT WM3_a ) TOUCH WM3_a
V3_B = COPY V3_square
X1 =(M3 AND M4) ENCLOSE V3_square >1
X2 = ((M3 AND M4) AND ( WM3_L1_a AND WM3_EXP_a )) NOT X1

Y0=(M3 AND M4) ENCLOSE V3_square ==1
Y1 = SIZE (V3_square INTERACT Y0) BY 2.8 INSIDE OF M3 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM3_a)

VSING1= (X2 INTERACT V3_B ==1) INTERACT Y2
VSING1 OUTSIDE INST

V3_B2 = COPY V3_square
X3 = ((M3 AND M4) AND ( WM4_L1_a AND WM4_EXP_a )) NOT X1
Y3 = SIZE (V3_square INTERACT Y0) BY 2.8 INSIDE OF M4 STEP 0.005
Y4 = Y3 INTERACT (Y3 AND WM4_a)

VSING2= (X3 INTERACT V3_B2 ==1) INTERACT Y4
VSING2 OUTSIDE INST
}


[question] 45-degree rotated V3 is not allowed.
[answer] V3_18 {
@ 45-degree rotated V3 is not allowed.
(ANGLE V3_all >= 44.9 <= 45.1) NOT INSIDE EDGE MARKS
}


[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>7um and width W>2.1um, and the distance D<=7.1um away from this wide metal.
Exclude non-square Vn
[answer] V3_17b {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>7um and width W>2.1um, and the distance D<=7.1um away from this wide metal.
@ Exclude non-square Vn
WM3_L1_b = ( M3 NOT WM3_b ) TOUCH WM3_b
V3_B = COPY V3_square
X1 =(M3 AND M4) ENCLOSE V3_square >1
X2 = ((M3 AND M4) AND ( WM3_L1_b AND WM3_EXP_b )) NOT X1

Y0=(M3 AND M4) ENCLOSE V3_square ==1
Y1 = SIZE (V3_square INTERACT Y0) BY 7.1 INSIDE OF M3 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM3_b)

VSING1= (X2 INTERACT V3_B ==1) INTERACT Y2
VSING1 OUTSIDE INST
V3_B2 = COPY V3_square
X3 = ((M3 AND M4) AND ( WM4_L1_b AND WM4_EXP_b )) NOT X1
Y3 = SIZE (V3_square INTERACT Y0) BY 7.1 INSIDE OF M4 STEP 0.005
Y4 = Y3 INTERACT (Y3 AND WM4_b)

VSING2= (X3 INTERACT V3_B2 ==1) INTERACT Y4
VSING2 OUTSIDE INST
}


[question] Single V3 is not allowed in "H-shape" M4 when:
1.The M4 has "H-shape" interact with two metal holes: both two metal holes length <= 4.5um(L2) and two metal hole area <= 4.5um2.
2.The V3 overlaps on the center metal bar of this "H-shape" M4.
3.The center metal bar length <= 1um(L) and the metal bar width <= 0.2um.
[answer] V3_19 {
@ Single V3 is not allowed in "H-shape" M4 when:
@ 1. The M4 has "H-shape" interact with two metal holes: both two metal holes length <= 4.5um(L2) and two metal hole area <= 4.5um2.
@ 2. The V3 overlaps on the center metal bar of this "H-shape" M4.
@ 3. The center metal bar length <= 1um(L) and the metal bar width <= 0.2um.
X0 = AREA (HOLES M4 INNER) <= 4.5
X1 = (X0 NOT ENCLOSE RECTANGLE 1+0.001 4.5) NOT ENCLOSE RECTANGLE 1 4.5+0.001
Y = M4 COIN EDGE X1
Z = INT Y <= 0.2 OPPOSITE REGION
H = V3 NOT OUTSIDE (Z INTERACT X1 == 2)
ERR = ((M3 AND M4) INTERACT H) NOT INTERACT (V3 NOT H)
((Z INTERACT H == 1) INTERACT ERR) NOT MARKS
}


[question] V3 connected to M4DUM, M3DUM is not allowed.This rule is not applied for LOGO covered region.
[answer] V3_20 {
@ V3 connected to M4DUM, M3DUM is not allowed.
@ This rule is not applied for LOGO covered region.
(V3 INTERACT (M4DUM OR M3DUM)) NOT LOGO
}

[question] V3 must be fully covered by M3 and M4.
[answer] V3_21 {
@ V3 must be fully covered by M3 and M4.
V3_all NOT (M3_all AND M4_all)
}

[question] Insert one V3 if single V3 and (W3 >= 5W4, or W4 >= 5W3) at enclosure.
[answer] V3_22_R_OFF {
@ Insert one V3 if single V3 and (W3 >= 5W4, or W4 >= 5W3) at enclosure.
CMACRO DFM4 M3 M4 V3
}

[question] At least two vias (Vn, TV1, TV2, n=17) in Mn and Mn+1 (M1, Mn, n=28, TM1, TM2) intersection area.(This rule is not applicable for SRAM region,but SRAM region should follow main rule: V1.17, Vn.17, TV1.13, TV2.13, TV2.14)
[answer] V3_23_R_OFF {
@ At least two vias (Vn, TV1, TV2, n=17) in Mn and Mn+1 (M1, Mn, n=28, TM1, TM2) intersection area.
@ (This rule is not applicable for SRAM region,
@ but SRAM region should follow main rule: V1.17, Vn.17, TV1.13, TV2.13, TV2.14)
V3_INTER= V3 INSIDE (M3 AND M4)
X = (M3 AND M4) INTERACT V3_INTER <2
X OUTSIDE INST
}

[question] It's not allowed V3 overlap with M3 and M4 resistor.
[answer] V3_24 {
@ It's not allowed V3 overlap with M3 and M4 resistor.
V3 AND (M3 AND M3R)
V3 AND (M4 AND M4R)
}

[question] Fixed V4 size is 0.07
[answer] V4_1 {
@ Fixed V4 size is 0.07
NOT RECTANGLE V4 == 0.07 BY == 0.07
}

[question] Space between two V4 is 0.07
[answer] V4_2 {
@ Space between two V4 is 0.07
EXT V4_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] Space between Vns (with run length>=0) at least two least two sides is 0.09, when array equal to or greater than 3x3. Two Via areas whose space is within 0.10um are considered to be in the same array. An array does not have both row and column greater than or equal to 3 can apply smaller spacing Vn.2 instead of Vn.3
[answer] V4_3 {
@Space between Vns (with run length>=0) at least two least two sides is 0.09, when array equal to or greater than 3x3.
@Two Via areas whose space is within 0.10um are considered to be in the same array. An array does
@ not have both row and column greater than or equal to 3 can apply smaller spacing Vn.2 instead of Vn.3
X = EXT (V4 INTERACT V4_array) V4< 0.090 OPPOSITE EXTENDED 0.001 REGION
Y =SIZE V4 BY 0.001
(Y INTERACT V4_array) INTERACT (X NOT Y) >2
}

[question] V4_array not touching MOMDMY maximum width is 0.85
[answer] V4_4 {
@ V4_array not touching MOMDMY maximum width is 0.85
(WITH WIDTH V4_array > 0.85) NOT INTERACT MOMDMY
}

[question] V4 (different net) minimum space for run length > 0um is 0.1 (outside of SRAM)
[answer] V4_5 {
@ V4 (different net) minimum space for run length > 0um is 0.1 (outside of SRAM)
X = EXT V4 < 0.1 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
(EXT V4DUM < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
(EXT V4DUM V4 < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
}

[question] V4 (different net) minimum space for run length > 0um is 0.11 (outside of SRAM)
[answer] V4_5_R_OFF {
@ V4 (different net) minimum space for run length > 0um is 0.11 (outside of SRAM)
X = EXT V4 < 0.11 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
}

[question] V4 (different net) minimum space is 0.09
[answer] V4_5a {
@ V4 (different net) minimum space is 0.09
EXT V4 < 0.09 NOT CONNECTED REGION
EXT V4DUM < 0.09 ABUT<90 SINGULAR REGION
EXT V4DUM V4 < 0.09 ABUT<90 SINGULAR REGION
}

[question] Vn minimum space in different net inside of SRAM is 0.09
[answer] V4_5b {
@ Vn minimum space in different net inside of SRAM is 0.09
EXT (V4 NOT OUTSIDE INST) < 0.09 NOT CONNECTED REGION
}


[question] V2 must within M2.per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.6a, Vn.6b or Vn.6c.
 V2.6a, V2 minimum within M2 is 0.015.
 Vn.6b Mn overlap past Vn for two opposite sides with either side >=0.01um, and < 0.015um 0.02.
Vn.6c Mn overlap past Vn for two opposite sides with either side >= 0um, and < 0.01um 0.03.
[answer] V4_6abc {
@ V2 must within M2
@ per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.6a, Vn.6b or Vn.6c
@ V2.6a, V2 minimum within M2 is 0.015
@ Vn.6b Mn overlap past Vn for two opposite sides with either side >=0.01um, and < 0.015um 0.02
@ Vn.6c Mn overlap past Vn for two opposite sides with either side >= 0um, and < 0.01um 0.03
V4_all NOT M4_all
M4andM5 = (M4_all AND M5_all) INTERACT V4_all
BadV4 = RECTANGLE ENCLOSURE V4_all M4_all OUTSIDE ALSO
GOOD 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE
GOOD 0.02 OPPOSITE 0.01 OPPOSITE 0.02 OPPOSITE 0.01 OPPOSITE
GOOD 0.03 0.0 0.03 0.0
BadV4 INTERACT M4andM5
}

[question] Vn touching Mn with width > 0.14um, with at least one redundant Vn.This rule only applies to that M4/M5 intersection area can enclose a rectangle of 0.07*0.27.
[answer] V4_6d {
@ Vn touching Mn with width > 0.14um, with at least one redundant Vn.
@ This rule only applies to that M4/M5 intersection area can enclose a rectangle of 0.07*0.27.
CMACRO V67D V4 M4 M5
}


[question] V2 must within M3.per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.7a, Vn.7b or Vn.7c.
V2.7a, V2 minimum within M3 is 0.015.
V2.7b, M3 minimum overlap past V2 for two opposite sides with either side >=0.01um, and < 0.015um is 0.02.
V2.7c, M3 minimum overlap past V2 for two opposite sides with the either side >=0um, and < 0.01um is 0.03.
[answer] V4_7abc {
@ V2 must within M3
@ per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.7a, Vn.7b or Vn.7c
@ V2.7a, V2 minimum within M3 is 0.015
@ V2.7b, M3 minimum overlap past V2 for two opposite sides with either side >=0.01um, and < 0.015um is 0.02
@ V2.7c, M3 minimum overlap past V2 for two opposite sides with the either side >=0um, and < 0.01um is 0.03
V4_all NOT M5_all
M4andM5 = (M4_all AND M5_all) INTERACT V4_all
BadV4 = RECTANGLE ENCLOSURE V4_all M5_all OUTSIDE ALSO
GOOD 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE
GOOD 0.02 OPPOSITE 0.01 OPPOSITE 0.02 OPPOSITE 0.01 OPPOSITE
GOOD 0.03 0.0 0.03 0.0
BadV4 INTERACT M4andM5
}

[question] Vn+1 touching Mn with width > 0.14um, with at least one redundant Vn.This rule only applies to that M4/M5 intersection area can enclose a rectangle of 0.07*0.27.
[answer] V4_7d {
@ Vn+1 touching Mn with width > 0.14um, with at least one redundant Vn.
@ This rule only applies to that M4/M5 intersection area can enclose a rectangle of 0.07*0.27.
CMACRO V67D V4 M5 M4
}

[question] At least two Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.26um
[answer] V4_8 {
@ At least two Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.26um
WM4 = WITH WIDTH M4 > 0.260
WM5 = WITH WIDTH M5 > 0.260
encVia = V4 INTERACT (WM4 OR WM5)
((M4 AND M5) ENCLOSE encVia) ENCLOSE V4 < 2
}


[question] At least three Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.55um
[answer] V4_9 {
@ At least three Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.55um
WM4 = WITH WIDTH M4 > 0.550
WM5 = WITH WIDTH M5 > 0.550
encVia = V4 INTERACT (WM4 OR WM5)
((M4 AND M5) ENCLOSE encVia) ENCLOSE V4 < 3
}

[question] At least four Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.645um
[answer] V4_10 {
@ At least four Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.645um
WM4 = WITH WIDTH M4 > 0.645
WM5 = WITH WIDTH M5 > 0.645
encVia = V4 INTERACT (WM4 OR WM5)
((M4 AND M5) ENCLOSE encVia) ENCLOSE V4 < 4
}

[question] At least two Vns with space <=0.16um when one of Mn or Mn+1 with both length and width >0.24um.Exclude non-square Vn and SRAM area.
[answer] V4_16 {
@At least two Vns with space <=0.16um when one of Mn or Mn+1 with both length and width >0.24um.
@Exclude non-square Vn and SRAM area.
X1a = WITH WIDTH M4 >0.24
X1b = WITH WIDTH M5 >0.24
WIDE = X1a OR X1b
X2 = (M5 AND M4) ENCLOSE V4_square
X3 = V4_square INSIDE X2
X5c = EXT (V4_EMPTY INSIDE WIDE ) V4_EMPTY<=0.16 ABUT<90 REGION CONNECTED // space of via <= 0.14
X6c = X2 ENCLOSE X5c // good intersection with space of Via <= 0.14
X7= ((SIZE X3 BY 0.325) AND X2) ENCLOSE V4 >2
X7c=X2 ENCLOSE X7
X =((X2 NOT X6c) NOT X7c) ENCLOSE ( V4_square INSIDE WIDE) // Via_16
X OUTSIDE INST
}

[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>0.24um and width W>0.24um, and the distance D<=1.1um away from this wide metal.Exclude non-square Vn.
[answer] V4_17 {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>0.24um and width W>0.24um, and the distance D<=1.1um away from this wide metal.
@ Exclude non-square Vn
WM4_L1 = ( M4 NOT WM4 ) TOUCH WM4
M4_ENCWM = (M4 INTERACT WM4) INTERACT V4_A
WM4_VEDGE = EXT [M4_ENCWM] <1.1 ABUT<90 OPPOSITE NOTCH
WM4_EXT1 = EXT (WM4 COIN EDGE WM4_VEDGE) [V4_A] < 1.1 ABUT>=0 <90 OPPOSITE CONNECTED
WM4_EXT2 = (EXT WM4 V4_A < 1.1 ABUT>=0 <90 OPPOSITE REGION CONNECTED ) INSIDE M4
V4_B = V4_square WITH EDGE WM4_EXT1
X1 =(M4 AND M5) ENCLOSE V4_square >1
X2 = ((M4 AND M5) AND ( WM4_L1 AND WM4_EXP )) NOT X1
Y0=(M4 AND M5) ENCLOSE V4_square ==1
Y1 = SIZE (V4_square INTERACT Y0) BY 1.1 INSIDE OF M4 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM4)
VSING1= ((X2 INTERACT V4_B ==1) INTERACT Y2) OR ((X2 INTERACT WM4_EXT2) INTERACT V4_A)
VSING1 OUTSIDE INST

M5_ENCWM = (M5 INTERACT WM5) INTERACT V4_A2
WM5_VEDGE = EXT [M5_ENCWM] <1.1 ABUT<90 OPPOSITE NOTCH
WM5_EXT1 = EXT (WM5_EMPTY COIN EDGE WM5_VEDGE) [V4_A2_EMPTY] < 1.1 ABUT>=0 <90 OPPOSITE CONNECTED
WM5_EXT2 = (EXT WM5_EMPTY V4_A2_EMPTY < 1.1 ABUT>=0 <90 OPPOSITE REGION CONNECTED ) INSIDE M5
V4_B2 = V4_square WITH EDGE WM5_EXT1
X3 = ((M4 AND M5) AND ( WM5_L1 AND WM5_EXP )) NOT X1
Y3 = SIZE (V4_square INTERACT Y0) BY 1.1 INSIDE OF M5 STEP 0.005
Y4= Y3 INTERACT (Y3 AND WM5)
VSING2= ((X3 INTERACT V4_B2 ==1) INTERACT Y4) OR (( X3 INTERACT WM5_EXT2) INTERACT V4_A2)
VSING2 OUTSIDE INST
}

[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>1.4um and width W>1.4um, and the distance D<=2.8um away from this wide metal.Exclude non-square Vn
[answer] V4_17a {
@ At least two Vns  when either wide metal of Mn or Mn+1 with both length L>1.4um and width W>1.4um, and the distance D<=2.8um away from this wide metal.
@ Exclude non-square Vn
WM4_L1_a = ( M4 NOT WM4_a ) TOUCH WM4_a
V4_B = COPY V4_square
X1 =(M4 AND M5) ENCLOSE V4_square >1
X2 = ((M4 AND M5) AND ( WM4_L1_a AND WM4_EXP_a )) NOT X1

Y0=(M4 AND M5) ENCLOSE V4_square ==1
Y1 = SIZE (V4_square INTERACT Y0) BY 2.8 INSIDE OF M4 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM4_a)

VSING1= (X2 INTERACT V4_B ==1) INTERACT Y2
VSING1 OUTSIDE INST
V4_B2 = COPY V4_square
X3 = ((M4 AND M5) AND ( WM5_L1_a AND WM5_EXP_a )) NOT X1
Y3 = SIZE (V4_square INTERACT Y0) BY 2.8 INSIDE OF M5 STEP 0.005
Y4 = Y3 INTERACT (Y3 AND WM5_a)

VSING2= (X3 INTERACT V4_B2 ==1) INTERACT Y4
VSING2 OUTSIDE INST
}

[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>7um and width W>2.1um, and the distance D<=7.1um away from this wide metal.Exclude non-square Vn
[answer] V4_17b {
@ At least two Vns  when either wide metal of Mn or Mn+1 with both length L>7um and width W>2.1um, and the distance D<=7.1um away from this wide metal.
@ Exclude non-square Vn
WM4_L1_b = ( M4 NOT WM4_b ) TOUCH WM4_b
V4_B = COPY V4_square
X1 =(M4 AND M5) ENCLOSE V4_square >1
X2 = ((M4 AND M5) AND ( WM4_L1_b AND WM4_EXP_b )) NOT X1

Y0=(M4 AND M5) ENCLOSE V4_square ==1
Y1 = SIZE (V4_square INTERACT Y0) BY 7.1 INSIDE OF M4 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM4_b)

VSING1= (X2 INTERACT V4_B ==1) INTERACT Y2
VSING1 OUTSIDE INST
V4_B2 = COPY V4_square
X3 = ((M4 AND M5) AND ( WM5_L1_b AND WM5_EXP_b )) NOT X1
Y3 = SIZE (V4_square INTERACT Y0) BY 7.1 INSIDE OF M5 STEP 0.005
Y4 = Y3 INTERACT (Y3 AND WM5_b)

VSING2= (X3 INTERACT V4_B2 ==1) INTERACT Y4
VSING2 OUTSIDE INST
}

[question] 45-degree rotated V4 is not allowed.
[answer] V4_18 {
@ 45-degree rotated V4 is not allowed.
(ANGLE V4_all >= 44.9 <= 45.1) NOT INSIDE EDGE MARKS
}

[question] Single V4 is not allowed in "H-shape" M5 when:
1.The M5 has "H-shape" interact with two metal holes: both two metal holes length <= 4.5um(L2) and two metal hole area <= 4.5um2.
2.The V4 overlaps on the center metal bar of this "H-shape" M5.
3.The center metal bar length <= 1um(L) and the metal bar width <= 0.2um.
[answer] V4_19 {
@ Single V4 is not allowed in "H-shape" M5 when:
 @ 1. The M5 has "H-shape" interact with two metal holes: both two metal holes length <= 4.5um(L2) and two metal hole area <= 4.5um2.
 @ 2. The V4 overlaps on the center metal bar of this "H-shape" M5.
 @ 3. The center metal bar length <= 1um(L) and the metal bar width <= 0.2um.
X0 = AREA (HOLES M5 INNER) <= 4.5
X1 = (X0 NOT ENCLOSE RECTANGLE 1+0.001 4.5) NOT ENCLOSE RECTANGLE 1 4.5+0.001
Y = M5 COIN EDGE X1
Z = INT Y <= 0.2 OPPOSITE REGION
H = V4 NOT OUTSIDE (Z INTERACT X1 == 2)
ERR = ((M4 AND M5) INTERACT H) NOT INTERACT (V4 NOT H)
((Z INTERACT H == 1) INTERACT ERR) NOT MARKS
}


[question] V4 connected to M5DUM, M4DUM is not allowed. This rule is not applied for LOGO covered region.
[answer] V4_20 {
@ V4 connected to M5DUM, M4DUM is not allowed.
@ This rule is not applied for LOGO covered region.
(V4 INTERACT (M5DUM OR M4DUM)) NOT LOGO
}

[question] V4 must be fully covered by M4 and M5.
[answer] V4_21 {
@ V4 must be fully covered by M4 and M5.
V4_all NOT (M4_all AND M5_all)
}

[question] Insert one V4 if single V4 and (W4 >= 5W5, or W5 >= 5W4) at enclosure.
[answer] V4_22_R_OFF {
@ Insert one V4 if single V4 and (W4 >= 5W5, or W5 >= 5W4) at enclosure.
CMACRO DFM4 M4 M5 V4
}

[question] At least two vias (Vn, TV1, TV2, n=17) in Mn and Mn+1 (M1, Mn, n=28, TM1, TM2) intersection area. This rule is not applicable for SRAM region, but SRAM region should follow main rule: V1.17, Vn.17, TV1.13, TV2.13, TV2.14.
[answer] V4_23_R_OFF {
@ At least two vias (Vn, TV1, TV2, n=1~7) in Mn and Mn+1 (M1, Mn, n=2~8, TM1, TM2) intersection area. 
@ (This rule is not applicable for SRAM region, 
@ but SRAM region should follow main rule: V1.17, Vn.17, TV1.13, TV2.13, TV2.14)
V4_INTER= V4 INSIDE (M4 AND M5)
X = (M4 AND M5) INTERACT V4_INTER <2
X OUTSIDE INST
}

[question] Its not allowed V4 overlap with M4 and M5 resistor.
[answer] V4_24 {
@ Its not allowed V4 overlap with M4 and M5 resistor.
V4 AND (M4 AND M4R)
V4 AND (M5 AND M5R)
}

[question] Fixed V5 size is 0.07
[answer] V5_1 {
@ Fixed V5 size is 0.07
NOT RECTANGLE V5 == 0.07 BY == 0.07
}


[question] Space between two V5 is 0.07
[answer] V5_2 {
@ Space between two V5 is 0.07
EXT V5_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] Space between Vns (with run length>=0) at least two least two sides is 0.09, when array equal to or greater than 3x3.Two Via areas whose space is within 0.10um are considered to be in the same array. An array does not have both row and column greater than or equal to 3 can apply smaller spacing Vn.2 instead of Vn.3
[answer] V5_3 {
@Space between Vns (with run length>=0) at least two least two sides is 0.09, when array equal to or greater than 3x3.
@Two Via areas whose space is within 0.10um are considered to be in the same array. An array does
@ not have both row and column greater than or equal to 3 can apply smaller spacing Vn.2 instead of Vn.3
X = EXT (V5 INTERACT V5_array) V5< 0.090 OPPOSITE EXTENDED 0.001 REGION
Y =SIZE V5 BY 0.001
(Y INTERACT V5_array) INTERACT (X NOT Y) >2
}

[question] V5_array not touching MOMDMY maximum width is 0.85
[answer] V5_4 {
@ V5_array not touching MOMDMY maximum width is 0.85
(WITH WIDTH V5_array > 0.85) NOT INTERACT MOMDMY
}


[question] V5 (different net) minimum space for run length > 0um is 0.1(outside of SRAM)
[answer] V5_5 {
@ V5 (different net) minimum space for run length > 0um is 0.1(outside of SRAM)
X = EXT V5 < 0.1 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
(EXT V5DUM < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
(EXT V5DUM V5 < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
}

[question] V5 (different net) minimum space for run length > 0um is 0.11(outside of SRAM)
[answer] V5_5_R_OFF {
@ V5 (different net) minimum space for run length > 0um is 0.11(outside of SRAM)
X = EXT V5 < 0.11 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
}

[question] V5 (different net) minimum space is 0.09
[answer] V5_5a {
@ V5 (different net) minimum space is 0.09
EXT V5 < 0.09 NOT CONNECTED REGION
EXT V5DUM < 0.09 ABUT<90 SINGULAR REGION
EXT V5DUM V5 < 0.09 ABUT<90 SINGULAR REGION
}

[question] Vn minimum space in different net inside of SRAM is 0.09
[answer] V5_5b {
@ Vn minimum space in different net inside of SRAM is 0.09
EXT (V5 NOT OUTSIDE INST) < 0.09 NOT CONNECTED REGION
}


[question] V5 (different net) minimum space for run length > 0um is 0.1 (outside of SRAM)
[answer] V5_5 {
@ V5 (different net) minimum space for run length > 0um is 0.1 (outside of SRAM)
X = EXT V5 < 0.1 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
(EXT V5DUM < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
(EXT V5DUM V5 < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
}

[question] V5 (different net) minimum space for run length > 0um is 0.11 (outside of SRAM)
[answer] V5_5_R_OFF {
@ V5 (different net) minimum space for run length > 0um is 0.11 (outside of SRAM)
X = EXT V5 < 0.11 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
}

[question] V5 (different net) minimum space is 0.09
[answer] V5_5a {
@ V5 (different net) minimum space is 0.09
EXT V5 < 0.09 NOT CONNECTED REGION
EXT V5DUM < 0.09 ABUT<90 SINGULAR REGION
EXT V5DUM V5 < 0.09 ABUT<90 SINGULAR REGION
}

[question] Vn minimum space in different net inside of SRAM is 0.09
[answer] V5_5b {
@ Vn minimum space in different net inside of SRAM is 0.09
EXT (V5 NOT OUTSIDE INST) < 0.09 NOT CONNECTED REGION
}

[question] V5 (different net) minimum space for run length > 0um is 0.1 (outside of SRAM)
[answer] V5_5 {
@ V5 (different net) minimum space for run length > 0um is 0.1 (outside of SRAM)
X = EXT V5 < 0.1 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
(EXT V5DUM < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
(EXT V5DUM V5 < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
}

[question] V5 (different net) minimum space for run length > 0um is 0.11 (outside of SRAM)
[answer] V5_5_R_OFF {
@ V5 (different net) minimum space for run length > 0um is 0.11 (outside of SRAM)
X = EXT V5 < 0.11 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
}

[question] V5 (different net) minimum space is 0.09
[answer] V5_5a {
@ V5 (different net) minimum space is 0.09
EXT V5 < 0.09 NOT CONNECTED REGION
EXT V5DUM < 0.09 ABUT<90 SINGULAR REGION
EXT V5DUM V5 < 0.09 ABUT<90 SINGULAR REGION
}


[question] Vn minimum space in different net inside of SRAM is 0.09
[answer] V5_5b {
@ Vn minimum space in different net inside of SRAM is 0.09
EXT (V5 NOT OUTSIDE INST) < 0.09 NOT CONNECTED REGION
}

[question] V2 must be within M2, per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.6a, Vn.6b or Vn.6c.
V2.6a, V2 minimum within M2 is 0.015.
Vn.6b Mn overlap past Vn for two opposite sides with either side >=0.01um, and < 0.015um 0.02.
Vn.6c Mn overlap past Vn for two opposite sides with either side >= 0um, and < 0.01um 0.03.
[answer] V5_6abc {
@ V2 must within M2
@ per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.6a, Vn.6b or Vn.6c
@ V2.6a, V2 minimum within M2 is 0.015
@ Vn.6b Mn overlap past Vn for two opposite sides with either side >=0.01um, and < 0.015um 0.02
@ Vn.6c Mn overlap past Vn for two opposite sides with either side >= 0um, and < 0.01um 0.03
V5_all NOT M5_all
M5andM6 = (M5_all AND M6_all) INTERACT V5_all
Badv5 = RECTANGLE ENCLOSURE V5_all M5_all OUTSIDE ALSO
GOOD 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE
GOOD 0.02 OPPOSITE 0.01 OPPOSITE 0.02 OPPOSITE 0.01 OPPOSITE
GOOD 0.03 0.0 0.03 0.0
BadV5 INTERACT M5andM6
}

[question] Vn touching Mn with width > 0.14um, with at least one redundant Vn.This rule only applies to that M5/M6 intersection area can enclose a rectangle of 0.07*0.27.
[answer] V5_6d {
@ Vn touching Mn with width > 0.14um, with at least one redundant Vn.
@ This rule only applies to that M5/M6 intersection area can enclose a rectangle of 0.07*0.27.
CMACRO V67D V5 M5 M6
}

[question] V2 must be within M2, per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.6a, Vn.6b or Vn.6c.
V2.6a, V2 minimum within M2 is 0.015.
Vn.6b Mn overlap past Vn for two opposite sides with either side >=0.01um, and < 0.015um 0.02.
Vn.6c Mn overlap past Vn for two opposite sides with either side >= 0um, and < 0.01um 0.03.
[answer] V5_7abc {
@ V2 must within M2
@ per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.6a, Vn.6b or Vn.6c
@ V2.6a, V2 minimum within M2 is 0.015
@ Vn.6b Mn overlap past Vn for two opposite sides with either side >=0.01um, and < 0.015um 0.02
@ Vn.6c Mn overlap past Vn for two opposite sides with either side >= 0um, and < 0.01um 0.03
V5_all NOT M6_all
M5andM6 = (M5_all AND M6_all) INTERACT V5_all
BadV5 = RECTANGLE ENCLOSURE V5_all M6_all OUTSIDE ALSO
GOOD 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE
GOOD 0.02 OPPOSITE 0.01 OPPOSITE 0.02 OPPOSITE 0.01 OPPOSITE
GOOD 0.03 0.0 0.03 0.0
BadV5 INTERACT M5andM6
}


[question] Vn+1 touching Mn with width > 0.14um, with at least one redundant Vn.This rule only applies to that M5/M6 intersection area can enclose a rectangle of 0.07*0.27.
[answer] V5_7d {
@ Vn+1 touching Mn with width > 0.14um, with at least one redundant Vn.
@ This rule only applies to that M5/M6 intersection area can enclose a rectangle of 0.07*0.27.
CMACRO V67D V5 M6 M5
}

[question] At least two Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.26um.
[answer] V5_8 {
@ At least two Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.26um
WM5 = WITH WIDTH M5 > 0.260
WM6 = WITH WIDTH M6 > 0.260
encVia = V5 INTERACT (WM5 OR WM6)
((M5 AND M6) ENCLOSE encVia) ENCLOSE V5 < 2
}

[question] At least three Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.55um.
[answer] V5_9 {
@ At least three Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.55um
WM5 = WITH WIDTH M5 > 0.550
WM6 = WITH WIDTH M6 > 0.550
encVia = V5 INTERACT (WM5 OR WM6)
((M5 AND M6) ENCLOSE encVia) ENCLOSE V5 < 3
}

[question] At least four Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.645um.
[answer] V5_10 {
@ At least four Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.645um
WM5 = WITH WIDTH M5 > 0.645
WM6 = WITH WIDTH M6 > 0.645
encVia = V5 INTERACT (WM5 OR WM6)
((M5 AND M6) ENCLOSE encVia) ENCLOSE V5 < 4
}

[question] At least two Vns with space <=0.16um when one of Mn or Mn+1 with both length and width >0.24um.Exclude non-square Vn and SRAM area.
[answer] V5_16 {
@At least two Vns with space <=0.16um when one of Mn or Mn+1 with both length and width >0.24um.
@Exclude non-square Vn and SRAM area.
X1a = WITH WIDTH M5 >0.24
X1b = WITH WIDTH M6 >0.24
WIDE = X1a OR X1b
X2 = (M5 AND M6) ENCLOSE V5_square
X3 = V5_square INSIDE X2
X5c = EXT (V5_EMPTY INSIDE WIDE ) V5_EMPTY<=0.16 ABUT<90 REGION OPPOSITE // space of via <= 0.16
X6c = X2 ENCLOSE X5c // good intersection with space of Via <= 0.16
X7= ((SIZE X3 BY 0.325) AND X2) ENCLOSE V5 >2
X7c=X2 ENCLOSE X7

X =((X2 NOT X6c)NOT X7c) ENCLOSE (V5_square INSIDE WIDE ) // Via_16
X OUTSIDE INST
}

[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>0.24um and width W>0.24um, and the distance D<=1.1um away from this wide metal. Exclude non-square Vn
[answer] V5_17 {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>0.24um and width W>0.24um, and the distance D<=1.1um away from this wide metal.
@ Exclude non-square Vn
WM5_L1 = ( M5 NOT WM5 ) TOUCH WM5
M5_ENCWM = (M5 INTERACT WM5) INTERACT V5_A
WM5_VEDGE = EXT [M5_ENCWM] <1.1 ABUT<90 OPPOSITE NOTCH
WM5_EXT1 = EXT (WM5 COIN EDGE WM5_VEDGE) [V5_A] < 1.1 ABUT>=0 <90 OPPOSITE CONNECTED
WM5_EXT2 = (EXT WM5 V5_A < 1.1 ABUT>=0 <90 OPPOSITE REGION CONNECTED ) INSIDE M5
V5_B = V5_square WITH EDGE WM5_EXT1
X1 =(M5 AND M6) ENCLOSE V5_square >1
X2 = ((M5 AND M6) AND ( WM5_L1 AND WM5_EXP )) NOT X1

Y0=(M5 AND M6) ENCLOSE V5_square ==1
Y1 = SIZE (V5_square INTERACT Y0) BY 1.1 INSIDE OF M5 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM5)

VSING1= ((X2 INTERACT V5_B ==1) INTERACT Y2) OR ((X2 INTERACT WM5_EXT2) INTERACT V5_A)
VSING1 OUTSIDE INST

M6_ENCWM = (M6 INTERACT WM6) INTERACT V5_A2
WM6_VEDGE = EXT [M6_ENCWM] <1.1 ABUT<90 OPPOSITE NOTCH
WM6_EXT1 = EXT (WM6_EMPTY COIN EDGE WM6_VEDGE) [V5_A2_EMPTY] < 1.1 ABUT>=0 <90 OPPOSITE CONNECTED
WM6_EXT2 = (EXT WM6_EMPTY V5_A2_EMPTY < 1.1 ABUT>=0 <90 OPPOSITE REGION CONNECTED ) INSIDE M6
V5_B2 = V5_square WITH EDGE WM6_EXT1
X3 = ((M5 AND M6) AND ( WM6_L1 AND WM6_EXP )) NOT X1
Y3 = SIZE (V5_square INTERACT Y0) BY 1.1 INSIDE OF M6 STEP 0.005
Y4= Y3 INTERACT (Y3 AND WM6)
VSING2= ((X3 INTERACT V5_B2 ==1) INTERACT Y4) OR (( X3 INTERACT WM6_EXT2) INTERACT V5_A2)
VSING2 OUTSIDE INST
}
[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>1.4um and width W>1.4um, and the distance D<=2.8um away from this wide metal.Exclude non-square Vn
[answer] V5_17a {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>1.4um and width W>1.4um, and the distance D<=2.8um away from this wide metal.
@ Exclude non-square Vn
WM5_L1_a = ( M5 NOT WM5_a ) TOUCH WM5_a
V5_B = COPY V5_square
X1 =(M5 AND M6) ENCLOSE V5_square >1
X2 = ((M5 AND M6) AND ( WM5_L1_a AND WM5_EXP_a )) NOT X1

Y0=(M5 AND M6) ENCLOSE V5_square ==1
Y1 = SIZE (V5_square INTERACT Y0) BY 2.8 INSIDE OF M5 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM5_a)

VSING1= (X2 INTERACT V5_B ==1) INTERACT Y2
VSING1 OUTSIDE INST

V5_B2 = COPY V5_square
X3 = ((M5 AND M6) AND ( WM6_L1_a AND WM6_EXP_a )) NOT X1
Y3 = SIZE (V5_square INTERACT Y0) BY 2.8 INSIDE OF M6 STEP 0.005
Y4 = Y3 INTERACT (Y3 AND WM6_a)

VSING2= (X3 INTERACT V5_B2 ==1) INTERACT Y4
VSING2 OUTSIDE INST
}

[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>7um and width W>2.1um, and the distance D<=7.1um away from this wide metal.Exclude non-square Vn
[answer] V5_17b {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>7um and width W>2.1um, and the distance D<=7.1um away from this wide metal.
@ Exclude non-square Vn
WM5_L1_b = ( M5 NOT WM5_b ) TOUCH WM5_b
V5_B = COPY V5_square
X1 =(M5 AND M6) ENCLOSE V5_square >1
X2 = ((M5 AND M6) AND ( WM5_L1_b AND WM5_EXP_b )) NOT X1

Y0=(M5 AND M6) ENCLOSE V5_square ==1
Y1 = SIZE (V5_square INTERACT Y0) BY 7.1 INSIDE OF M5 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM5_b)

VSING1= (X2 INTERACT V5_B ==1) INTERACT Y2
VSING1 OUTSIDE INST

V5_B2 = COPY V5_square
X3 = ((M5 AND M6) AND ( WM6_L1_b AND WM6_EXP_b )) NOT X1
Y3 = SIZE (V5_square INTERACT Y0) BY 7.1 INSIDE OF M6 STEP 0.005
Y4 = Y3 INTERACT (Y3 AND WM6_b)

VSING2= (X3 INTERACT V5_B2 ==1) INTERACT Y4
VSING2 OUTSIDE INST
}


[question] 45-degree rotated V5 is not allowed.
[answer] V5_18 {
@ 45-degree rotated V5 is not allowed.
(ANGLE V5_all >= 44.9 <= 45.1) NOT INSIDE EDGE MARKS
}

[question] Single V5 is not allowed in "H-shape" M6 when:
1.The M6 has "H-shape" interact with two metal holes: both two metal holes length <= 4.5um(L2) and two metal hole area <= 4.5um2.
2.The V5 overlaps on the center metal bar of this "H-shape" M6.
3.The center metal bar length <= 1um(L) and the metal bar width <= 0.2um.
[answer] V5_19 {
@ Single V5 is not allowed in "H-shape" M6 when:
@ 1. The M6 has "H-shape" interact with two metal holes: both two metal holes length <= 4.5um(L2) and two metal hole area <= 4.5um2.
@ 2. The V5 overlaps on the center metal bar of this "H-shape" M6.
@ 3. The center metal bar length <= 1um(L) and the metal bar width <= 0.2um.
X0 = AREA (HOLES M6 INNER) <= 4.5
X1 = (X0 NOT ENCLOSE RECTANGLE 1+0.001 4.5) NOT ENCLOSE RECTANGLE 1 4.5+0.001
Y = M6 COIN EDGE X1
Z = INT Y <= 0.2 OPPOSITE REGION
H = V5 NOT OUTSIDE (Z INTERACT X1 == 2)
ERR = ((M5 AND M6) INTERACT H) NOT INTERACT (V5 NOT H)
((Z INTERACT H == 1) INTERACT ERR) NOT MARKS
}
[question] V5 connected to M6DUM, M5DUM is not allowed. This rule is not applied for LOGO covered region.
[answer] V5_20 {
@ V5 connected to M6DUM, M5DUM is not allowed.
@ This rule is not applied for LOGO covered region.
(V5 INTERACT (M6DUM OR M5DUM)) NOT LOGO
}

[question] V5 must be fully covered by M5 and M6.
[answer] V5_21 {
@ V5 must be fully covered by M5 and M6.
V5_all NOT (M5_all AND M6_all)
}

[question] Insert one V5 if single V5 and (W5 >= 5W6, or W6 >= 5W5) at enclosure.
[answer] V5_22_R_OFF {
@ Insert one V5 if single V5 and (W5 >= 5W6, or W6 >= 5W5) at enclosure.
CMACRO DFM4 M5 M6 V5
}

[question] At least two vias (Vn, TV1, TV2, n=17) in Mn and Mn+1 (M1, Mn, n=28, TM1, TM2) intersection area.
(This rule is not applicable for SRAM region, but SRAM region should follow main rule: V1.17, Vn.17, TV1.13, TV2.13, TV2.14)
[answer] V5_23_R_OFF {
@ At least two vias (Vn, TV1, TV2, n=17) in Mn and Mn+1 (M1, Mn, n=28, TM1, TM2) intersection area.
@ (This rule is not applicable for SRAM region,
@ but SRAM region should follow main rule: V1.17, Vn.17, TV1.13, TV2.13, TV2.14)
V5_INTER= V5 INSIDE (M5 AND M6)
X = (M5 AND M6) INTERACT V5_INTER <2
X OUTSIDE INST
}

[question] It's not allowed V5 overlap with M5 and M6 resistor.
[answer] V5_24 {
@ It?s not allowed V5 overlap with M5 and M6 resistor.
V5 AND (M5 AND M5R)
V5 AND (M6 AND M6R)
}

[question] Fixed V6 size is 0.07
[answer] V6_1 {
@ Fixed V6 size is 0.07
NOT RECTANGLE V6 == 0.07 BY == 0.07
}

[question] Space between two V6 is 0.07
[answer] V6_2 {
@ Space between two V6 is 0.07
EXT V6_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] Space between Vns (with run length>=0) at least two least two sides is 0.09, when array equal to or greater than 3x3.
Two Via areas whose space is within 0.10um are considered to be in the same array. An array does not have both row and column greater than or equal to 3 can apply smaller spacing Vn.2 instead of Vn.3
[answer] V6_3 {
@Space between Vns (with run length>=0) at least two least two sides is 0.09, when array equal to or greater than 3x3.
@Two Via areas whose space is within 0.10um are considered to be in the same array. An array does
@ not have both row and column greater than or equal to 3 can apply smaller spacing Vn.2 instead of Vn.3
X = EXT (V6 INTERACT V6_array) V6< 0.090 OPPOSITE EXTENDED 0.001 REGION
Y =SIZE V6 BY 0.001
(Y INTERACT V6_array) INTERACT (X NOT Y) >2
}

[question] V6_array not touching MOMDMY maximum width is 0.85
[answer] V6_4 {
@ V6_array not touching MOMDMY maximum width is 0.85
(WITH WIDTH V6_array > 0.85) NOT INTERACT MOMDMY
}

[question] V6 (different net) minimum space for run length > 0um is 0.1(outside of SRAM)
[answer] V6_5 {
@ V6 (different net) minimum space for run length > 0um is 0.1(outside of SRAM)
X = EXT V6 < 0.1 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
(EXT V6DUM < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
(EXT V6DUM V6 < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
}

[question] V6 (different net) minimum space for run length > 0um is 0.11(outside of SRAM)
[answer] V6_5_R_OFF {
@ V6 (different net) minimum space for run length > 0um is 0.11(outside of SRAM)
X = EXT V6 < 0.11 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
}

[question] V6 (different net) minimum space is 0.09
[answer] V6_5a {
@ V6 (different net) minimum space is 0.09
EXT V6 < 0.09 NOT CONNECTED REGION
EXT V6DUM < 0.09 ABUT<90 SINGULAR REGION
EXT V6DUM V6 < 0.09 ABUT<90 SINGULAR REGION
}

[question] Vn minimum space in different net inside of SRAM is 0.09
[answer] V6_5b {
@ Vn minimum space in different net inside of SRAM is 0.09
EXT (V6 NOT OUTSIDE INST) < 0.09 NOT CONNECTED REGION
}


[question] V6 (different net) minimum space for run length > 0um is 0.1(outside of SRAM)
[answer] V6_5 {
@ V6 (different net) minimum space for run length > 0um is 0.1(outside of SRAM)
X = EXT V6 < 0.1 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
(EXT V6DUM < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
(EXT V6DUM V6 < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
}

[question] V6 (different net) minimum space for run length > 0um is 0.11(outside of SRAM)
[answer] V6_5_R_OFF {
@ V6 (different net) minimum space for run length > 0um is 0.11(outside of SRAM)
X = EXT V6 < 0.11 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
}

[question] V6 (different net) minimum space is 0.09
[answer] V6_5a {
@ V6 (different net) minimum space is 0.09
EXT V6 < 0.09 NOT CONNECTED REGION
EXT V6DUM < 0.09 ABUT<90 SINGULAR REGION
EXT V6DUM V6 < 0.09 ABUT<90 SINGULAR REGION
}

[question] Vn minimum space in different net inside of SRAM is 0.09
[answer] V6_5b {
@ Vn minimum space in different net inside of SRAM is 0.09
EXT (V6 NOT OUTSIDE INST) < 0.09 NOT CONNECTED REGION
}

[question] V2 must within M2 per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.6a, Vn.6b or Vn.6c.V2.6a, V2 minimum within M2 is 0.015
 Vn.6b Mn overlap past Vn for two opposite sides with either side >=0.01um, and < 0.015um 0.02.
 Vn.6c Mn overlap past Vn for two opposite sides with either side >= 0um, and < 0.01um 0.03.
[answer] V6_6abc {
@ V2 must within M2
@ per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.6a, Vn.6b or Vn.6c
@ V2.6a, V2 minimum within M2 is 0.015
@ Vn.6b Mn overlap past Vn for two opposite sides with either side >=0.01um, and < 0.015um 0.02
@ Vn.6c Mn overlap past Vn for two opposite sides with either side >= 0um, and < 0.01um 0.03
V6_all NOT M6_all
M6andM7 = (M6_all AND M7_all) INTERACT V6_all
BadV6 = RECTANGLE ENCLOSURE V6_all M6_all OUTSIDE ALSO
GOOD 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE
GOOD 0.02 OPPOSITE 0.01 OPPOSITE 0.02 OPPOSITE 0.01 OPPOSITE
GOOD 0.03 0.0 0.03 0.0
BadV6 INTERACT M6andM7
}

[question] Vn touching Mn with width > 0.14um, with at least one redundant Vn.This rule only applies to that M6/M7 intersection area can enclose a rectangle of 0.07*0.27.
[answer] V6_6d {
@ Vn touching Mn with width > 0.14um, with at least one redundant Vn.
@ This rule only applies to that M6/M7 intersection area can enclose a rectangle of 0.07*0.27.
CMACRO V67D V6 M6 M7
}


[question] V2 must within M3 .per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.7a, Vn.7b or Vn.7c.
V6.7a, V2 minimum within M3 is 0.015.
V6.7b, M3 minimum overlap past V2 for two opposite sides with either side >=0.01um, and < 0.015um is 0.02
V6.7c, M3 minimum overlap past V2 for two opposite sides with the either side >=0um, and < 0.01um is 0.03.
[answer] V6_7abc {
@ V2 must within M3
@ per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.7a, Vn.7b or Vn.7c
@ V6.7a, V2 minimum within M3 is 0.015
@ V6.7b, M3 minimum overlap past V2 for two opposite sides with either side >=0.01um, and < 0.015um is 0.02
@ V6.7c, M3 minimum overlap past V2 for two opposite sides with the either side >=0um, and < 0.01um is 0.03
V6_all NOT M7_all
M6andM7 = (M6_all AND M7_all) INTERACT V6_all
BadV6 = RECTANGLE ENCLOSURE V6_all M7_all OUTSIDE ALSO
GOOD 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE
GOOD 0.02 OPPOSITE 0.01 OPPOSITE 0.02 OPPOSITE 0.01 OPPOSITE
GOOD 0.03 0.0 0.03 0.0
BadV6 INTERACT M6andM7
}

[question] Vn+1 touching Mn with width > 0.14um, with at least one redundant Vn.This rule only applies to that M6/M7 intersection area can enclose a rectangle of 0.07*0.27.
[answer] V6_7d {
@ Vn+1 touching Mn with width > 0.14um, with at least one redundant Vn.
@ This rule only applies to that M6/M7 intersection area can enclose a rectangle of 0.07*0.27.
CMACRO V67D V6 M7 M6
}

[question] At least two Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.26um
[answer] V6_8 {
@ At least two Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.26um
WM6 = WITH WIDTH M6 > 0.260
WM7 = WITH WIDTH M7 > 0.260
encVia = V6 INTERACT (WM6 OR WM7)
((M6 AND M7) ENCLOSE encVia) ENCLOSE V6 < 2
}

[question] At least three Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.55um
[answer] V6_9 {
@ At least three Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.55um
WM6 = WITH WIDTH M6 > 0.550
WM7 = WITH WIDTH M7 > 0.550
encVia = V6 INTERACT (WM6 OR WM7)
((M6 AND M7) ENCLOSE encVia) ENCLOSE V6 < 3
}

[question] At least four Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.645um
[answer] V6_10 {
@ At least four Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.645um
WM6 = WITH WIDTH M6 > 0.645
WM7 = WITH WIDTH M7 > 0.645
encVia = V6 INTERACT (WM6 OR WM7)
((M6 AND M7) ENCLOSE encVia) ENCLOSE V6 < 4
}

[question] At least two Vns with space <=0.16um when one of Mn or Mn+1 with both length and width >0.24um.Exclude non-square Vn and SRAM area.
[answer] V6_16 {
@At least two Vns with space <=0.16um when one of Mn or Mn+1 with both length and width >0.24um.
@Exclude non-square Vn and SRAM area.
X1a = WITH WIDTH M6 >0.24
X1b = WITH WIDTH M7 >0.24
WIDE = X1a OR X1b
X2 = (M7 AND M6) ENCLOSE V6_square
X3 = V6_square INSIDE X2
X5c = EXT (V6_EMPTY INSIDE WIDE ) V6_EMPTY<=0.16 ABUT<90 REGION CONNECTED // space of via <= 0.16
X6c = X2 ENCLOSE X5c // good intersection with space of Via <= 0.16
X7= ((SIZE X3 BY 0.325) AND X2) ENCLOSE V6 >2
X7c=X2 ENCLOSE X7
X =((X2 NOT X6c) NOT X7c) ENCLOSE (V6_square INSIDE WIDE ) // Via_16
X OUTSIDE INST
}


[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>0.24um and width W>0.24um, and the distance D<=1.1um away from this wide metal.Exclude non-square Vn
[answer] V6_17 {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>0.24um and width W>0.24um, and the distance D<=1.1um away from this wide metal.
@ Exclude non-square Vn
WM6_L1 = ( M6 NOT WM6 ) TOUCH WM6
M6_ENCWM = (M6 INTERACT WM6) INTERACT V6_A
WM6_VEDGE = EXT [M6_ENCWM] <1.1 ABUT<90 OPPOSITE NOTCH
WM6_EXT1 = EXT (WM6 COIN EDGE WM6_VEDGE) [V6_A] < 1.1 ABUT>=0 <90 OPPOSITE CONNECTED
WM6_EXT2 = (EXT WM6 V6_A < 1.1 ABUT>=0 <90 OPPOSITE REGION CONNECTED ) INSIDE M6
V6_B = V6_square WITH EDGE WM6_EXT1
X1 =(M6 AND M7) ENCLOSE V6_square >1
X2 = ((M6 AND M7) AND ( WM6_L1 AND WM6_EXP )) NOT X1
Y0=(M6 AND M7) ENCLOSE V6_square ==1
Y1 = SIZE (V6_square INTERACT Y0) BY 1.1 INSIDE OF M6 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM6)

VSING1= ((X2 INTERACT V6_B ==1) INTERACT Y2) OR ((X2 INTERACT WM6_EXT2) INTERACT V6_A)
VSING1 OUTSIDE INST

M7_ENCWM = (M7 INTERACT WM7) INTERACT V6_A2
WM7_VEDGE = EXT [M7_ENCWM] <1.1 ABUT<90 OPPOSITE NOTCH
WM7_EXT1 = EXT (WM7_EMPTY COIN EDGE WM7_VEDGE) [V6_A2_EMPTY] < 1.1 ABUT>=0 <90 OPPOSITE CONNECTED
WM7_EXT2 = (EXT WM7_EMPTY V6_A2_EMPTY < 1.1 ABUT>=0 <90 OPPOSITE REGION CONNECTED ) INSIDE M7
V6_B2 = V6_square WITH EDGE WM7_EXT1
X3 = ((M6 AND M7) AND ( WM7_L1 AND WM7_EXP )) NOT X1
Y3 = SIZE (V6_square INTERACT Y0) BY 1.1 INSIDE OF M7 STEP 0.005
Y4= Y3 INTERACT (Y3 AND WM7)

VSING2=((X3 INTERACT V6_B2 ==1) INTERACT Y4) OR (( X3 INTERACT WM7_EXT2) INTERACT V6_A2)
VSING2 OUTSIDE INST
}

[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>1.4um and width W>1.4um, and the distance D<=2.8um away from this wide metal. Exclude non-square Vn
[answer] V6_17a {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>1.4um and width W>1.4um, and the distance D<=2.8um away from this wide metal.
@ Exclude non-square Vn
WM6_L1_a = ( M6 NOT WM6_a ) TOUCH WM6_a
V6_B = COPY V6_square
X1 =(M6 AND M7) ENCLOSE V6_square >1
X2 = ((M6 AND M7) AND ( WM6_L1_a AND WM6_EXP_a )) NOT X1

Y0=(M6 AND M7) ENCLOSE V6_square ==1
Y1 = SIZE (V6_square INTERACT Y0) BY 2.8 INSIDE OF M6 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM6_a)

VSING1= (X2 INTERACT V6_B ==1) INTERACT Y2
VSING1 OUTSIDE INST

V6_B2 = COPY V6_square
X3 = ((M6 AND M7) AND ( WM7_L1_a AND WM7_EXP_a )) NOT X1
Y3 = SIZE (V6_square INTERACT Y0) BY 2.8 INSIDE OF M7 STEP 0.005
Y4 = Y3 INTERACT (Y3 AND WM7_a)

VSING2= (X3 INTERACT V6_B2 ==1) INTERACT Y4
VSING2 OUTSIDE INST
}

[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>7um and width W>2.1um, and the distance D<=7.1um away from this wide metal.Exclude non-square Vn
[answer] V6_17b {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>7um and width W>2.1um, and the distance D<=7.1um away from this wide metal.
@ Exclude non-square Vn
WM6_L1_b = ( M6 NOT WM6_b ) TOUCH WM6_b
V6_B = COPY V6_square
X1 =(M6 AND M7) ENCLOSE V6_square >1
X2 = ((M6 AND M7) AND ( WM6_L1_b AND WM6_EXP_b )) NOT X1

Y0=(M6 AND M7) ENCLOSE V6_square ==1
Y1 = SIZE (V6_square INTERACT Y0) BY 7.1 INSIDE OF M6 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM6_b)

VSING1= (X2 INTERACT V6_B ==1) INTERACT Y2
VSING1 OUTSIDE INST

V6_B2 = COPY V6_square
X3 = ((M6 AND M7) AND ( WM7_L1_b AND WM7_EXP_b )) NOT X1
Y3 = SIZE (V6_square INTERACT Y0) BY 7.1 INSIDE OF M7 STEP 0.005
Y4 = Y3 INTERACT (Y3 AND WM7_b)

VSING2= (X3 INTERACT V6_B2 ==1) INTERACT Y4
VSING2 OUTSIDE INST
}

[question] 45-degree rotated V6 is not allowed.
[answer] V6_18 {
@ 45-degree rotated V6 is not allowed.
(ANGLE V6_all >= 44.9 <= 45.1) NOT INSIDE EDGE MARKS
}

[question] Single V6 is not allowed in "H-shape" M7 when:
1.The M7 has "H-shape" interact with two metal holes: both two metal holes length <= 4.5um(L2) and two metal hole area <= 4.5um2.
2.The V6 overlaps on the center metal bar of this "H-shape" M7.
3.The center metal bar length <= 1um(L) and the metal bar width <= 0.2um.
[answer] V6_19 {
@ Single V6 is not allowed in "H-shape" M7 when:
@ 1. The M7 has "H-shape" interact with two metal holes: both two metal holes length <= 4.5um(L2) and two metal hole area <= 4.5um2.
@ 2. The V6 overlaps on the center metal bar of this "H-shape" M7.
@ 3. The center metal bar length <= 1um(L) and the metal bar width <= 0.2um.
X0 = AREA (HOLES M7 INNER) <= 4.5
X1 = (X0 NOT ENCLOSE RECTANGLE 1+0.001 4.5) NOT ENCLOSE RECTANGLE 1 4.5+0.001
Y = M7 COIN EDGE X1
Z = INT Y <= 0.2 OPPOSITE REGION
H = V6 NOT OUTSIDE (Z INTERACT X1 == 2)
ERR = ((M6 AND M7) INTERACT H) NOT INTERACT (V6 NOT H)
((Z INTERACT H == 1) INTERACT ERR) NOT MARKS
}
[question] V6 connected to M7DUM, M6DUM is not allowed. This rule is not applied for LOGO covered region.
[answer] V6_20 {
@ V6 connected to M7DUM, M6DUM is not allowed.
@ This rule is not applied for LOGO covered region.
(V6 INTERACT (M7DUM OR M6DUM)) NOT LOGO
}


[question] V6 must be fully covered by M6 and M7.
[answer] V6_21 {
@ V6 must be fully covered by M6 and M7.
V6_all NOT (M6_all AND M7_all)
}

[question] Insert one V6 if single V6 and (W6 >= 5W7, or W7 >= 5W6) at enclosure.
[answer] V6_22_R_OFF {
@ Insert one V6 if single V6 and (W6 >= 5W7, or W7 >= 5W6) at enclosure.
CMACRO DFM4 M6 M7 V6
}

[question] At least two vias (Vn, TV1, TV2, n=17) in Mn and Mn+1 (M1, Mn, n=28, TM1, TM2) intersection area.
(This rule is not applicable for SRAM region,but SRAM region should follow main rule: V1.17, Vn.17, TV1.13, TV2.13, TV2.14)
[answer] V6_23_R_OFF {
@ At least two vias (Vn, TV1, TV2, n=17) in Mn and Mn+1 (M1, Mn, n=28, TM1, TM2) intersection area.
@ (This rule is not applicable for SRAM region,
@ but SRAM region should follow main rule: V1.17, Vn.17, TV1.13, TV2.13, TV2.14)
V6_INTER= V6 INSIDE (M6 AND M7)
X = (M6 AND M7) INTERACT V6_INTER <2
X OUTSIDE INST
}

[question] It's not allowed V6 overlap with M6 and M7 resistor.
[answer] V6_24 {
@ It's not allowed V6 overlap with M6 and M7 resistor.
V6 AND (M6 AND M6R)
V6 AND (M7 AND M7R)
}

[question] Fixed V7 size is 0.07
[answer] V7_1 {
@ Fixed V7 size is 0.07
NOT RECTANGLE V7 == 0.07 BY == 0.07
}

[question] Space between two V7 is 0.07
[answer] V7_2 {
@ Space between two V7 is 0.07
EXT V7_all < 0.07 ABUT<90 SINGULAR REGION
}

[question] Space between Vns (with run length>=0) at least two least two sides is 0.09, when array equal to or greater than 3x3.
Two Via areas whose space is within 0.10um are considered to be in the same array. An array does not have both row and column greater than or equal to 3 can apply smaller spacing Vn.2 instead of Vn.3
[answer] V7_3 {
@Space between Vns (with run length>=0) at least two least two sides is 0.09, when array equal to or greater than 3x3.
@Two Via areas whose space is within 0.10um are considered to be in the same array. An array does
@ not have both row and column greater than or equal to 3 can apply smaller spacing Vn.2 instead of Vn.3
X = EXT (V7 INTERACT V7_array) V7< 0.090 OPPOSITE EXTENDED 0.001 REGION
Y =SIZE V7 BY 0.001
(Y INTERACT V7_array) INTERACT (X NOT Y) >2
}


[question] V7_array not touching MOMDMY maximum width is 0.85
[answer] V7_4 {
@ V7_array not touching MOMDMY maximum width is 0.85
(WITH WIDTH V7_array > 0.85) NOT INTERACT MOMDMY
}

[question] V7 (different net) minimum space for run length > 0um is 0.1 (outside of SRAM)
[answer] V7_5 {
@ V7 (different net) minimum space for run length > 0um is 0.1 (outside of SRAM)
X = EXT V7 < 0.1 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
(EXT V7DUM < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
(EXT V7DUM V7 < 0.1 ABUT<90 SINGULAR OPPOSITE REGION) OUTSIDE INST
}

[question] V7 (different net) minimum space for run length > 0um is 0.11 (outside of SRAM)
[answer] V7_5_R_OFF {
@ V7 (different net) minimum space for run length > 0um is 0.11 (outside of SRAM)
X = EXT V7 < 0.11 NOT CONNECTED OPPOSITE REGION
X OUTSIDE INST
}

[question] V7 (different net) minimum space is 0.09
[answer] V7_5a {
@ V7 (different net) minimum space is 0.09
EXT V7 < 0.09 NOT CONNECTED REGION
EXT V7DUM < 0.09 ABUT<90 SINGULAR REGION
EXT V7DUM V7 < 0.09 ABUT<90 SINGULAR REGION
}

[question] Vn minimum space in different net inside of SRAM is 0.09
[answer] V7_5b {
@ Vn minimum space in different net inside of SRAM is 0.09
EXT (V7 NOT OUTSIDE INST) < 0.09 NOT CONNECTED REGION
}

[question] V2 must within M2
per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.6a, Vn.6b or Vn.6c.
V2.6a, V2 minimum within M2 is 0.015.
Vn.6b Mn overlap past Vn for two opposite sides with either side >=0.01um, and < 0.015um 0.02.
Vn.6c Mn overlap past Vn for two opposite sides with either side >= 0um, and < 0.01um 0.03.
[answer] V7_6abc {
@ V2 must within M2
@ per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.6a, Vn.6b or Vn.6c
@ V2.6a, V2 minimum within M2 is 0.015
@ Vn.6b Mn overlap past Vn for two opposite sides with either side >=0.01um, and < 0.015um 0.02
@ Vn.6c Mn overlap past Vn for two opposite sides with either side >= 0um, and < 0.01um 0.03
V7_all NOT M7_all
M7andM8 = (M7_all AND M8_all) INTERACT V7_all
BadV7 = RECTANGLE ENCLOSURE V7_all M7_all OUTSIDE ALSO
GOOD 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE
GOOD 0.02 OPPOSITE 0.01 OPPOSITE 0.02 OPPOSITE 0.01 OPPOSITE
GOOD 0.03 0.0 0.03 0.0
BadV7 INTERACT M7andM8
}

[question] Vn inside Mn with width > 0.14um, with at least one redundant Vn.
This rule only applies to that M7/M8 intersection area can enclose a rectangle of 0.070.27.
[answer] V7_6d {
@ Vn inside Mn with width > 0.14um, with at least one redundant Vn.
@ This rule only applies to that M7/M8 intersection area can enclose a rectangle of 0.070.27.
CMACRO V67D V7 M7 M8
}

[question] V2 must within M3
per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.7a, Vn.7b or Vn.7c.
V6.7a, V2 minimum within M3 is 0.015.
V6.7b M3 minimum overlap past V2 for two opposite sides with either side >=0.01um, and < 0.015um is 0.02.
V6.7c M3 minimum overlap past V2 for two opposite sides with the either side >=0um, and < 0.01um is 0.03.
[answer] V7_7abc {
@ V2 must within M3
@ per Mn and Mn+1 intersection containing a Vn, must meet rule Vn.7a, Vn.7b or Vn.7c
@ V6.7a, V2 minimum within M3 is 0.015
@ V6.7b, M3 minimum overlap past V2 for two opposite sides with either side >=0.01um, and < 0.015um is 0.02
@ V6.7c, M3 minimum overlap past V2 for two opposite sides with the either side >=0um, and < 0.01um is 0.03
V7_all NOT M8_all
M7andM8 = (M7_all AND M8_all) INTERACT V7_all
BadV7 = RECTANGLE ENCLOSURE V7_all M8_all OUTSIDE ALSO
GOOD 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE 0.015 OPPOSITE
GOOD 0.02 OPPOSITE 0.01 OPPOSITE 0.02 OPPOSITE 0.01 OPPOSITE
GOOD 0.03 0.0 0.03 0.0
BadV7 INTERACT M7andM8
}

[question] Vn inside Mn+1 with width > 0.14um, with at least one redundant Vn.
This rule only applies to that M7/M8 intersection area can enclose a rectangle of 0.070.27.
[answer] V7_7d {
@ Vn inside Mn+1 with width > 0.14um, with at least one redundant Vn.
@ This rule only applies to that M7/M8 intersection area can enclose a rectangle of 0.070.27.
CMACRO V67D V7 M8 M7
}

[question] At least two Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.26um
[answer] V7_8 {
@ At least two Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.26um
WM7 = WITH WIDTH M7 > 0.260
WM8 = WITH WIDTH M8 > 0.260
encVia = V7 INTERACT (WM7 OR WM8)
((M7 AND M8) ENCLOSE encVia) ENCLOSE V7 < 2
}

[question] At least three Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.55um
[answer] V7_9 {
@ At least three Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.55um
WM7 = WITH WIDTH M7 > 0.550
WM8 = WITH WIDTH M8 > 0.550
encVia = V7 INTERACT (WM7 OR WM8)
((M7 AND M8) ENCLOSE encVia) ENCLOSE V7 < 3
}

[question] At least four Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.645um
[answer] V7_10 {
@ At least four Vn vias must connect Mn to Mn+1 when the Mn or Mn+1 width is > 0.645um
WM7 = WITH WIDTH M7 > 0.645
WM8 = WITH WIDTH M8 > 0.645
encVia = V7 INTERACT (WM7 OR WM8)
((M7 AND M8) ENCLOSE encVia) ENCLOSE V7 < 4
}

[question] At least two Vns with space <=0.16um when one of Mn or Mn+1 with both length and width >0.24um.
Exclude non-square Vn and SRAM area.
[answer] V7_16 {
@ At least two Vns with space <=0.16um when one of Mn or Mn+1 with both length and width >0.24um.
@ Exclude non-square Vn and SRAM area.
X1a = WITH WIDTH M7 >0.24
X1b = WITH WIDTH M8 >0.24
WIDE = X1a OR X1b
X2 = (M7 AND M8) ENCLOSE V7_square
X3 = V7_square INSIDE X2
X5c = EXT (V7_EMPTY INSIDE WIDE ) V7_EMPTY <=0.16 ABUT<90 REGION CONNECTED // space of via <= 0.16
X6c = X2 ENCLOSE X5c // good intersection with space of Via <= 0.16
X7= ((SIZE X3 BY 0.325) AND X2) ENCLOSE V7 >2
X7c=X2 ENCLOSE X7
X =((X2 NOT X6c) NOT X7c) ENCLOSE (V7_square INSIDE WIDE ) // Via_16
X OUTSIDE INST
}

[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>0.24um and width W>0.24um, and the distance D<=1.1um away from this wide metal.
Exclude non-square Vn
[answer] V7_17 {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>0.24um and width W>0.24um, and the distance D<=1.1um away from this wide metal.
@ Exclude non-square Vn
WM7_L1 = ( M7 NOT WM7 ) TOUCH WM7
M7_ENCWM = (M7 INTERACT WM7) INTERACT V7_A
WM7_VEDGE = EXT [M7_ENCWM] <1.1 ABUT<90 OPPOSITE NOTCH
WM7_EXT1 = EXT (WM7 COIN EDGE WM7_VEDGE) [V7_A] < 1.1 ABUT>=0 <90 OPPOSITE CONNECTED
WM7_EXT2 = (EXT WM7 V7_A < 1.1 ABUT>=0 <90 OPPOSITE REGION CONNECTED ) INSIDE M7
V7_B = V7_square WITH EDGE WM7_EXT1
X1 =(M7 AND M8) ENCLOSE V7_square >1
X2 = ((M7 AND M8) AND ( WM7_L1 AND WM7_EXP )) NOT X1

Y0=(M7 AND M8) ENCLOSE V7_square ==1
Y1 = SIZE (V7_square INTERACT Y0) BY 1.1 INSIDE OF M7 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM7)

VSING1= ((X2 INTERACT V7_B ==1) INTERACT Y2) OR ((X2 INTERACT WM7_EXT2) INTERACT V7_A)
VSING1 OUTSIDE INST

M8_ENCWM = (M8 INTERACT WM8) INTERACT V7_A2
WM8_VEDGE = EXT [M8_ENCWM] <1.1 ABUT<90 OPPOSITE NOTCH
WM8_EXT1 = EXT (WM8_EMPTY COIN EDGE WM8_VEDGE) [V7_A2_EMPTY] < 1.1 ABUT>=0 <90 OPPOSITE CONNECTED
WM8_EXT2 = (EXT WM8_EMPTY V7_A2_EMPTY < 1.1 ABUT>=0 <90 OPPOSITE REGION CONNECTED ) INSIDE M8
V7_B2 = V7_square WITH EDGE WM8_EXT1
X3 = ((M7 AND M8) AND ( WM8_L1 AND WM8_EXP )) NOT X1
Y3 = SIZE (V7_square INTERACT Y0) BY 1.1 INSIDE OF M8 STEP 0.005
Y4= Y3 INTERACT (Y3 AND WM8)

VSING2= ((X3 INTERACT V7_B2 ==1) INTERACT Y4) OR (( X3 INTERACT WM8_EXT2) INTERACT V7_A2)
VSING2 OUTSIDE INST
}

[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>1.4um and width W>1.4um, and the distance D<=2.8um away from this wide metal.
Exclude non-square Vn
[answer] V7_17a {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>1.4um and width W>1.4um, and the distance D<=2.8um away from this wide metal.
@ Exclude non-square Vn
WM7_L1_a = ( M7 NOT WM7_a ) TOUCH WM7_a
V7_B = COPY V7_square
X1 =(M7 AND M8) ENCLOSE V7_square >1
X2 = ((M7 AND M8) AND ( WM7_L1_a AND WM7_EXP_a )) NOT X1

Y0=(M7 AND M8) ENCLOSE V7_square ==1
Y1 = SIZE (V7_square INTERACT Y0) BY 2.8 INSIDE OF M7 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM7_a)

VSING1= (X2 INTERACT V7_B ==1) INTERACT Y2
VSING1 OUTSIDE INST

V7_B2 = COPY V7_square
X3 = ((M7 AND M8) AND ( WM8_L1_a AND WM8_EXP_a )) NOT X1
Y3 = SIZE (V7_square INTERACT Y0) BY 2.8 INSIDE OF M8 STEP 0.005
Y4 = Y3 INTERACT (Y3 AND WM8_a)

VSING2= (X3 INTERACT V7_B2 ==1) INTERACT Y4
VSING2 OUTSIDE INST
}


[question] At least two Vns when either wide metal of Mn or Mn+1 with both length L>7um and width W>2.1um, and the distance D<=7.1um away from this wide metal.
Exclude non-square Vn
[answer] V7_17b {
@ At least two Vns when either wide metal of Mn or Mn+1 with both length L>7um and width W>2.1um, and the distance D<=7.1um away from this wide metal.
@ Exclude non-square Vn
WM7_L1_b = ( M7 NOT WM7_b ) TOUCH WM7_b
V7_B = COPY V7_square
X1 =(M7 AND M8) ENCLOSE V7_square >1
X2 = ((M7 AND M8) AND ( WM7_L1_b AND WM7_EXP_b )) NOT X1

Y0=(M7 AND M8) ENCLOSE V7_square ==1
Y1 = SIZE (V7_square INTERACT Y0) BY 7.1 INSIDE OF M7 STEP 0.005
Y2= Y1 INTERACT (Y1 AND WM7_b)

VSING1= (X2 INTERACT V7_B ==1) INTERACT Y2
VSING1 OUTSIDE INST

V7_B2 = COPY V7_square
X3 = ((M7 AND M8) AND ( WM8_L1_b AND WM8_EXP_b )) NOT X1
Y3 = SIZE (V7_square INTERACT Y0) BY 7.1 INSIDE OF M8 STEP 0.005
Y4 = Y3 INTERACT (Y3 AND WM8_b)

VSING2= (X3 INTERACT V7_B2 ==1) INTERACT Y4
VSING2 OUTSIDE INST
}

[question] 45-degree rotated V7 is not allowed.
[answer] V7_18 {
@ 45-degree rotated V7 is not allowed.
(ANGLE V7_all >= 44.9 <= 45.1) NOT INSIDE EDGE MARKS
}

[question] Single V7 is not allowed in "H-shape" M8 when:
1.The M8 has "H-shape" interact with two metal holes: both two metal holes length <= 4.5um(L2) and two metal hole area <= 4.5um2.
2.The V7 overlaps on the center metal bar of this "H-shape" M8.
3.The center metal bar length <= 1um(L) and the metal bar width <= 0.2um.
[answer] V7_19 {
@ Single V7 is not allowed in "H-shape" M8 when:
@ 1. The M8 has "H-shape" interact with two metal holes: both two metal holes length <= 4.5um(L2) and two metal hole area <= 4.5um2.
@ 2. The V7 overlaps on the center metal bar of this "H-shape" M8.
@ 3. The center metal bar length <= 1um(L) and the metal bar width <= 0.2um.
X0 = AREA (HOLES M8 INNER) <= 4.5
X1 = (X0 NOT ENCLOSE RECTANGLE 1+0.001 4.5) NOT ENCLOSE RECTANGLE 1 4.5+0.001
Y = M8 COIN EDGE X1
Z = INT Y <= 0.2 OPPOSITE REGION
H = V7 NOT OUTSIDE (Z INTERACT X1 == 2)
ERR = ((M7 AND M8) INTERACT H) NOT INTERACT (V7 NOT H)
((Z INTERACT H == 1) INTERACT ERR) NOT MARKS
}
[question] V7 connected to M8DUM, M7DUM is not allowed.
This rule is not applied for LOGO covered region.
[answer] V7_20 {
@ V7 connected to M8DUM, M7DUM is not allowed.
@ This rule is not applied for LOGO covered region.
(V7 INTERACT (M8DUM OR M7DUM)) NOT LOGO
}

[question] V7 must be fully covered by M7 and M8.
[answer] V7_21 {
@ V7 must be fully covered by M7 and M8.
V7_all NOT (M7_all AND M8_all)
}


[question] Insert one V7 if single V7 and (W7 >= 5W8, or W8 >= 5W7) at enclosure.
[answer] V7_22_R_OFF {
@ Insert one V7 if single V7 and (W7 >= 5W8, or W8 >= 5W7) at enclosure.
CMACRO DFM4 M7 M8 V7
}

[question] At least two vias (Vn, TV1, TV2, n=17) in Mn and Mn+1 (M1, Mn, n=28, TM1, TM2) intersection area.
(This rule is not applicable for SRAM region,
but SRAM region should follow main rule: V1.17, Vn.17, TV1.13, TV2.13, TV2.14)
[answer] V7_23_R_OFF {
@ At least two vias (Vn, TV1, TV2, n=17) in Mn and Mn+1 (M1, Mn, n=28, TM1, TM2) intersection area.
@ (This rule is not applicable for SRAM region,
@ but SRAM region should follow main rule: V1.17, Vn.17, TV1.13, TV2.13, TV2.14)
V7_INTER= V7 INSIDE (M7 AND M8)
X = (M7 AND M8) INTERACT V7_INTER <2
X OUTSIDE INST
}

[question] It's not allowed V7 overlap with M7 and M8 resistor.
[answer] V7_24 {
@ It?s not allowed V7 overlap with M7 and M8 resistor.
V7 AND (M7 AND M7R)
V7 AND (M8 AND M8R)
}

[question] Fixed TV2 size is 0.36.
[answer] TV2_1 {
@ Fixed TV2 size is 0.36
NOT RECTANGLE TV2 == 0.36 BY == 0.36
}

[question] Space between two TV2 is 0.34.
[answer] TV2_2 {
@ Space between two TV2 is 0.34
EXT TV2 < 0.34 ABUT<90 SINGULAR REGION
}

[question] Space between two TV2s is 0.50, in case TV2 array is larger than or equal to 3x3.
Two Via areas whose space is within 0.56um are considered to be in the same array.
[answer] TV2_3 {
@ Space between two TV2s is 0.50, in case TV2 array is larger than or equal to 3x3.
@ Two Via areas whose space is within 0.56um are considered to be in the same array.
TV2array = SIZE (SIZE TV2 BY 0.28 OVERUNDER) BY 0.85 UNDEROVER
EXT (TV2 IN TV2array) < 0.50 ABUT<90 SINGULAR REGION
}

[question] TV2 enclosure by Mn is >= 0.01um.
 TV2 enclosure by Mn at least two opposite sides is >= 0.05.
Mn is the metal layer directly underneath TV2.
[answer] TV2_4_5 {
@ TV2 enclosure by Mn is >= 0.01um.
@ TV2 enclosure by Mn at least two opposite sides is >= 0.05
@ Mn is the metal layer directly underneath TV2.
RECTANGLE ENC TV2 M8 ABUT<90 OUTSIDE ALSO
GOOD 0.01 OPPOSITE 0.05 OPPOSITE 0.01 OPPOSITE 0.05 OPPOSITE
}

[question] At least 2 TV2 within M8 and TM2 intersection area. One of the M8 and TM2 width > 1.8 um.
[answer] TV2_13_14{
@ At least 2 TV2 within M8 and TM2 intersection area. One of the M8 and TM2 width > 1.8 um.
X1 = M8 WITH WIDTH >1.8
X2 = TM2 WITH WIDTH >1.8
Y1 = (M8 AND TM2) INTERACT X1
Y2 = (M8 AND TM2) INTERACT X2
(Y1 OR Y2) INTERACT TV2 < 2
}

[question] TV2 connected to M8DUM, TM2DUM is not allowed.
This rule is not applied for LOGO covered region.
[answer] TV2_17 {
@ TV2 connected to M8DUM, TM2DUM is not allowed.
@ This rule is not applied for LOGO covered region.
(TV2 INTERACT ((M8DUM OR TM2DUM) OR MTT2DM)) NOT LOGO
}

[question] TV2 must be fully covered by M8 and TM2.
[answer] TV2_18 {
@ TV2 must be fully covered by M8 and TM2.
TV2 NOT (M8 AND TM)
}






